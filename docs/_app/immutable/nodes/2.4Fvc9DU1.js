import"../chunks/DsnmJJEf.js";import{i as Ee}from"../chunks/BhtY715V.js";import{w as Ie,aE as Ya,aF as ja,aG as Wa,aH as qa,aI as Va,aJ as Ka,F as He,e as Q,M as pa,aK as Ua,p as Te,aL as Re,aM as vt,l as J,t as oe,a as Z,m as Oe,T as M,R as T,n as y,o as b,q as p,h as o,aN as le,aO as At,f as Za,aP as Ja}from"../chunks/BGg158e2.js";import{b as Qa,l as ya,w as Rt,d as en,g as Se,s as fe,e as z,o as Ct,c as tn,f as an,i as nn}from"../chunks/B19_yFmH.js";import{i as be,s as ht,a as xe,p as Bt,b as je}from"../chunks/Cv05pqdj.js";const $t=[...` 	
\r\fÂ \v\uFEFF`];function on(e,t,n){var i=e==null?"":""+e;if(n){for(var a in n)if(n[a])i=i?i+" "+a:a;else if(i.length)for(var r=a.length,l=0;(l=i.indexOf(a,l))>=0;){var s=l+r;(l===0||$t.includes(i[l-1]))&&(s===i.length||$t.includes(i[s]))?i=(l===0?"":i.substring(0,l))+i.substring(s+1):l=s}}return i===""?null:i}function rn(e,t){return e==null?null:String(e)}function ce(e,t,n,i,a,r){var l=e.__className;if(Ie||l!==n||l===void 0){var s=on(n,i,r);(!Ie||s!==e.getAttribute("class"))&&(s==null?e.removeAttribute("class"):e.className=s),e.__className=n}else if(r&&a!==r)for(var g in r){var v=!!r[g];(a==null||v!==!!a[g])&&e.classList.toggle(g,v)}return r}function wt(e,t,n,i){var a=e.__style;if(Ie||a!==t){var r=rn(t);(!Ie||r!==e.getAttribute("style"))&&(r==null?e.removeAttribute("style"):e.style.cssText=r),e.__style=t}return i}const sn=Symbol("is custom element"),ln=Symbol("is html");function he(e){if(Ie){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var i=e.value;at(e,"value",null),e.value=i}if(e.hasAttribute("checked")){var a=e.checked;at(e,"checked",null),e.checked=a}}};e.__on_r=n,qa(n),Qa()}}function at(e,t,n,i){var a=cn(e);Ie&&(a[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||a[t]!==(a[t]=n)&&(t==="loading"&&(e[Va]=n),n==null?e.removeAttribute(t):typeof n!="string"&&dn(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function cn(e){return e.__attributes??={[sn]:e.nodeName.includes("-"),[ln]:e.namespaceURI===Ya}}var zt=new Map;function dn(e){var t=zt.get(e.nodeName);if(t)return t;zt.set(e.nodeName,t=[]);for(var n,i=e,a=Element.prototype;a!==i;){n=Wa(i);for(var r in n)n[r].set&&t.push(r);i=ja(i)}return t}function ke(e,t,n=t){var i=Ka(),a=new WeakSet;ya(e,"input",r=>{var l=r?e.defaultValue:e.value;if(l=mt(e)?pt(l):l,n(l),He!==null&&a.add(He),i&&l!==(l=t())){var s=e.selectionStart,g=e.selectionEnd;e.value=l??"",g!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(g,e.value.length))}}),(Ie&&e.defaultValue!==e.value||Q(t)==null&&e.value)&&(n(mt(e)?pt(e.value):e.value),He!==null&&a.add(He)),pa(()=>{var r=t();if(e===document.activeElement){var l=Ua??He;if(a.has(l))return}mt(e)&&r===pt(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function nt(e,t,n=t){ya(e,"change",i=>{var a=i?e.defaultChecked:e.checked;n(a)}),(Ie&&e.defaultChecked!==e.checked||Q(t)==null)&&n(e.checked),pa(()=>{var i=t();e.checked=!!i})}function mt(e){var t=e.type;return t==="number"||t==="range"}function pt(e){return e===""?null:+e}const ba="zenZoneTimerSettings",It={workDuration:Math.max(1,25)*60,shortBreakDuration:Math.max(1,5)*60,longBreakDuration:Math.max(1,15)*60,sessionsBeforeLongBreak:Math.max(1,4),autoCycle:!1};function yt(e){const t={...It,...e};return t.workDuration=Math.max(1,Math.floor(t.workDuration/60))*60,t.shortBreakDuration=Math.max(1,Math.floor(t.shortBreakDuration/60))*60,t.longBreakDuration=Math.max(1,Math.floor(t.longBreakDuration/60))*60,t.sessionsBeforeLongBreak=Math.max(1,Math.floor(t.sessionsBeforeLongBreak)),t}function Sa(){if(typeof window<"u"&&window.localStorage){const e=localStorage.getItem(ba);if(e)try{const t=JSON.parse(e);if(t&&typeof t.workDuration=="number"&&typeof t.shortBreakDuration=="number"&&typeof t.longBreakDuration=="number"&&typeof t.sessionsBeforeLongBreak=="number"&&typeof t.autoCycle=="boolean")return yt(t);if(t)return console.warn("Partially invalid settings found in localStorage, attempting to sanitize."),yt(t)}catch(t){console.error("Error parsing timer settings from localStorage:",t)}}return yt(It)}const un=Sa(),gn={currentSession:"Work",timeRemaining:un.workDuration,isRunning:!1,currentCycleCount:0},me=Rt(Sa()),re=Rt(gn);typeof window<"u"&&window.localStorage&&me.subscribe(e=>{try{localStorage.setItem(ba,JSON.stringify(e))}catch(t){console.error("Error saving timer settings to localStorage:",t)}});const vn=en(re,e=>{const t=Math.floor(e.timeRemaining/60),n=e.timeRemaining%60;return`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}`});let de;function Ma(){const e=Se(re);if(e.isRunning&&e.timeRemaining>0)return;let t=e.timeRemaining;if(t<=0){const n=Se(me);switch(e.currentSession){case"Work":t=n.workDuration;break;case"Short Break":t=n.shortBreakDuration;break;case"Long Break":t=n.longBreakDuration;break}}re.update(n=>({...n,isRunning:!0,timeRemaining:t})),de&&clearInterval(de),de=setInterval(()=>{const n=Se(re);n.isRunning&&n.timeRemaining>0?re.update(i=>({...i,timeRemaining:i.timeRemaining-1})):n.isRunning&&n.timeRemaining<=0&&(de&&clearInterval(de),de=void 0,mn())},1e3)}function hn(){de&&(clearInterval(de),de=void 0),re.update(e=>({...e,isRunning:!1}))}function fn(){de&&(clearInterval(de),de=void 0),re.update(e=>{let t,n,i=e.currentCycleCount,a=It;return me.subscribe(l=>{a=l})(),e.currentSession==="Work"?(i++,i>=a.sessionsBeforeLongBreak?(t="Long Break",n=a.longBreakDuration,i=0):(t="Short Break",n=a.shortBreakDuration)):(t="Work",n=a.workDuration),{...e,currentSession:t,timeRemaining:n,isRunning:!1,currentCycleCount:i}})}function _a(e){de&&(clearInterval(de),de=void 0);const t=Se(me),n=e||Se(re).currentSession;let i=t.workDuration,a=Se(re).currentCycleCount;switch(n){case"Work":i=t.workDuration,e==="Work"&&(a=0);break;case"Short Break":i=t.shortBreakDuration;break;case"Long Break":i=t.longBreakDuration;break}re.update(r=>({...r,currentSession:n,timeRemaining:i,isRunning:!1,currentCycleCount:a}))}function Nt(e){re.update(t=>{if(t.isRunning)return t;const n=Math.max(60,e);return me.update(i=>{const a={...i};switch(t.currentSession){case"Work":a.workDuration=n;break;case"Short Break":a.shortBreakDuration=n;break;case"Long Break":a.longBreakDuration=n;break}return a}),{...t,timeRemaining:n}})}function mn(){const e=Se(re),t=Se(me);let n,i=e.currentCycleCount;e.currentSession==="Work"?(i++,i>=t.sessionsBeforeLongBreak?(n="Long Break",i=0):n="Short Break"):n="Work",re.update(a=>({...a,currentSession:n,isRunning:!1,currentCycleCount:i})),_a(n),t.autoCycle&&Ma()}var pn=J('<div class="mx-2 flex scale-75 flex-col items-center justify-center opacity-60 transition-opacity hover:opacity-100"><button title="Increase minutes" aria-label="Increase minutes" class="p-1 text-gray-300 hover:text-teal-300 disabled:opacity-30"><svg class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg></button> <button title="Decrease minutes" aria-label="Decrease minutes" class="p-1 text-gray-300 hover:text-teal-300 disabled:opacity-30"><svg class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div>'),yn=J('<div class="mt-2 mb-8 text-center"><p class="mb-2 text-xl font-semibold text-teal-400" id="current-session-label"> </p> <div class="relative flex items-center justify-center font-mono text-8xl tracking-tighter text-gray-100 tabular-nums select-none svelte-1sjqirj" aria-live="polite" aria-atomic="true"><!> <span class="w-32 text-center"> </span> <span class="w-8 text-center">:</span> <span class="w-32 text-center"> </span></div> <div class="mt-6 h-2.5 w-full overflow-hidden rounded-full bg-slate-700 shadow-inner"><div class="h-2.5 rounded-full bg-teal-500 transition-all duration-1000 ease-linear" aria-valuemin="0" aria-valuemax="100" aria-labelledby="current-session-label" role="progressbar"></div></div></div>');function bn(e,t){Te(t,!1);const[n,i]=ht(),a=()=>xe(re,"$timerState",n),r=()=>xe(me,"$timerSettings",n),l=()=>xe(vn,"$formattedTime",n),s=T(),g=T();let v=T(0);function u(){if(a().isRunning)return;const E=Math.floor(a().timeRemaining/60),L=a().timeRemaining%60,P=(E+1)*60+L;Nt(P)}function m(){if(a().isRunning)return;const E=Math.floor(a().timeRemaining/60),L=a().timeRemaining%60,P=Math.max(0,E-1)*60+L;Nt(P)}Re(()=>(a(),r()),()=>{const E=a(),L=r();let P=L.workDuration;E.currentSession==="Short Break"?P=L.shortBreakDuration:E.currentSession==="Long Break"&&(P=L.longBreakDuration),P=Math.max(1,P),P>0?M(v,Math.max(0,100-E.timeRemaining/P*100)):M(v,E.timeRemaining>0?0:100)}),Re(()=>l(),()=>{M(s,l().substring(0,2))}),Re(()=>l(),()=>{M(g,l().substring(3,5))}),vt(),Ee();var A=yn(),d=y(A),c=y(d,!0);b(d);var k=p(d,2),w=y(k);{var C=E=>{var L=pn(),P=y(L),$=p(P,2);b(L),oe(()=>{P.disabled=(a(),Q(()=>a().isRunning)),$.disabled=(a(),Q(()=>a().isRunning||a().timeRemaining<120&&a().timeRemaining%60===0&&a().timeRemaining/60<=1||a().timeRemaining<60))}),z("click",P,u),z("click",$,m),Z(E,L)};be(w,E=>{a(),Q(()=>!a().isRunning)&&E(C)})}var S=p(w,2),Y=y(S,!0);b(S);var I=p(S,4),x=y(I,!0);b(I),b(k);var G=p(k,2),B=y(G);b(G),b(A),oe(()=>{fe(c,(a(),Q(()=>a().currentSession))),fe(Y,o(s)),fe(x,o(g)),wt(B,`width: ${o(v)??""}%;`),at(B,"aria-valuenow",o(v))}),Z(e,A),Oe(),i()}var Sn=J(`<button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
             text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-teal-300
             focus:ring-2 focus:ring-teal-400
             focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50"> </button>`),Mn=J(`<button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
             text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-amber-300
             focus:ring-2 focus:ring-amber-300
             focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50" aria-label="Pause timer">Pause</button>`),_n=J(`<div class="mt-6 flex justify-center space-x-2"><!> <button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
           text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-sky-300
           focus:ring-2 focus:ring-sky-400
           focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50" aria-label="Skip to next session" title="Skip to next session">Skip <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="ml-1 inline h-5 w-5 align-text-bottom"><path fill-rule="evenodd" d="M2 10a.75.75 0 0 1 .75-.75h12.59l-2.1-1.95a.75.75 0 1 1 1.02-1.1l3.5 3.25a.75.75 0 0 1 0 1.1l-3.5 3.25a.75.75 0 1 1-1.02-1.1l2.1-1.95H2.75A.75.75 0 0 1 2 10Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M18 10a.75.75 0 0 1-.75.75h-.008a.75.75 0 0 1 0-1.5h.008A.75.75 0 0 1 18 10Z" clip-rule="evenodd"></path></svg></button> <button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
           text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-rose-300
           focus:ring-2 focus:ring-rose-400
           focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50" aria-label="Reset current session timer" title="Reset current session">Reset <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="ml-1 inline h-5 w-5 align-text-bottom"><path fill-rule="evenodd" d="M15.323 3.407a.75.75 0 0 1 0 1.06l-2.096 2.096A6.5 6.5 0 0 1 10 16.5a6.501 6.501 0 0 1-6.414-5.523.75.75 0 0 1 1.482-.236A5.001 5.001 0 0 0 10 15a5 5 0 0 0 4.19-2.402l-1.618 1.617a.75.75 0 1 1-1.06 1.061l3.25-3.25a.75.75 0 0 1 0-1.06l-3.25-3.25a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M4.677 12.593a.75.75 0 0 1 0-1.06l2.096-2.096A6.5 6.5 0 0 1 10 3.5a6.501 6.501 0 0 1 6.414 5.523.75.75 0 0 1-1.482.236A5.001 5.001 0 0 0 10 5a5 5 0 0 0-4.19 2.402l1.618-1.617a.75.75 0 1 1 1.06-1.061L5.238 8.075a.75.75 0 0 1 0 1.06l3.25 3.25a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd"></path></svg></button></div>`);function An(e,t){Te(t,!1);const[n,i]=ht(),a=()=>xe(re,"$timerState",n),r=()=>xe(me,"$timerSettings",n);let l=T();Re(()=>(a(),r()),()=>{const d=a(),c=r();M(l,!d.timeRemaining||d.currentSession==="Work"&&d.timeRemaining===c.workDuration||d.currentSession==="Short Break"&&d.timeRemaining===c.shortBreakDuration||d.currentSession==="Long Break"&&d.timeRemaining===c.longBreakDuration)}),vt(),Ee();var s=_n(),g=y(s);{var v=d=>{var c=Sn(),k=y(c,!0);b(c),oe(()=>{at(c,"aria-label",o(l)?"Start timer":"Resume timer"),fe(k,o(l)?"Start":"Resume")}),z("click",c,function(...w){Ma?.apply(this,w)}),Z(d,c)},u=d=>{var c=Mn();z("click",c,function(...k){hn?.apply(this,k)}),Z(d,c)};be(g,d=>{a(),Q(()=>!a().isRunning)?d(v):d(u,!1)})}var m=p(g,2),A=p(m,2);b(s),oe(()=>{m.disabled=(a(),Q(()=>a().isRunning)),A.disabled=(a(),o(l),Q(()=>a().isRunning&&o(l)))}),z("click",m,function(...d){fn?.apply(this,d)}),z("click",A,function(...d){_a?.apply(this,d)}),Z(e,s),Oe(),i()}const Ft=20,Me={gradientColor1:"hsl(210, 70%, 50%)",gradientColor2:"hsl(200, 68%, 50%)",isFloatingEnabled:!0,gradientColor1History:["hsl(210, 70%, 50%)"],gradientColor1HistoryIndex:0,gradientColor2History:["hsl(200, 68%, 50%)"],gradientColor2HistoryIndex:0,isAutoCyclingColor1:!1,isAutoCyclingColor2:!1};function Aa(e){if(!e)return null;const t=e.match(/hsl\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)/);return t?{h:parseInt(t[1]),s:parseInt(t[2]),l:parseInt(t[3])}:null}function Xt(){const e=Se(pe);return Aa(e.gradientColor1)||{h:210,s:70,l:50}}function Ht(){const e=Se(pe);return Aa(e.gradientColor2)||{h:200,s:68,l:50}}function wn(){let e={...Me,gradientColor1History:[...Me.gradientColor1History],gradientColor2History:[...Me.gradientColor2History]};if(typeof localStorage<"u"){const t=localStorage.getItem("backgroundSettings");if(t)try{const n=JSON.parse(t);e={...e,...n,isAutoCyclingColor1:n.isAutoCyclingColor1??Me.isAutoCyclingColor1,isAutoCyclingColor2:n.isAutoCyclingColor2??Me.isAutoCyclingColor2},!n.gradientColor1History||n.gradientColor1History.length===0?(e.gradientColor1History=[e.gradientColor1],e.gradientColor1HistoryIndex=0):(e.gradientColor1HistoryIndex=Math.max(0,Math.min(n.gradientColor1HistoryIndex??0,n.gradientColor1History.length-1)),e.gradientColor1=n.gradientColor1History[e.gradientColor1HistoryIndex]),!n.gradientColor2History||n.gradientColor2History.length===0?(e.gradientColor2History=[e.gradientColor2],e.gradientColor2HistoryIndex=0):(e.gradientColor2HistoryIndex=Math.max(0,Math.min(n.gradientColor2HistoryIndex??0,n.gradientColor2History.length-1)),e.gradientColor2=n.gradientColor2History[e.gradientColor2HistoryIndex])}catch(n){return console.error("Failed to parse background settings from localStorage",n),{...Me,gradientColor1History:[...Me.gradientColor1History],gradientColor2History:[...Me.gradientColor2History]}}}return e}const kn=wn(),pe=Rt(kn);typeof localStorage<"u"&&pe.subscribe(e=>{localStorage.setItem("backgroundSettings",JSON.stringify(e))});function wa(e,t,n){let i=[...t];n<i.length-1&&(i=i.slice(0,n+1)),i.push(e),i.length>Ft&&(i=i.slice(i.length-Ft));const a=i.length-1;return{history:i,index:a}}function Yt(e,t,n){let i;typeof e=="string"?i=e:i=`hsl(${Math.round(e)}, ${Math.round(t)}%, ${Math.round(n)}%)`;const a=Se(pe);if(a.gradientColor1===i)return;const{history:r,index:l}=wa(i,a.gradientColor1History,a.gradientColor1HistoryIndex);pe.update(s=>({...s,gradientColor1:i,gradientColor1History:r,gradientColor1HistoryIndex:l}))}function jt(e,t,n){let i;typeof e=="string"?i=e:i=`hsl(${Math.round(e)}, ${Math.round(t)}%, ${Math.round(n)}%)`;const a=Se(pe);if(a.gradientColor2===i)return;const{history:r,index:l}=wa(i,a.gradientColor2History,a.gradientColor2HistoryIndex);pe.update(s=>({...s,gradientColor2:i,gradientColor2History:r,gradientColor2HistoryIndex:l}))}function xn(){pe.set({...Me,gradientColor1History:[...Me.gradientColor1History],gradientColor2History:[...Me.gradientColor2History]})}const Rn={mouseMove:{maxRadius:50,speed:.35,lineWidth:1,initialOpacity:.35,color:"rgb(100, 180, 255)",decayRate:.005},click:{maxRadius:85,speed:.9,lineWidth:2.2,initialOpacity:.95,color:"rgb(190, 230, 255)",decayRate:.008},ambient:{maxRadius:30,speed:.2,lineWidth:1,initialOpacity:.15,color:"rgb(150, 200, 255)",decayRate:.008},longPress:{maxRadius:150,speed:.3,lineWidth:3.5,initialOpacity:.85,color:"rgb(70, 140, 220)",decayRate:.006},glintExpire:{maxRadius:40,speed:.9,lineWidth:1,initialOpacity:.6,color:"rgba(255, 255, 230, 0.7)",decayRate:.02}},Cn=2e3,ka=128,In=16,En=.05,Tn=30,On=400,Dn=10,Wt=.0011,Pn=.003,xa=3e3,bt=2,Gn=15,Ln="rgba(255, 255, 234, 0.95)",Ra=4,Bn=1e3,qt=3,Vt=.15,$n=.3,Kt=.2,zn=.5,Ut=45,Nn=60,it=.6,ot=.6,Zt=1,Fn=2.25,Xn=600,Jt=.05,Hn=.25,Qt=.5,Yn=1.25,ea=.25,jn=.55,Wn=6e4,qn=5e3,Be=[{x1:0,y1:0,x2:1,y2:1},{x1:.5,y1:0,x2:.5,y2:1},{x1:1,y1:0,x2:0,y2:1},{x1:1,y1:.5,x2:0,y2:.5},{x1:1,y1:1,x2:0,y2:0},{x1:.5,y1:1,x2:.5,y2:0},{x1:0,y1:1,x2:1,y2:0},{x1:0,y1:.5,x2:1,y2:.5}],Ca=25e3,Vn=.55,Kn="rgba(235, 245, 255, 0.7)",Un="rgba(210, 230, 245, 0.5)",ta=.5,Zn=1.5,Pe=15,aa=5,Jn=12,na=500,Qn=1e3,ei=.2,Qe=.02,St=.12,ia=.005,Mt=.05,oa=.02,ti=.3,_t=Math.PI/4,ra=25,ai=100,ni=.25,sa=10,ii=Math.PI/3,oi=2,la=30,ri=70,si=.25,kt={plane:{minSpeed:.25,maxSpeed:.5,minSize:25,maxSize:45,baseOpacity:.4,minDuration:1e4,maxDuration:2e4,chancePerInterval:.01},whaleShadow:{minSpeed:.18,maxSpeed:.32,minSize:40,maxSize:70,baseOpacity:.5,minDuration:1200,maxDuration:2500,chancePerInterval:.09}};function li(e){const t=Math.max(0,Math.min(1,e));return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}const et=15,tt=.04;function ci(e,t,n){const i=(e*tt+t*tt*.3+n*.8)*Math.PI*2,a=(e*tt*.7-t*tt+n*.5)*Math.PI*2,r=Math.sin(i)*et*.6+Math.sin(a)*et*.4,l=Math.cos(i)*et*.4+Math.cos(a)*et*.6;return{dx:r,dy:l}}let ca=0,da=0,ua=0,di=0,ga=0,va=0,ui=0,ha=0;const rt=[],st=[],lt=[],Ia=[],ct=[],dt=[],Ea=[],ut=[],Ta=[],Oa=[],Da=[],Pa=[],Ga=[],La=[],Ba=[],gi=()=>rt,ft=()=>st,$a=()=>lt,Et=()=>Ia,Tt=()=>ct,Ot=()=>dt,We=()=>Ea,gt=()=>ut;function vi(e){let t=Ta.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.maxRadius=e.maxRadius,t.opacity=e.opacity,t.speed=e.speed,t.lineWidth=e.lineWidth,t.color=e.color,t.isAmbient=e.isAmbient,t.decayRate=e.decayRate,t.id=ca++):t={...e,id:ca++},rt.push(t)}function hi(e){let t=La.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.currentMaxRadius=e.currentMaxRadius,t.opacity=e.opacity,t.growthSpeed=e.growthSpeed,t.opacitySpeed=e.opacitySpeed,t.color=e.color,t.vx=e.vx,t.vy=e.vy,t.isWave=e.isWave,t.relativeXInSpawn=e.relativeXInSpawn,t.relativeYInSpawn=e.relativeYInSpawn,t.baseVx=e.baseVx,t.baseVy=e.baseVy,t.id=da++):t={...e,id:da++},st.push(t)}function fi(e){let t=Oa.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.opacity=e.opacity,t.decay=e.decay,t.color=e.color,t.id=ua++):t={...e,id:ua++},lt.push(t)}const mi=e=>{Ia.push({...e,id:di++})};function pi(e){let t=Da.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.opacity=e.opacity,t.decay=e.decay,t.color=e.color,t.id=ga++):t={...e,id:ga++},ct.push(t)}function yi(e){let t=Pa.pop();t?(t.type=e.type,t.x=e.x,t.y=e.y,t.vx=e.vx,t.vy=e.vy,t.size=e.size,t.opacity=e.opacity,t.age=0,t.maxAge=e.maxAge,e.type==="whaleShadow"?(t.bodyAngle=e.bodyAngle??0,t.bodyAngleSpeed=e.bodyAngleSpeed,t.bodyAngleAmplitude=e.bodyAngleAmplitude,t.tailAngleOffset=e.tailAngleOffset??0,t.tailOscillationSpeed=e.tailOscillationSpeed,t.tailOscillationAmplitude=e.tailOscillationAmplitude):(delete t.bodyAngle,delete t.bodyAngleSpeed,delete t.bodyAngleAmplitude,delete t.tailAngleOffset,delete t.tailOscillationSpeed,delete t.tailOscillationAmplitude),t.id=va++):t={...e,age:0,id:va++},dt.push(t)}const bi=e=>{Ea.push({...e,id:ui++})};function Si(e){let t=Ga.pop();t?(t.anchorX=e.anchorX,t.anchorY=e.anchorY,t.particles=[],t.vx=e.vx,t.vy=e.vy,t.opacity=0,t.age=0,t.maxAge=e.maxAge,t.color=e.color,t.id=ha++):t={...e,particles:[],opacity:0,age:0,id:ha++},ut.push(t)}function Mi(e,t){let n=Ba.pop();n?(n.x=t.x,n.y=t.y,n.size=t.size,n.opacity=0,n.initialRelativeX=t.initialRelativeX,n.initialRelativeY=t.initialRelativeY,n.appearAtAge=t.appearAtAge,n.maxOpacity=t.maxOpacity,n.particleAge=0,n.particleMaxAge=t.particleMaxAge):n={...t,opacity:0,particleAge:0},e.particles.push(n)}function _i(e){const t=rt.findIndex(n=>n.id===e.id);if(t!==-1){const n=rt.splice(t,1)[0];n&&Ta.push(n)}else console.warn(`Attempted to release ripple with ID ${e.id} not found in active list.`)}function Ai(){if(st.length>0){const e=st.shift();if(e)return La.push(e),e}return null}function wi(e){const t=lt.findIndex(n=>n.id===e.id);if(t!==-1){const n=lt.splice(t,1)[0];n&&Oa.push(n)}else console.warn(`Attempted to release glint with ID ${e.id} not found in active list.`)}function ki(e){const t=ct.findIndex(n=>n.id===e.id);if(t!==-1){const n=ct.splice(t,1)[0];n&&Da.push(n)}else console.warn(`Attempted to release sunGlint with ID ${e.id} not found in active list.`)}function xi(e){const t=dt.findIndex(n=>n.id===e.id);if(t!==-1){const n=dt.splice(t,1)[0];n&&Pa.push(n)}else console.warn(`Attempted to release rareSighting with ID ${e.id} not found in active list.`)}function za(e){Ba.push(e)}function xt(e){const t=ut.findIndex(n=>n.id===e.id);if(t!==-1){const n=ut.splice(t,1)[0];if(n){for(const i of n.particles)za(i);n.particles=[],Ga.push(n)}}else console.warn(`Attempted to release foamStreak with ID ${e.id} not found in active list.`)}function Ye(e,t,n){const i=Rn[n];if(!i)throw console.error(`Unknown ripple type: ${n}. Ensure it is defined in RIPPLE_CONFIG.`),new Error(`Unknown ripple type: ${n}`);let a=i.speed,r=i.maxRadius;(n==="mouseMove"||n==="click")&&(a=i.speed*(.9+Math.random()*.2),r=i.maxRadius*(.9+Math.random()*.2)),vi({x:e,y:t,radius:0,maxRadius:r,opacity:i.initialOpacity,speed:a,lineWidth:i.lineWidth,color:i.color,isAmbient:n==="ambient",decayRate:i.decayRate})}function Ri(e){const t=e.globalAlpha,n=gi();for(let i=n.length-1;i>=0;i--){const a=n[i];if(a.radius+=a.speed,a.opacity-=a.decayRate,a.opacity<=0||a.radius>=a.maxRadius){_i(a);continue}e.beginPath(),e.arc(a.x,a.y,a.radius,0,Math.PI*2),e.lineWidth=a.lineWidth,e.strokeStyle=a.color,e.globalAlpha=Math.max(0,a.opacity),e.stroke()}e.globalAlpha=t}function fa(e,t,n){ft().length>=ka&&Ai();let i,a,r,l,s,g,v,u=1;const m=e*(1-it)/2,A=e*it,d=t*(1-ot)/2,c=t*ot,k=m+Math.random()*A,w=d+Math.random()*c;n?(i=Math.min(e,t)/2*(.8+Math.random()*.4),u=Kt+Math.random()*(zn-Kt),a=(Math.random()-.5)*.2*u,r=(Math.random()-.5)*.2*u,l=Vt+Math.random()*($n-Vt),s=(Math.random()*.015+.005)*(Math.random()<.5?1:-1)*u,g=(Math.random()*15e-5+5e-5)*(Math.random()<.5?1:-1)*u,v=`hsl(210, ${68+Math.random()*10}%, ${Ut+Math.random()*(Nn-Ut)}%)`):(i=Math.random()*80+40,a=(Math.random()-.5)*.12,r=(Math.random()-.5)*.12,l=Math.random()*.03+.01,s=(Math.random()*.02+.01)*(Math.random()<.5?1:-1),g=(Math.random()*2e-4+1e-4)*(Math.random()<.5?1:-1),v=`hsl(${200+Math.random()*20}, ${65+Math.random()*20}%, ${35+Math.random()*30}%)`),hi({x:k,y:w,radius:Math.random()*i*.3+i*.2,currentMaxRadius:i,opacity:l,growthSpeed:s,opacitySpeed:g,color:v,vx:a,vy:r,isWave:n,relativeXInSpawn:A>0?(k-m)/A:.5,relativeYInSpawn:c>0?(w-d)/c:.5,baseVx:a,baseVy:r})}function Ci(e,t,n,i){const a=ft();if(a.length===0)return;const r=e.globalCompositeOperation;e.globalCompositeOperation="screen";for(let l=a.length-1;l>=0;l--){const s=a[l];s.x+=s.vx,s.y+=s.vy,s.radius+=s.growthSpeed,s.opacity+=s.opacitySpeed,(s.opacity>.06||s.opacity<.005)&&(s.opacitySpeed*=-1,s.opacity=Math.max(.005,Math.min(.06,s.opacity))),(s.radius>s.currentMaxRadius||s.radius<s.currentMaxRadius*.2)&&(s.growthSpeed*=-1,s.radius=Math.max(10,Math.min(s.currentMaxRadius,s.radius))),(s.x-s.radius<0||s.x+s.radius>t)&&(s.vx*=-1,s.x=Math.max(s.radius,Math.min(t-s.radius,s.x))),(s.y-s.radius<0||s.y+s.radius>n)&&(s.vy*=-1,s.y=Math.max(s.radius,Math.min(n-s.radius,s.y)));const g=ci(s.x,s.y,i),v=s.x+g.dx,u=s.y+g.dy,m=e.createRadialGradient(v,u,0,v,u,s.radius),A=s.color.substring(0,s.color.lastIndexOf(")"));m.addColorStop(0,`${A}, ${s.opacity})`),m.addColorStop(.7,`${A}, ${s.opacity*.5})`),m.addColorStop(1,`${A}, 0)`),e.fillStyle=m,e.beginPath(),e.arc(v,u,s.radius,0,Math.PI*2),e.fill()}e.globalCompositeOperation=r}function Ii(e,t){const n=ft();if(n.length===0)return;const i=e*(1-it)/2,a=e*it,r=t*(1-ot)/2,l=t*ot,s=i+a/2,g=r+l/2,v=Math.sqrt(Math.pow(a/2,2)+Math.pow(l/2,2))+.001;for(const u of n){const m=u.relativeXInSpawn!==void 0?u.relativeXInSpawn:Math.random(),A=u.relativeYInSpawn!==void 0?u.relativeYInSpawn:Math.random();if(u.x=i+m*a,u.y=r+A*l,u.baseVx!==void 0&&u.baseVy!==void 0){const d=Math.sqrt(Math.pow(u.x-s,2)+Math.pow(u.y-g,2)),c=Math.min(1,d/v),k=Zt+c*(Fn-Zt);u.vx=u.baseVx*k,u.vy=u.baseVy*k}if(u.isWave){const d=Math.min(e,t)/2*(.8+Math.random()*.4);u.currentMaxRadius=d,u.radius=Math.random()*d*.3+d*.2}}}const ma=[[0,0],[0,1],[0,2],[1,0],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[1,2],[2,0],[2,1],[2,2]];function Na(e,t){const n=ma[Math.floor(Math.random()*ma.length)],i=n[0],a=n[1],r=e/3,l=t/3,s=a*r+Math.random()*r,g=i*l+Math.random()*l;return{x:s,y:g}}function Ei(e,t,n){if(Tt().length>=xa)return;const i=Math.random()*Math.PI*2,a=Math.random()*n*.5;pi({x:e+Math.cos(i)*a,y:t+Math.sin(i)*a,radius:Math.random()*.6+.4,opacity:Math.random()*.3+.7,decay:Math.random()*.008+.002,color:Ln})}function Ti(e,t){const n=Math.min(e,t),{x:i,y:a}=Na(e,t);mi({x:i,y:a,baseRadius:n*.45,radiusAmplitude:n*.12,currentRadius:n*.45,baseOpacity:.35,opacityAmplitude:.3,currentOpacity:.35,pulseAngle:Math.random()*Math.PI*2,pulseSpeed:Wt+Math.random()*(Pn-Wt),vx:0,vy:0,relativeX:i/e,relativeY:a/t})}function Oi(e){const t=Tt();if(t.length===0)return;const n=e.globalAlpha;for(let i=t.length-1;i>=0;i--){const a=t[i];a.x+=(Math.random()-.5)*.5,a.y+=(Math.random()-.5)*.5,a.opacity-=a.decay,a.radius+=.005,a.opacity<=0?ki(a):(e.beginPath(),e.arc(a.x,a.y,a.radius,0,Math.PI*2),e.fillStyle=a.color,e.globalAlpha=Math.max(0,a.opacity),e.fill())}e.globalAlpha=n}function Di(e){const t=Et();if(t.length===0)return;const n=e.globalCompositeOperation;e.globalCompositeOperation="lighter";const i=e.globalAlpha;for(let a=0;a<t.length;a++){const r=t[a];r.pulseAngle+=r.pulseSpeed,r.currentRadius=r.baseRadius+Math.sin(r.pulseAngle)*r.radiusAmplitude,r.currentOpacity=r.baseOpacity+(Math.sin(r.pulseAngle*.7+Math.PI/3)*.5+.5)*r.opacityAmplitude,r.currentOpacity=Math.max(0,Math.min(1,r.currentOpacity));const l=r.baseOpacity+r.opacityAmplitude,s=l>0?Math.max(0,r.currentOpacity/l):0,g=l>0?r.baseOpacity/l:0;let v=0;if(s>0)if(s<=g){const m=g>0?s/g:0;v=Math.round(m*bt)}else{const m=1-g,A=m>0?(s-g)/m:1;v=Math.round(bt+A*(Gn-bt))}v=Math.max(0,v);for(let m=0;m<v&&(Ei(r.x,r.y,r.currentRadius),!(Tt().length>=xa));m++);const u=e.createRadialGradient(r.x,r.y,0,r.x,r.y,r.currentRadius);u.addColorStop(0,`rgba(255, 250, 220, ${r.currentOpacity})`),u.addColorStop(.25,`rgba(255, 235, 180, ${r.currentOpacity*.8})`),u.addColorStop(.6,`rgba(255, 220, 150, ${r.currentOpacity*.4})`),u.addColorStop(1,"rgba(255, 210, 130, 0)"),e.fillStyle=u,e.globalAlpha=1,e.beginPath(),e.arc(r.x,r.y,r.currentRadius,0,Math.PI*2),e.fill()}e.globalCompositeOperation=n,e.globalAlpha=i}function Pi(e,t){const n=Et();if(n.length===0)return;const i=Math.min(e,t);for(const a of n){if(a.relativeX!==void 0&&a.relativeY!==void 0)a.x=a.relativeX*e,a.y=a.relativeY*t;else{console.warn("SunGlow missing relative coordinates during resize. Recalculating position.");const{x:r,y:l}=Na(e,t);a.x=r,a.y=l,a.relativeX=r/e,a.relativeY=l/t}a.baseRadius=i*.45,a.radiusAmplitude=i*.12}}function Gi(e,t){$a().length>=In||fi({x:Math.random()*e,y:Math.random()*t,radius:Math.random()*.25+.2,opacity:Math.random()*.4+.2,decay:Math.random()*.005+.005,color:"rgba(255, 255, 230, 0.85)"})}function Li(e){const t=$a();if(t.length===0)return[];const n=[],i=e.globalAlpha;for(let a=t.length-1;a>=0;a--){const r=t[a];r.opacity-=r.decay,r.opacity<=0?(n.push({x:r.x,y:r.y}),wi(r)):(e.beginPath(),e.arc(r.x,r.y,r.radius,0,Math.PI*2),e.fillStyle=r.color,e.globalAlpha=Math.max(0,r.opacity),e.fill())}return e.globalAlpha=i,n}function Bi(e,t){e.fillRect(t.x-t.size/2,t.y-t.size/8,t.size,t.size/4),e.fillRect(t.x-t.size/6,t.y-t.size/3,t.size/3,t.size*.8)}function $i(e,t){t.bodyAngleSpeed&&t.bodyAngleAmplitude&&(t.bodyAngle=Math.sin(t.age*t.bodyAngleSpeed)*t.bodyAngleAmplitude),t.tailOscillationSpeed&&t.tailOscillationAmplitude&&(t.tailAngleOffset=Math.sin(t.age*t.tailOscillationSpeed)*t.tailOscillationAmplitude);const a=t.size*(1+Math.sin(t.age*.02)*.05),r=a/3.5,l=r*.9,s=a*.3;e.save(),e.translate(t.x,t.y),e.rotate(t.bodyAngle||0),e.beginPath(),e.ellipse(0,0,a/2,r/2,0,0,Math.PI*2),e.fill();const g=-a/2*.85,v=0;e.save(),e.translate(g,v),e.rotate(t.tailAngleOffset||0),e.beginPath(),e.ellipse(0,0,s/2,l/2,0,0,Math.PI*2),e.fill(),e.restore(),e.restore()}function zi(e,t,n){if(Ot().length>=Ra)return;const i=n,a=kt[i];if(!a){console.warn(`Configuration not found for rare sighting type: ${i}`);return}let r,l,s,g;const v=a.minSpeed+Math.random()*(a.maxSpeed-a.minSpeed);switch(i){case"plane":r=Math.random()<.5?-a.maxSize:e+a.maxSize,l=Math.random()*t*.3,s=(r<0?1:-1)*v,g=(Math.random()-.5)*v*.3;break;case"whaleShadow":r=Math.random()<.5?-a.maxSize*1.5:e+a.maxSize*1.5,l=t*(.5+Math.random()*.4),s=(r<0?1:-1)*v,g=(Math.random()-.5)*v*.1;break;default:console.warn(`Unhandled rare sighting type for creation: ${i}`);return}const u={type:i,x:r,y:l,vx:s,vy:g,size:a.minSize+Math.random()*(a.maxSize-a.minSize),opacity:a.baseOpacity,age:0,maxAge:a.minDuration+Math.random()*(a.maxDuration-a.minDuration),...i==="whaleShadow"?{bodyAngle:0,bodyAngleSpeed:(Math.random()*.003+.002)*(Math.random()<.5?1:-1),bodyAngleAmplitude:Math.PI/36,tailAngleOffset:0,tailOscillationSpeed:Math.random()*.04+.03,tailOscillationAmplitude:Math.PI/10}:{}};yi(u)}function Ni(e,t,n){const i=Ot();if(i.length===0)return;const a=e.globalAlpha;for(let r=i.length-1;r>=0;r--){const l=i[r];l.age++,l.x+=l.vx,l.y+=l.vy;const s=l.size*2,g=l.age>l.maxAge,v=l.x<-s||l.x>t+s||l.y<-s||l.y>n+s;if(g||v){xi(l);continue}let u=l.opacity;const m=.8;if(l.age/l.maxAge>m){const A=(l.age/l.maxAge-m)/(1-m);u=l.opacity*(1-A)}switch(u=Math.max(0,u),e.globalAlpha=u,e.fillStyle=`rgba(10, 10, 20, ${u*.7})`,l.type){case"plane":Bi(e,l);break;case"whaleShadow":$i(e,l);break;default:console.warn(`No drawing function implemented for rare sighting type: ${l.type}`)}}e.globalAlpha=a}function Fi(e,t){if(We().length>0){console.warn("Attempted to re-initialize water grains. Skipping.");return}for(let n=0;n<Xn;n++){const i=Jt+Math.random()*(Hn-Jt),a=Math.random()*Math.PI*2,r=20+Math.random()*10,l=Math.random()*e,s=Math.random()*t;bi({x:l,y:s,vx:Math.cos(a)*i,vy:Math.sin(a)*i,size:Qt+Math.random()*(Yn-Qt),opacity:ea+Math.random()*(jn-ea),color:`hsl(210, ${65+Math.random()*10}%, ${r}%)`,relativeX:e>0?l/e:.5,relativeY:t>0?s/t:.5})}console.log(`Initialized ${We().length} water grains.`)}function Xi(e,t,n){const i=We();if(i.length===0)return;const a=e.globalAlpha;for(const r of i)r.x+=r.vx,r.y+=r.vy,r.x<-r.size?r.x=t+r.size:r.x>t+r.size&&(r.x=-r.size),r.y<-r.size?r.y=n+r.size:r.y>n+r.size&&(r.y=-r.size),e.beginPath(),e.arc(r.x,r.y,r.size,0,Math.PI*2),e.fillStyle=r.color,e.globalAlpha=Math.max(0,r.opacity*a),e.fill();e.globalAlpha=a}function Hi(e,t){const n=We();if(n.length!==0)for(const i of n)i.relativeX!==void 0&&i.relativeY!==void 0?(i.x=i.relativeX*e,i.y=i.relativeY*t):(console.warn("WaterGrain missing relative coordinates during resize. Re-randomizing position."),i.x=Math.random()*e,i.y=Math.random()*t,i.relativeX=e>0?i.x/e:.5,i.relativeY=t>0?i.y/t:.5)}function Yi(e,t){if(gt().length>=Ca)return;const n=Math.floor(Math.random()*3);let i,a,r,l,s;n===0?(i=Math.random()*e,a=-Pe,r=(Math.random()-.5)*St*.5,l=ia+Math.random()*(Mt-ia),s=Math.PI/2+(Math.random()-.5)*(Math.PI/6)):n===1?(i=-Pe,a=Math.random()*t,r=Qe+Math.random()*(St-Qe),l=(Math.random()-.5)*Mt*.4,s=(Math.random()-.5)*(Math.PI/4)):(i=e+Pe,a=Math.random()*t,r=-(Qe+Math.random()*(St-Qe)),l=(Math.random()-.5)*Mt*.4,s=Math.PI+(Math.random()-.5)*(Math.PI/4));let g=0;const v=(d,c,k,w,C,S)=>{let Y=c,I=k,x=w;for(let G=0;G<C;G++){const B=aa+Math.random()*(Jn-aa);if(x+=(Math.random()-.5)*2*_t,S){const P=(x-w+Math.PI*3)%(Math.PI*2)-Math.PI;Math.abs(P)>_t*1.5&&(x=w+Math.sign(P)*_t*1.5)}else n===0?x=Math.max(Math.PI/4,Math.min(3*Math.PI/4,x)):n===1?x=Math.max(-Math.PI/3,Math.min(Math.PI/3,x)):x=Math.max(2*Math.PI/3,Math.min(4*Math.PI/3,x));const E=Y+Math.cos(x)*B,L=I+Math.sin(x)*B;for(let P=0;P<oi;P++){const $=ta+Math.random()*(Zn-ta),j=x+Math.PI/2,h=(Math.random()-.5)*Pe*.8,K=Y+Math.cos(j)*h,N=I+Math.sin(j)*h;Mi(d,{x:K,y:N,initialRelativeX:K,initialRelativeY:N,size:$,opacity:0,appearAtAge:g++*ti,maxOpacity:.5+Math.random()*.4,particleAge:0,particleMaxAge:la+Math.random()*(ri-la)})}if(Y=E,I=L,!S&&Math.random()<ni&&G<C-sa/2&&G>2){const P=(Math.random()<.5?-1:1)*ii*(.7+Math.random()*.6),$=Math.floor(sa*(.5+Math.random()*.5));v(d,Y,I,x+P,$,!0)}}},u=ra+Math.floor(Math.random()*(ai-ra+1));v(0,0,s,u,!1);const m={anchorX:i,anchorY:a,particles:[],vx:r,vy:l,opacity:0,age:0,maxAge:na+Math.random()*(Qn-na),color:Math.random()<.6?Kn:Un};Si(m);const A=gt().find(d=>d.anchorX===i&&d.anchorY===a&&d.age===0);if(A){if(v(A,0,0,s,u,!1),A.particles.length<5){xt(A);return}}else console.warn("Could not find newly added streak to generate particles into.")}function ji(e,t,n){const i=gt();if(i.length===0)return;const a=e.globalAlpha,r=e.globalCompositeOperation;e.globalCompositeOperation="lighter";for(let l=i.length-1;l>=0;l--){const s=i[l];s.age++,s.anchorX+=s.vx,s.anchorY+=s.vy;const g=s.maxAge*ei;if(s.age<g?s.opacity=s.age/g:s.age>s.maxAge-g?s.opacity=1-(s.age-(s.maxAge-g))/g:s.opacity=1,s.opacity=Math.max(0,Math.min(1,s.opacity)),s.opacity<=0&&s.age>g){xt(s);continue}let v=!0;const u=Pe*5,m=Pe*5;if(s.anchorX>-u&&s.anchorX<t+u&&s.anchorY>-m&&s.anchorY<n+m)v=!1;else{v=!0;for(const A of s.particles){const d=s.anchorX+A.x,c=s.anchorY+A.y;if(d>-A.size&&d<t+A.size&&c>-A.size&&c<n+A.size){v=!1;break}}}if(v&&s.age>g*2){xt(s);continue}e.fillStyle=s.color;for(let A=s.particles.length-1;A>=0;A--){const d=s.particles[A];if(s.age<d.appearAtAge)continue;if(d.particleAge++,d.particleAge>d.particleMaxAge){d.opacity=0,za(d),s.particles.splice(A,1);continue}else{const x=d.particleMaxAge*si;d.particleAge<x?d.opacity=d.particleAge/x*d.maxOpacity:d.particleAge>d.particleMaxAge-x?d.opacity=(1-(d.particleAge-(d.particleMaxAge-x))/x)*d.maxOpacity:d.opacity=d.maxOpacity,d.opacity=Math.max(0,Math.min(d.maxOpacity,d.opacity))}if(d.opacity<=.001)continue;d.x+=(Math.random()-.5)*oa,d.y+=(Math.random()-.5)*oa;const c=d.x-d.initialRelativeX,k=d.y-d.initialRelativeY,w=c*c+k*k,C=Pe*.5;if(w>C*C){const x=Math.sqrt(w);d.x=d.initialRelativeX+c/x*C,d.y=d.initialRelativeY+k/x*C}const S=s.anchorX+d.x,Y=s.anchorY+d.y,I=s.opacity*d.opacity;I<=.001||(e.globalAlpha=I*a,e.beginPath(),e.arc(S,Y,d.size,0,Math.PI*2),e.fill())}}e.globalCompositeOperation=r,e.globalAlpha=a}var Wi=J('<canvas class="pointer-events-none fixed top-0 left-0 -z-10 h-full w-full svelte-1mnusik"></canvas>');function qi(e,t){Te(t,!1);let n=Bt(t,"gradientColor1",8,"hsl(210, 70%, 50%)"),i=Bt(t,"gradientColor2",8,"hsl(200, 68%, 50%)"),a=T(),r,l=0,s=0,g=0,v=1,u=0,m={...Be[0]},A=0;Ct(()=>{const c=o(a);if(!c){console.error("Canvas not available onMount");return}const k=c.getContext("2d");if(!k){console.error("Context not available onMount");return}$(),console.log(`[onMount after initial resize] Canvas: ${c.width}x${c.height}`);let w=0,C=0,S=null,Y,I=!1,x=0;function G(){const h=Date.now();if(u===0&&(u=h,A=h,g=(s+1)%Be.length,v=0),h-u>=Wn&&v>=1&&(s=g,g=(s+1)%Be.length,v=0,u=h,A=h),v<1){const K=h-A;v=Math.min(1,K/qn);const N=li(v),q=Be[s],ae=Be[g];m.x1=q.x1+(ae.x1-q.x1)*N,m.y1=q.y1+(ae.y1-q.y1)*N,m.x2=q.x2+(ae.x2-q.x2)*N,m.y2=q.y2+(ae.y2-q.y2)*N}else m={...Be[g]},s=g}const B=h=>{if(S){if(!I){const N=h.pageX-S.x,q=h.pageY-S.y;Math.sqrt(N*N+q*q)>Dn&&(I=!0)}const K=Date.now();K-w>Tn&&(Ye(h.pageX,h.pageY,"mouseMove"),w=K)}},E=h=>{C=Date.now(),S={x:h.pageX,y:h.pageY},I=!1},L=h=>{if(!S||C===0)return;const K=Date.now()-C;I||(K>=On?Ye(h.pageX,h.pageY,"longPress"):Ye(h.pageX,h.pageY,"mouseMove")),S=null,C=0,I=!1},P=()=>{c&&Ye(Math.random()*c.width,Math.random()*c.height,"ambient")};function $(){c&&(c.width=window.innerWidth,c.height=window.innerHeight,console.log(`[resizeCanvas] Canvas: ${c.width}x${c.height}`),Ii(c.width,c.height),Pi(c.width,c.height),Hi(c.width,c.height))}if(window.addEventListener("resize",$),window.addEventListener("mousemove",B),window.addEventListener("mousedown",E),window.addEventListener("mouseup",L),typeof window<"u"&&(Y=window.setInterval(P,Cn)),c){for(let h=0;h<ka-qt;h++)fa(c.width,c.height,!1);for(let h=0;h<qt;h++)fa(c.width,c.height,!0);Ti(c.width,c.height),Fi(c.width,c.height)}console.log(`[onMount End] Canvas: ${c.width}x${c.height}, ShimmerSpots: ${ft().length}, Grains: ${We().length}, SunGlows: ${Et().length}`);function j(){if(!k||!c){r=requestAnimationFrame(j);return}l+=.002,G();const h=m.x1*c.width,K=m.y1*c.height,N=m.x2*c.width,q=m.y2*c.height,ae=k.createLinearGradient(h,K,N,q),ee=typeof n()=="string"&&n().includes("hsl")?n():"hsl(210, 70%, 50%)",ne=typeof i()=="string"&&i().includes("hsl")?i():"hsl(200, 68%, 50%)";if(ae.addColorStop(0,ee),ae.addColorStop(1,ne),k.fillStyle=ae,k.fillRect(0,0,c.width,c.height),Ri(k),Ci(k,c.width,c.height,l),Xi(k,c.width,c.height),Di(k),Oi(k),x+=16.67,x>=Bn){for(const se in kt){const ue=se,ge=kt[ue];typeof ge.chancePerInterval=="number"&&Math.random()<ge.chancePerInterval&&Ot().length<Ra&&zi(c.width,c.height,ue)}x=0}Ni(k,c.width,c.height),Math.random()<En&&Gi(c.width,c.height),Li(k).forEach(se=>Ye(se.x,se.y,"glintExpire")),Math.random()<Vn&&gt().length<Ca&&Yi(c.width,c.height),ji(k,c.width,c.height),r=requestAnimationFrame(j)}return j(),()=>{window.removeEventListener("resize",$),window.removeEventListener("mousemove",B),window.removeEventListener("mousedown",E),window.removeEventListener("mouseup",L),Y&&clearInterval(Y),r&&cancelAnimationFrame(r)}}),Ee();var d=Wi();je(d,c=>M(a,c),()=>o(a)),Z(e,d),Oe()}var Vi=J('<div class="professional-hsl-picker svelte-1bvbq9v"><div class="picker-header svelte-1bvbq9v"><div class="control-buttons svelte-1bvbq9v"><button title="Sync both gradients">ð</button> <button title="Lock current selection">ð</button> <button class="control-btn reset-btn svelte-1bvbq9v" title="Reset to defaults">âº</button></div></div> <div class="slider-section svelte-1bvbq9v"><div class="slider-label svelte-1bvbq9v">Hue (0Â° - 360Â°)</div> <div class="slider-container svelte-1bvbq9v"><canvas class="color-slider svelte-1bvbq9v"></canvas></div></div> <div class="slider-section svelte-1bvbq9v"><div class="slider-label svelte-1bvbq9v">Saturation (0% - 100%)</div> <div class="slider-container svelte-1bvbq9v"><canvas class="color-slider svelte-1bvbq9v"></canvas></div></div> <div class="slider-section svelte-1bvbq9v"><div class="slider-label svelte-1bvbq9v">Lightness (0% - 100%)</div> <div class="slider-container svelte-1bvbq9v"><canvas class="color-slider svelte-1bvbq9v"></canvas></div></div> <div class="color-preview svelte-1bvbq9v"><div class="preview-item svelte-1bvbq9v"><div class="preview-swatch svelte-1bvbq9v"></div> <span class="preview-label svelte-1bvbq9v"> </span></div> <div class="preview-item svelte-1bvbq9v"><div class="preview-swatch svelte-1bvbq9v"></div> <span class="preview-label svelte-1bvbq9v"> </span></div></div> <div class="instructions svelte-1bvbq9v"><p>Click: Set Gradient 1 â¢ Drag indicators to move</p></div></div>');function Ki(e,t){Te(t,!1);const n=T(),i=T();let a=T(),r=T(),l=T(),s,g=T(null),v=T(null),u=T(null),m=T(!1),A=T(!1),d=!1,c=null,k=null;const w=320,C=40,S=16;let Y=0,I={x:0,targetX:0,scale:1,opacity:.9},x={x:0,targetX:0,scale:1,opacity:.9},G={x:0,targetX:0,scale:1,opacity:.9},B={x:0,targetX:0,scale:1,opacity:.9},E={x:0,targetX:0,scale:1,opacity:.9},L={x:0,targetX:0,scale:1,opacity:.9},P;function $(){I.targetX=S+o(n).h/360*(w-2*S),x.targetX=S+o(i).h/360*(w-2*S),I.x=I.targetX,x.x=x.targetX,G.targetX=S+o(n).s/100*(w-2*S),B.targetX=S+o(i).s/100*(w-2*S),G.x=G.targetX,B.x=B.targetX,E.targetX=S+o(n).l/100*(w-2*S),L.targetX=S+o(i).l/100*(w-2*S),E.x=E.targetX,L.x=L.targetX}function j(f,_){const R=Math.max(0,Math.min(1,(f-S)/(w-2*S)));switch(_){case"hue":return R*360;case"saturation":return R*100;case"lightness":return R*100}}function h(){if(!o(g)||!o(v)||!o(u)){s=requestAnimationFrame(h);return}Y+=.016,d||(I.x+=(I.targetX-I.x)*.15,x.x+=(x.targetX-x.x)*.15,G.x+=(G.targetX-G.x)*.15,B.x+=(B.targetX-B.x)*.15,E.x+=(E.targetX-E.x)*.15,L.x+=(L.targetX-L.x)*.15),[I,x,G,B,E,L].forEach((_,R)=>{const F=R%2+1;c===F&&(k==="hue"&&R<2||k==="saturation"&&R>=2&&R<4||k==="lightness"&&R>=4)?(_.scale=1+.2*Math.sin(Y*8),_.opacity=.95):(_.scale+=(1-_.scale)*.1,_.opacity+=(.9-_.opacity)*.1)}),K(),s=requestAnimationFrame(h)}function K(){N(),q(),ae()}function N(){if(!o(g))return;o(g).clearRect(0,0,w,C);const f=o(g).createLinearGradient(S,0,w-S,0);for(let _=0;_<=12;_++){const R=_/12*360;f.addColorStop(_/12,`hsl(${R}, 70%, 50%)`)}le(g,o(g).fillStyle=f),ne(o(g),S,8,w-2*S,C-16,8),o(g).fill(),le(g,o(g).strokeStyle="rgba(255, 255, 255, 0.2)"),le(g,o(g).lineWidth=1),ne(o(g),S,8,w-2*S,C-16,8),o(g).stroke(),ee(o(g),I,"#3B82F6","1"),ee(o(g),x,"#EC4899","2")}function q(){if(!o(v))return;o(v).clearRect(0,0,w,C);const f=(o(n).h+o(i).h)/2,_=o(v).createLinearGradient(S,0,w-S,0);_.addColorStop(0,`hsl(${f}, 0%, 50%)`),_.addColorStop(1,`hsl(${f}, 100%, 50%)`),le(v,o(v).fillStyle=_),ne(o(v),S,8,w-2*S,C-16,8),o(v).fill(),le(v,o(v).strokeStyle="rgba(255, 255, 255, 0.2)"),le(v,o(v).lineWidth=1),ne(o(v),S,8,w-2*S,C-16,8),o(v).stroke(),ee(o(v),G,"#3B82F6","1"),ee(o(v),B,"#EC4899","2")}function ae(){if(!o(u))return;o(u).clearRect(0,0,w,C);const f=(o(n).h+o(i).h)/2,_=(o(n).s+o(i).s)/2,R=o(u).createLinearGradient(S,0,w-S,0);R.addColorStop(0,`hsl(${f}, ${_}%, 0%)`),R.addColorStop(.25,`hsl(${f}, ${_}%, 25%)`),R.addColorStop(.5,`hsl(${f}, ${_}%, 50%)`),R.addColorStop(.75,`hsl(${f}, ${_}%, 75%)`),R.addColorStop(1,`hsl(${f}, ${_}%, 100%)`),le(u,o(u).fillStyle=R),ne(o(u),S,8,w-2*S,C-16,8),o(u).fill(),le(u,o(u).strokeStyle="rgba(255, 255, 255, 0.2)"),le(u,o(u).lineWidth=1),ne(o(u),S,8,w-2*S,C-16,8),o(u).stroke(),ee(o(u),E,"#3B82F6","1"),ee(o(u),L,"#EC4899","2")}function ee(f,_,R,F){const X=_.x,H=C/2,W=_.scale,De=_.opacity;f.save(),f.globalAlpha=De;const Xe=f.createRadialGradient(X,H,0,X,H,20*W);Xe.addColorStop(0,R+"40"),Xe.addColorStop(1,R+"00"),f.fillStyle=Xe,f.fillRect(X-20*W,H-20*W,40*W,40*W),f.beginPath(),f.arc(X,H,10*W,0,Math.PI*2),f.fillStyle=R,f.fill(),f.strokeStyle="rgba(255, 255, 255, 0.9)",f.lineWidth=2,f.stroke(),f.beginPath(),f.arc(X,H,6*W,0,Math.PI*2),f.fillStyle="rgba(255, 255, 255, 0.3)",f.fill(),f.fillStyle="white",f.font=`bold ${8*W}px system-ui`,f.textAlign="center",f.textBaseline="middle",f.fillText(F,X,H),f.restore()}function ne(f,_,R,F,X,H){f.beginPath(),f.moveTo(_+H,R),f.lineTo(_+F-H,R),f.quadraticCurveTo(_+F,R,_+F,R+H),f.lineTo(_+F,R+X-H),f.quadraticCurveTo(_+F,R+X,_+F-H,R+X),f.lineTo(_+H,R+X),f.quadraticCurveTo(_,R+X,_,R+X-H),f.lineTo(_,R+H),f.quadraticCurveTo(_,R,_+H,R),f.closePath()}function te(f,_){let R,F,X;switch(_){case"hue":R=o(a),F=I,X=x;break;case"saturation":R=o(r),F=G,X=B;break;case"lightness":R=o(l),F=E,X=L;break;default:return}if(!R)return;const H=R.getBoundingClientRect(),W=f.clientX-H.left,De=Math.abs(W-F.x),Xe=Math.abs(W-X.x);if(De<20)d=!0,c=1,k=_,f.preventDefault();else if(Xe<20)d=!0,c=2,k=_,f.preventDefault();else{const Ha=j(W,_);ue(_,Ha,1)}}function ye(f){if(!d||!k||!c)return;let _,R,F;switch(k){case"hue":_=o(a),R=I,F=x;break;case"saturation":_=o(r),R=G,F=B;break;case"lightness":_=o(l),R=E,F=L;break;default:return}if(!_)return;const X=_.getBoundingClientRect(),H=f.clientX-X.left,W=Math.max(S,Math.min(w-S,H));c===1?(R.targetX=W,R.x=W):(F.targetX=W,F.x=W);const De=j(W,k);ue(k,De,c)}function se(){d=!1,c=null,k=null}function ue(f,_,R){const F=R===1?o(n):o(i);if(!F)return;let X=F.h,H=F.s,W=F.l;switch(f){case"hue":X=_;break;case"saturation":H=_;break;case"lightness":W=_;break}R===1?(Yt(X,H,W),M(n,{h:X,s:H,l:W})):(jt(X,H,W),M(i,{h:X,s:H,l:W}))}function ge(){M(A,!o(A))}function ve(){M(m,!o(m))}function _e(){Yt(210,70,50),jt(200,68,50)}Ct(()=>{if(!(!o(a)||!o(r)||!o(l))&&(M(g,o(a).getContext("2d")),M(v,o(r).getContext("2d")),M(u,o(l).getContext("2d")),!(!o(g)||!o(v)||!o(u))))return le(a,o(a).width=w),le(a,o(a).height=C),le(r,o(r).width=w),le(r,o(r).height=C),le(l,o(l).width=w),le(l,o(l).height=C),$(),h(),document.addEventListener("mousemove",ye),document.addEventListener("mouseup",se),P=pe.subscribe(f=>{(f.gradientColor1||f.gradientColor2)&&$()}),()=>{s&&cancelAnimationFrame(s),document.removeEventListener("mousemove",ye),document.removeEventListener("mouseup",se),P&&P()}}),tn(()=>{s&&cancelAnimationFrame(s)}),Re(()=>Xt,()=>{M(n,Xt()||{h:210,s:70,l:50})}),Re(()=>Ht,()=>{M(i,Ht()||{h:200,s:68,l:50})}),Re(()=>(o(n),o(i),o(g),o(v),o(u)),()=>{o(n)&&o(i)&&typeof o(n).h=="number"&&typeof o(i).h=="number"&&($(),o(g)&&o(v)&&o(u)&&K())}),vt(),Ee();var Ae=Vi(),U=y(Ae),Ce=y(U),Ge=y(Ce);let qe;var Le=p(Ge,2);let Ve;var Ke=p(Le,2);b(Ce),b(U);var $e=p(U,2),ze=p(y($e),2),Ue=y(ze);je(Ue,f=>M(a,f),()=>o(a)),b(ze),b($e);var Ne=p($e,2),Ze=p(y(Ne),2),O=y(Ze);je(O,f=>M(r,f),()=>o(r)),b(Ze),b(Ne);var D=p(Ne,2),V=p(y(D),2),ie=y(V);je(ie,f=>M(l,f),()=>o(l)),b(V),b(D);var we=p(D,2),Fe=y(we),Je=y(Fe),Dt=p(Je,2),Fa=y(Dt);b(Dt),b(Fe);var Pt=p(Fe,2),Gt=y(Pt),Lt=p(Gt,2),Xa=y(Lt);b(Lt),b(Pt),b(we),At(2),b(Ae),oe((f,_,R,F,X,H,W,De)=>{qe=ce(Ge,1,"control-btn svelte-1bvbq9v",null,qe,f),Ve=ce(Le,1,"control-btn svelte-1bvbq9v",null,Ve,_),wt(Je,`background-color: hsl(${o(n),Q(()=>o(n).h)??""}, ${o(n),Q(()=>o(n).s)??""}%, ${o(n),Q(()=>o(n).l)??""}%)`),fe(Fa,`Gradient 1: ${R??""}Â°, ${F??""}%, ${X??""}%`),wt(Gt,`background-color: hsl(${o(i),Q(()=>o(i).h)??""}, ${o(i),Q(()=>o(i).s)??""}%, ${o(i),Q(()=>o(i).l)??""}%)`),fe(Xa,`Gradient 2: ${H??""}Â°, ${W??""}%, ${De??""}%`)},[()=>({active:o(A)}),()=>({active:o(m)}),()=>(o(n),Q(()=>Math.round(o(n).h))),()=>(o(n),Q(()=>Math.round(o(n).s))),()=>(o(n),Q(()=>Math.round(o(n).l))),()=>(o(i),Q(()=>Math.round(o(i).h))),()=>(o(i),Q(()=>Math.round(o(i).s))),()=>(o(i),Q(()=>Math.round(o(i).l)))]),z("click",Ge,ge),z("click",Le,ve),z("click",Ke,_e),z("mousedown",Ue,f=>te(f,"hue")),z("mousedown",O,f=>te(f,"saturation")),z("mousedown",ie,f=>te(f,"lightness")),Z(e,Ae),Oe()}var Ui=J('<div class="timer-settings-panel svelte-1m1yjnh"><h3 class="panel-title svelte-1m1yjnh">Timer Settings</h3> <div class="settings-grid svelte-1m1yjnh"><div class="setting-item svelte-1m1yjnh"><label for="work-duration" class="setting-label svelte-1m1yjnh">Work (min)</label> <input id="work-duration" type="number" min="1" max="120" class="setting-input svelte-1m1yjnh"/></div> <div class="setting-item svelte-1m1yjnh"><label for="short-break-duration" class="setting-label svelte-1m1yjnh">Short Break (min)</label> <input id="short-break-duration" type="number" min="1" max="60" class="setting-input svelte-1m1yjnh"/></div> <div class="setting-item svelte-1m1yjnh"><label for="long-break-duration" class="setting-label svelte-1m1yjnh">Long Break (min)</label> <input id="long-break-duration" type="number" min="1" max="120" class="setting-input svelte-1m1yjnh"/></div> <div class="setting-item svelte-1m1yjnh"><label for="sessions-before-long-break" class="setting-label svelte-1m1yjnh">Sessions Before Long Break</label> <input id="sessions-before-long-break" type="number" min="1" max="10" class="setting-input svelte-1m1yjnh"/></div></div> <div class="toggles-section svelte-1m1yjnh"><div class="toggle-item svelte-1m1yjnh"><label for="auto-cycle" class="toggle-label svelte-1m1yjnh">Auto-cycle sessions</label> <input id="auto-cycle" type="checkbox" class="toggle-input svelte-1m1yjnh"/></div> <div class="toggle-item svelte-1m1yjnh"><label for="floating-enabled" class="toggle-label svelte-1m1yjnh">Enable floating effects</label> <input id="floating-enabled" type="checkbox" class="toggle-input svelte-1m1yjnh"/></div></div> <button type="button" class="reset-button svelte-1m1yjnh">Reset to Defaults</button></div>');function Zi(e,t){Te(t,!1);const[n,i]=ht(),a=()=>xe(me,"$timerSettings",n),r=()=>xe(pe,"$backgroundSettings",n);let l=T(a().workDuration/60),s=T(a().shortBreakDuration/60),g=T(a().longBreakDuration/60),v=T(a().sessionsBeforeLongBreak),u=T(a().autoCycle),m=T(r().isFloatingEnabled);me.subscribe(h=>{h.workDuration/60!==o(l)&&M(l,h.workDuration/60),h.shortBreakDuration/60!==o(s)&&M(s,h.shortBreakDuration/60),h.longBreakDuration/60!==o(g)&&M(g,h.longBreakDuration/60),h.sessionsBeforeLongBreak!==o(v)&&M(v,h.sessionsBeforeLongBreak),h.autoCycle!==o(u)&&M(u,h.autoCycle)}),pe.subscribe(h=>{h.isFloatingEnabled!==o(m)&&M(m,h.isFloatingEnabled)});function A(){xn(),me.set({workDuration:1500,shortBreakDuration:300,longBreakDuration:900,sessionsBeforeLongBreak:4,autoCycle:!1})}Re(()=>(o(l),o(s),o(g),o(v),o(u),a(),me),()=>{const h={workDuration:Math.max(1,o(l))*60,shortBreakDuration:Math.max(1,o(s))*60,longBreakDuration:Math.max(1,o(g))*60,sessionsBeforeLongBreak:Math.max(1,o(v)),autoCycle:o(u)};(a().workDuration!==h.workDuration||a().shortBreakDuration!==h.shortBreakDuration||a().longBreakDuration!==h.longBreakDuration||a().sessionsBeforeLongBreak!==h.sessionsBeforeLongBreak||a().autoCycle!==h.autoCycle)&&me.set(h)}),Re(()=>(r(),o(m),pe),()=>{r().isFloatingEnabled!==o(m)&&pe.update(h=>({...h,isFloatingEnabled:o(m)}))}),vt(),Ee();var d=Ui(),c=p(y(d),2),k=y(c),w=p(y(k),2);he(w),b(k);var C=p(k,2),S=p(y(C),2);he(S),b(C);var Y=p(C,2),I=p(y(Y),2);he(I),b(Y);var x=p(Y,2),G=p(y(x),2);he(G),b(x),b(c);var B=p(c,2),E=y(B),L=p(y(E),2);he(L),b(E);var P=p(E,2),$=p(y(P),2);he($),b(P),b(B);var j=p(B,2);b(d),ke(w,()=>o(l),h=>M(l,h)),ke(S,()=>o(s),h=>M(s,h)),ke(I,()=>o(g),h=>M(g,h)),ke(G,()=>o(v),h=>M(v,h)),nt(L,()=>o(u),h=>M(u,h)),nt($,()=>o(m),h=>M(m,h)),z("click",j,A),Z(e,d),Oe(),i()}var Ji=J('<div class="controls-grid svelte-6z4cat"><div class="control-item svelte-6z4cat"><label class="control-label svelte-6z4cat">Size</label> <div class="slider-container svelte-6z4cat"><input type="range" min="20" max="150" class="slider svelte-6z4cat"/> <span class="value-display svelte-6z4cat"> </span></div></div> <div class="control-item svelte-6z4cat"><label class="control-label svelte-6z4cat">Speed</label> <div class="slider-container svelte-6z4cat"><input type="range" min="0.1" max="1.0" step="0.05" class="slider svelte-6z4cat"/> <span class="value-display svelte-6z4cat"> </span></div></div> <div class="control-item svelte-6z4cat"><label class="control-label svelte-6z4cat">Ambient Frequency</label> <div class="slider-container svelte-6z4cat"><input type="range" min="1000" max="10000" step="500" class="slider svelte-6z4cat"/> <span class="value-display svelte-6z4cat"> </span></div></div></div>'),Qi=J('<div class="controls-grid svelte-6z4cat"><div class="control-item svelte-6z4cat"><label class="control-label svelte-6z4cat">Intensity</label> <div class="slider-container svelte-6z4cat"><input type="range" min="0.1" max="1.0" step="0.05" class="slider svelte-6z4cat"/> <span class="value-display svelte-6z4cat"> </span></div></div> <div class="control-item svelte-6z4cat"><label class="control-label svelte-6z4cat">Speed</label> <div class="slider-container svelte-6z4cat"><input type="range" min="0.5" max="2.0" step="0.1" class="slider svelte-6z4cat"/> <span class="value-display svelte-6z4cat"> </span></div></div> <div class="control-item svelte-6z4cat"><label class="control-label svelte-6z4cat">Count</label> <div class="slider-container svelte-6z4cat"><input type="range" min="1" max="10" class="slider svelte-6z4cat"/> <span class="value-display svelte-6z4cat"> </span></div></div></div>'),eo=J('<div class="effects-panel svelte-6z4cat"><h3 class="panel-title svelte-6z4cat">Water Effects</h3> <div class="effect-section svelte-6z4cat"><div class="section-header svelte-6z4cat"><h4 class="section-title svelte-6z4cat">Ripples</h4> <label class="toggle-wrapper svelte-6z4cat"><input type="checkbox" class="toggle-input svelte-6z4cat"/> <span class="toggle-label svelte-6z4cat">Enable</span></label></div> <!></div> <div class="effect-section svelte-6z4cat"><div class="section-header svelte-6z4cat"><h4 class="section-title svelte-6z4cat">Wave Shimmer</h4> <label class="toggle-wrapper svelte-6z4cat"><input type="checkbox" class="toggle-input svelte-6z4cat"/> <span class="toggle-label svelte-6z4cat">Enable</span></label></div> <!></div> <button type="button" class="reset-button svelte-6z4cat">Reset to Defaults</button></div>');function to(e,t){Te(t,!1);const n=an();let i=T(!0),a=T(50),r=T(.35),l=T(3e3),s=T(!0),g=T(.5),v=T(1),u=T(5);function m(){n("update",{ripples:{enabled:o(i),size:o(a),speed:o(r),frequency:o(l)},shimmer:{enabled:o(s),intensity:o(g),speed:o(v),count:o(u)}})}function A(){M(i,!0),M(a,50),M(r,.35),M(l,3e3),M(s,!0),M(g,.5),M(v,1),M(u,5),m()}Ee();var d=eo(),c=p(y(d),2),k=y(c),w=p(y(k),2),C=y(w);he(C),At(2),b(w),b(k);var S=p(k,2);{var Y=$=>{var j=Ji(),h=y(j),K=p(y(h),2),N=y(K);he(N);var q=p(N,2),ae=y(q,!0);b(q),b(K),b(h);var ee=p(h,2),ne=p(y(ee),2),te=y(ne);he(te);var ye=p(te,2),se=y(ye,!0);b(ye),b(ne),b(ee);var ue=p(ee,2),ge=p(y(ue),2),ve=y(ge);he(ve);var _e=p(ve,2),Ae=y(_e);b(_e),b(ge),b(ue),b(j),oe((U,Ce)=>{fe(ae,o(a)),fe(se,U),fe(Ae,`${Ce??""}s`)},[()=>o(r).toFixed(2),()=>(o(l)/1e3).toFixed(1)]),ke(N,()=>o(a),U=>M(a,U)),z("input",N,m),ke(te,()=>o(r),U=>M(r,U)),z("input",te,m),ke(ve,()=>o(l),U=>M(l,U)),z("input",ve,m),Z($,j)};be(S,$=>{o(i)&&$(Y)})}b(c);var I=p(c,2),x=y(I),G=p(y(x),2),B=y(G);he(B),At(2),b(G),b(x);var E=p(x,2);{var L=$=>{var j=Qi(),h=y(j),K=p(y(h),2),N=y(K);he(N);var q=p(N,2),ae=y(q);b(q),b(K),b(h);var ee=p(h,2),ne=p(y(ee),2),te=y(ne);he(te);var ye=p(te,2),se=y(ye);b(ye),b(ne),b(ee);var ue=p(ee,2),ge=p(y(ue),2),ve=y(ge);he(ve);var _e=p(ve,2),Ae=y(_e,!0);b(_e),b(ge),b(ue),b(j),oe((U,Ce)=>{fe(ae,`${U??""}%`),fe(se,`${Ce??""}x`),fe(Ae,o(u))},[()=>Math.round(o(g)*100),()=>o(v).toFixed(1)]),ke(N,()=>o(g),U=>M(g,U)),z("input",N,m),ke(te,()=>o(v),U=>M(v,U)),z("input",te,m),ke(ve,()=>o(u),U=>M(u,U)),z("input",ve,m),Z($,j)};be(E,$=>{o(s)&&$(L)})}b(I);var P=p(I,2);b(d),nt(C,()=>o(i),$=>M(i,$)),z("change",C,m),nt(B,()=>o(s),$=>M(s,$)),z("change",B,m),z("click",P,A),Z(e,d),Oe()}var ao=J("<div><!></div>"),no=J("<div><!></div>"),io=J("<div><!></div>"),oo=J('<div><div class="placeholder-panel svelte-g0rkpj"><h3 class="svelte-g0rkpj">Light Effects</h3> <p class="svelte-g0rkpj">Coming soon...</p></div></div>'),ro=J('<div><div class="placeholder-panel svelte-g0rkpj"><h3 class="svelte-g0rkpj">Particle Effects</h3> <p class="svelte-g0rkpj">Coming soon...</p></div></div>'),so=J('<div><div class="placeholder-panel svelte-g0rkpj"><h3 class="svelte-g0rkpj">Master Settings</h3> <p class="svelte-g0rkpj">Coming soon...</p></div></div>'),lo=J('<div role="toolbar" aria-label="Background Effects Dock"><div class="dock-container svelte-g0rkpj"><div title="Professional HSL Color Picker"><div class="dock-icon svelte-g0rkpj">ð¨</div></div> <div title="Water Effects"><div class="dock-icon svelte-g0rkpj">ð</div></div> <div title="Light Effects"><div class="dock-icon svelte-g0rkpj">â¨</div></div> <div title="Particle Effects"><div class="dock-icon svelte-g0rkpj">ð«</div></div> <div title="Timer Settings"><div class="dock-icon svelte-g0rkpj">â±ï¸</div></div> <div title="Master Settings"><div class="dock-icon svelte-g0rkpj">âï¸</div></div></div> <!> <!> <!> <!> <!> <!></div>');function co(e,t){Te(t,!1);let n=T(),i=T(!1),a,r=0,l=0,s=T(!1),g=T(!1),v=T(!1),u=T(!1),m=T(!1),A=T(!1);const d=100,c=3e3;Ct(()=>{const O=V=>{r=V.clientY,k()},D=()=>{l=window.innerHeight};return window.addEventListener("mousemove",O),window.addEventListener("resize",D),D(),()=>{window.removeEventListener("mousemove",O),window.removeEventListener("resize",D),a&&clearTimeout(a)}});function k(){const D=l-r<=d;D&&!o(i)?w():!D&&o(i)&&S()}function w(){M(i,!0),a&&(clearTimeout(a),a=0)}function C(){M(i,!1)}function S(){a&&clearTimeout(a),a=setTimeout(C,c)}function Y(){w()}function I(){S()}function x(){M(s,!1),M(g,!1),M(v,!1),M(u,!1),M(m,!1),M(A,!1)}function G(){x(),M(s,!0),w()}function B(){x(),M(g,!0),w()}function E(){x(),M(v,!0),w()}function L(){x(),M(u,!0),w()}function P(){x(),M(m,!0),w()}function $(){x(),M(A,!0),w()}function j(O){switch(O){case"colors":G();break;case"timer":B();break;case"water":E();break;case"light":L();break;case"particles":P();break;case"settings":$();break}}Ee();var h=lo();let K;var N=y(h),q=y(N);let ae;var ee=p(q,2);let ne;var te=p(ee,2);let ye;var se=p(te,2);let ue;var ge=p(se,2);let ve;var _e=p(ge,2);let Ae;b(N);var U=p(N,2);{var Ce=O=>{var D=ao();let V;var ie=y(D);Ki(ie,{}),b(D),oe(we=>V=ce(D,1,"panel-container color-grid-panel svelte-g0rkpj",null,V,we),[()=>({visible:o(s)})]),Z(O,D)};be(U,O=>{o(s)&&O(Ce)})}var Ge=p(U,2);{var qe=O=>{var D=no();let V;var ie=y(D);Zi(ie,{}),b(D),oe(we=>V=ce(D,1,"panel-container timer-settings-panel svelte-g0rkpj",null,V,we),[()=>({visible:o(g)})]),Z(O,D)};be(Ge,O=>{o(g)&&O(qe)})}var Le=p(Ge,2);{var Ve=O=>{var D=io();let V;var ie=y(D);to(ie,{}),b(D),oe(we=>V=ce(D,1,"panel-container water-effects-panel svelte-g0rkpj",null,V,we),[()=>({visible:o(v)})]),Z(O,D)};be(Le,O=>{o(v)&&O(Ve)})}var Ke=p(Le,2);{var $e=O=>{var D=oo();let V;oe(ie=>V=ce(D,1,"panel-container light-effects-panel svelte-g0rkpj",null,V,ie),[()=>({visible:o(u)})]),Z(O,D)};be(Ke,O=>{o(u)&&O($e)})}var ze=p(Ke,2);{var Ue=O=>{var D=ro();let V;oe(ie=>V=ce(D,1,"panel-container particle-effects-panel svelte-g0rkpj",null,V,ie),[()=>({visible:o(m)})]),Z(O,D)};be(ze,O=>{o(m)&&O(Ue)})}var Ne=p(ze,2);{var Ze=O=>{var D=so();let V;oe(ie=>V=ce(D,1,"panel-container master-settings-panel svelte-g0rkpj",null,V,ie),[()=>({visible:o(A)})]),Z(O,D)};be(Ne,O=>{o(A)&&O(Ze)})}b(h),je(h,O=>M(n,O),()=>o(n)),oe((O,D,V,ie,we,Fe,Je)=>{K=ce(h,1,"floating-dock svelte-g0rkpj",null,K,O),ae=ce(q,1,"dock-item svelte-g0rkpj",null,ae,D),ne=ce(ee,1,"dock-item svelte-g0rkpj",null,ne,V),ye=ce(te,1,"dock-item svelte-g0rkpj",null,ye,ie),ue=ce(se,1,"dock-item svelte-g0rkpj",null,ue,we),ve=ce(ge,1,"dock-item svelte-g0rkpj",null,ve,Fe),Ae=ce(_e,1,"dock-item svelte-g0rkpj",null,Ae,Je)},[()=>({visible:o(i)}),()=>({active:o(s)}),()=>({active:o(v)}),()=>({active:o(u)}),()=>({active:o(m)}),()=>({active:o(g)}),()=>({active:o(A)})]),z("click",q,()=>j("colors")),z("click",ee,()=>j("water")),z("click",te,()=>j("light")),z("click",se,()=>j("particles")),z("click",ge,()=>j("timer")),z("click",_e,()=>j("settings")),z("mouseenter",h,Y),z("mouseleave",h,I),Z(e,h),Oe()}var uo=J('<meta name="description" content="A beautiful Pomodoro timer with interactive background effects"/>'),go=J('<span class="text-sm text-white/60 block mt-1"> </span>'),vo=J('<div class="text-lg font-medium text-white/80"> <!></div>'),ho=J('<!> <!> <main class="relative z-10 flex min-h-screen flex-col items-center justify-center px-4 py-8 transition-all duration-1000 ease-in-out"><div class="w-full max-w-md space-y-8 text-center"><!> <!> <!></div></main>',1);function So(e,t){Te(t,!1);const[n,i]=ht(),a=()=>xe(pe,"$backgroundSettings",n),r=()=>xe(re,"$timerState",n),l=()=>xe(me,"$timerSettings",n);function s(C){switch(C){case"work":return"Focus Session";case"shortBreak":return"Short Break";case"longBreak":return"Long Break";default:return"Session"}}Ee();var g=ho();nn(C=>{var S=uo();Ja.title="Locked-In Pomodoro Timer",Z(C,S)});var v=Za(g);qi(v,{get gradientColor1(){return a().gradientColor1},get gradientColor2(){return a().gradientColor2}});var u=p(v,2);co(u,{});var m=p(u,2),A=y(m),d=y(A);bn(d,{});var c=p(d,2);{var k=C=>{var S=vo(),Y=y(S),I=p(Y);{var x=G=>{var B=go(),E=y(B);b(B),oe(()=>fe(E,`Session ${r().completedSessions+1} of ${l().sessionsBeforeLongBreak??""}`)),Z(G,B)};be(I,G=>{r().currentSession.type==="work"&&G(x)})}b(S),oe(G=>fe(Y,`${G??""} `),[()=>s(r().currentSession.type)]),Z(C,S)};be(c,C=>{r().currentSession&&C(k)})}var w=p(c,2);An(w,{}),b(A),b(m),Z(e,g),Oe(),i()}export{So as component};
