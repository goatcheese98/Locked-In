import"../chunks/DsnmJJEf.js";import{i as me}from"../chunks/BhtY715V.js";import{w as de,aE as Ya,aF as Wa,aG as qa,aH as Va,aI as ja,aJ as Ka,F as Ae,e as z,M as ga,aK as Ua,p as ve,aL as le,aM as ze,l as J,t as re,a as Z,m as pe,T as E,R as H,n as R,o as C,q as I,h as s,aN as K,aO as fa,f as Za,aP as Ja}from"../chunks/BGg158e2.js";import{b as Qa,l as ma,w as ut,d as en,g as ie,s as ce,e as q,o as ht,c as tn,f as an}from"../chunks/By67yA7Y.js";import{i as Me,s as Ye,a as se,p as Ot,b as ke}from"../chunks/BxKPKBtI.js";const Dt=[...` 	
\r\fÂ \v\uFEFF`];function nn(e,t,n){var i=e==null?"":""+e;if(n){for(var a in n)if(n[a])i=i?i+" "+a:a;else if(i.length)for(var o=a.length,l=0;(l=i.indexOf(a,l))>=0;){var r=l+o;(l===0||Dt.includes(i[l-1]))&&(r===i.length||Dt.includes(i[r]))?i=(l===0?"":i.substring(0,l))+i.substring(r+1):l=r}}return i===""?null:i}function on(e,t){return e==null?null:String(e)}function ge(e,t,n,i,a,o){var l=e.__className;if(de||l!==n||l===void 0){var r=nn(n,i,o);(!de||r!==e.getAttribute("class"))&&(r==null?e.removeAttribute("class"):e.className=r),e.__className=n}else if(o&&a!==o)for(var u in o){var g=!!o[u];(a==null||g!==!!a[u])&&e.classList.toggle(u,g)}return o}function lt(e,t,n,i){var a=e.__style;if(de||a!==t){var o=on(t);(!de||o!==e.getAttribute("style"))&&(o==null?e.removeAttribute("style"):e.style.cssText=o),e.__style=t}return i}const rn=Symbol("is custom element"),sn=Symbol("is html");function ye(e){if(de){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var i=e.value;De(e,"value",null),e.value=i}if(e.hasAttribute("checked")){var a=e.checked;De(e,"checked",null),e.checked=a}}};e.__on_r=n,Va(n),Qa()}}function De(e,t,n,i){var a=ln(e);de&&(a[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||a[t]!==(a[t]=n)&&(t==="loading"&&(e[ja]=n),n==null?e.removeAttribute(t):typeof n!="string"&&cn(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function ln(e){return e.__attributes??={[rn]:e.nodeName.includes("-"),[sn]:e.namespaceURI===Ya}}var Pt=new Map;function cn(e){var t=Pt.get(e.nodeName);if(t)return t;Pt.set(e.nodeName,t=[]);for(var n,i=e,a=Element.prototype;a!==i;){n=qa(i);for(var o in n)n[o].set&&t.push(o);i=Wa(i)}return t}function xe(e,t,n=t){var i=Ka(),a=new WeakSet;ma(e,"input",o=>{var l=o?e.defaultValue:e.value;if(l=tt(e)?at(l):l,n(l),Ae!==null&&a.add(Ae),i&&l!==(l=t())){var r=e.selectionStart,u=e.selectionEnd;e.value=l??"",u!==null&&(e.selectionStart=r,e.selectionEnd=Math.min(u,e.value.length))}}),(de&&e.defaultValue!==e.value||z(t)==null&&e.value)&&(n(tt(e)?at(e.value):e.value),Ae!==null&&a.add(Ae)),ga(()=>{var o=t();if(e===document.activeElement){var l=Ua??Ae;if(a.has(l))return}tt(e)&&o===at(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function Gt(e,t,n=t){ma(e,"change",i=>{var a=i?e.defaultChecked:e.checked;n(a)}),(de&&e.defaultChecked!==e.checked||z(t)==null)&&n(e.checked),ga(()=>{var i=t();e.checked=!!i})}function tt(e){var t=e.type;return t==="number"||t==="range"}function at(e){return e===""?null:+e}const va="zenZoneTimerSettings",gt={workDuration:Math.max(1,25)*60,shortBreakDuration:Math.max(1,5)*60,longBreakDuration:Math.max(1,15)*60,sessionsBeforeLongBreak:Math.max(1,4),autoCycle:!1};function nt(e){const t={...gt,...e};return t.workDuration=Math.max(1,Math.floor(t.workDuration/60))*60,t.shortBreakDuration=Math.max(1,Math.floor(t.shortBreakDuration/60))*60,t.longBreakDuration=Math.max(1,Math.floor(t.longBreakDuration/60))*60,t.sessionsBeforeLongBreak=Math.max(1,Math.floor(t.sessionsBeforeLongBreak)),t}function pa(){if(typeof window<"u"&&window.localStorage){const e=localStorage.getItem(va);if(e)try{const t=JSON.parse(e);if(t&&typeof t.workDuration=="number"&&typeof t.shortBreakDuration=="number"&&typeof t.longBreakDuration=="number"&&typeof t.sessionsBeforeLongBreak=="number"&&typeof t.autoCycle=="boolean")return nt(t);if(t)return console.warn("Partially invalid settings found in localStorage, attempting to sanitize."),nt(t)}catch(t){console.error("Error parsing timer settings from localStorage:",t)}}return nt(gt)}const dn=pa(),un={currentSession:"Work",timeRemaining:dn.workDuration,isRunning:!1,currentCycleCount:0},Q=ut(pa()),j=ut(un);typeof window<"u"&&window.localStorage&&Q.subscribe(e=>{try{localStorage.setItem(va,JSON.stringify(e))}catch(t){console.error("Error saving timer settings to localStorage:",t)}});const hn=en(j,e=>{const t=Math.floor(e.timeRemaining/60),n=e.timeRemaining%60;return`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}`});let U;function ya(){const e=ie(j);if(e.isRunning&&e.timeRemaining>0)return;let t=e.timeRemaining;if(t<=0){const n=ie(Q);switch(e.currentSession){case"Work":t=n.workDuration;break;case"Short Break":t=n.shortBreakDuration;break;case"Long Break":t=n.longBreakDuration;break}}j.update(n=>({...n,isRunning:!0,timeRemaining:t})),U&&clearInterval(U),U=setInterval(()=>{const n=ie(j);n.isRunning&&n.timeRemaining>0?j.update(i=>({...i,timeRemaining:i.timeRemaining-1})):n.isRunning&&n.timeRemaining<=0&&(U&&clearInterval(U),U=void 0,mn())},1e3)}function gn(){U&&(clearInterval(U),U=void 0),j.update(e=>({...e,isRunning:!1}))}function fn(){U&&(clearInterval(U),U=void 0),j.update(e=>{let t,n,i=e.currentCycleCount,a=gt;return Q.subscribe(l=>{a=l})(),e.currentSession==="Work"?(i++,i>=a.sessionsBeforeLongBreak?(t="Long Break",n=a.longBreakDuration,i=0):(t="Short Break",n=a.shortBreakDuration)):(t="Work",n=a.workDuration),{...e,currentSession:t,timeRemaining:n,isRunning:!1,currentCycleCount:i}})}function Sa(e){U&&(clearInterval(U),U=void 0);const t=ie(Q),n=e||ie(j).currentSession;let i=t.workDuration,a=ie(j).currentCycleCount;switch(n){case"Work":i=t.workDuration,e==="Work"&&(a=0);break;case"Short Break":i=t.shortBreakDuration;break;case"Long Break":i=t.longBreakDuration;break}j.update(o=>({...o,currentSession:n,timeRemaining:i,isRunning:!1,currentCycleCount:a}))}function Lt(e){j.update(t=>{if(t.isRunning)return t;const n=Math.max(60,e);return Q.update(i=>{const a={...i};switch(t.currentSession){case"Work":a.workDuration=n;break;case"Short Break":a.shortBreakDuration=n;break;case"Long Break":a.longBreakDuration=n;break}return a}),{...t,timeRemaining:n}})}function mn(){const e=ie(j),t=ie(Q);let n,i=e.currentCycleCount;e.currentSession==="Work"?(i++,i>=t.sessionsBeforeLongBreak?(n="Long Break",i=0):n="Short Break"):n="Work",j.update(a=>({...a,currentSession:n,isRunning:!1,currentCycleCount:i})),Sa(n),t.autoCycle&&ya()}var vn=J('<div class="mx-2 flex scale-75 flex-col items-center justify-center opacity-60 transition-opacity hover:opacity-100"><button title="Increase minutes" aria-label="Increase minutes" class="p-1 text-gray-300 hover:text-teal-300 disabled:opacity-30"><svg class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg></button> <button title="Decrease minutes" aria-label="Decrease minutes" class="p-1 text-gray-300 hover:text-teal-300 disabled:opacity-30"><svg class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div>'),pn=J('<div class="mt-2 mb-8 text-center"><p class="mb-2 text-xl font-semibold text-teal-400" id="current-session-label"> </p> <div class="relative flex items-center justify-center font-mono text-8xl tracking-tighter text-gray-100 tabular-nums select-none svelte-1sjqirj" aria-live="polite" aria-atomic="true"><!> <span class="w-32 text-center"> </span> <span class="w-8 text-center">:</span> <span class="w-32 text-center"> </span></div> <div class="mt-6 h-2.5 w-full overflow-hidden rounded-full bg-slate-700 shadow-inner"><div class="h-2.5 rounded-full bg-teal-500 transition-all duration-1000 ease-linear" aria-valuemin="0" aria-valuemax="100" aria-labelledby="current-session-label" role="progressbar"></div></div></div>');function yn(e,t){ve(t,!1);const[n,i]=Ye(),a=()=>se(j,"$timerState",n),o=()=>se(Q,"$timerSettings",n),l=()=>se(hn,"$formattedTime",n),r=H(),u=H();let g=H(0);function h(){if(a().isRunning)return;const x=Math.floor(a().timeRemaining/60),P=a().timeRemaining%60,T=(x+1)*60+P;Lt(T)}function y(){if(a().isRunning)return;const x=Math.floor(a().timeRemaining/60),P=a().timeRemaining%60,T=Math.max(0,x-1)*60+P;Lt(T)}le(()=>(a(),o()),()=>{const x=a(),P=o();let T=P.workDuration;x.currentSession==="Short Break"?T=P.shortBreakDuration:x.currentSession==="Long Break"&&(T=P.longBreakDuration),T=Math.max(1,T),T>0?E(g,Math.max(0,100-x.timeRemaining/T*100)):E(g,x.timeRemaining>0?0:100)}),le(()=>l(),()=>{E(r,l().substring(0,2))}),le(()=>l(),()=>{E(u,l().substring(3,5))}),ze(),me();var S=pn(),d=R(S),c=R(d,!0);C(d);var b=I(d,2),_=R(b);{var w=x=>{var P=vn(),T=R(P),Y=I(T,2);C(P),re(()=>{T.disabled=(a(),z(()=>a().isRunning)),Y.disabled=(a(),z(()=>a().isRunning||a().timeRemaining<120&&a().timeRemaining%60===0&&a().timeRemaining/60<=1||a().timeRemaining<60))}),q("click",T,h),q("click",Y,y),Z(x,P)};Me(_,x=>{a(),z(()=>!a().isRunning)&&x(w)})}var v=I(_,2),F=R(v,!0);C(v);var k=I(v,4),A=R(k,!0);C(k),C(b);var D=I(b,2),L=R(D);C(D),C(S),re(()=>{ce(c,(a(),z(()=>a().currentSession))),ce(F,s(r)),ce(A,s(u)),lt(L,`width: ${s(g)??""}%;`),De(L,"aria-valuenow",s(g))}),Z(e,S),pe(),i()}var Sn=J(`<button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
             text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-teal-300
             focus:ring-2 focus:ring-teal-400
             focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50"> </button>`),Mn=J(`<button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
             text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-amber-300
             focus:ring-2 focus:ring-amber-300
             focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50" aria-label="Pause timer">Pause</button>`),bn=J(`<div class="mt-6 flex justify-center space-x-2"><!> <button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
           text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-sky-300
           focus:ring-2 focus:ring-sky-400
           focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50" aria-label="Skip to next session" title="Skip to next session">Skip <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="ml-1 inline h-5 w-5 align-text-bottom"><path fill-rule="evenodd" d="M2 10a.75.75 0 0 1 .75-.75h12.59l-2.1-1.95a.75.75 0 1 1 1.02-1.1l3.5 3.25a.75.75 0 0 1 0 1.1l-3.5 3.25a.75.75 0 1 1-1.02-1.1l2.1-1.95H2.75A.75.75 0 0 1 2 10Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M18 10a.75.75 0 0 1-.75.75h-.008a.75.75 0 0 1 0-1.5h.008A.75.75 0 0 1 18 10Z" clip-rule="evenodd"></path></svg></button> <button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
           text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-rose-300
           focus:ring-2 focus:ring-rose-400
           focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50" aria-label="Reset current session timer" title="Reset current session">Reset <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="ml-1 inline h-5 w-5 align-text-bottom"><path fill-rule="evenodd" d="M15.323 3.407a.75.75 0 0 1 0 1.06l-2.096 2.096A6.5 6.5 0 0 1 10 16.5a6.501 6.501 0 0 1-6.414-5.523.75.75 0 0 1 1.482-.236A5.001 5.001 0 0 0 10 15a5 5 0 0 0 4.19-2.402l-1.618 1.617a.75.75 0 1 1-1.06 1.061l3.25-3.25a.75.75 0 0 1 0-1.06l-3.25-3.25a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M4.677 12.593a.75.75 0 0 1 0-1.06l2.096-2.096A6.5 6.5 0 0 1 10 3.5a6.501 6.501 0 0 1 6.414 5.523.75.75 0 0 1-1.482.236A5.001 5.001 0 0 0 10 5a5 5 0 0 0-4.19 2.402l1.618-1.617a.75.75 0 1 1 1.06-1.061L5.238 8.075a.75.75 0 0 1 0 1.06l3.25 3.25a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd"></path></svg></button></div>`);function _n(e,t){ve(t,!1);const[n,i]=Ye(),a=()=>se(j,"$timerState",n),o=()=>se(Q,"$timerSettings",n);let l=H();le(()=>(a(),o()),()=>{const d=a(),c=o();E(l,!d.timeRemaining||d.currentSession==="Work"&&d.timeRemaining===c.workDuration||d.currentSession==="Short Break"&&d.timeRemaining===c.shortBreakDuration||d.currentSession==="Long Break"&&d.timeRemaining===c.longBreakDuration)}),ze(),me();var r=bn(),u=R(r);{var g=d=>{var c=Sn(),b=R(c,!0);C(c),re(()=>{De(c,"aria-label",s(l)?"Start timer":"Resume timer"),ce(b,s(l)?"Start":"Resume")}),q("click",c,function(..._){ya?.apply(this,_)}),Z(d,c)},h=d=>{var c=Mn();q("click",c,function(...b){gn?.apply(this,b)}),Z(d,c)};Me(u,d=>{a(),z(()=>!a().isRunning)?d(g):d(h,!1)})}var y=I(u,2),S=I(y,2);C(r),re(()=>{y.disabled=(a(),z(()=>a().isRunning)),S.disabled=(a(),s(l),z(()=>a().isRunning&&s(l)))}),q("click",y,function(...d){fn?.apply(this,d)}),q("click",S,function(...d){Sa?.apply(this,d)}),Z(e,r),pe(),i()}const Bt=20,oe={gradientColor1:"hsl(210, 70%, 50%)",gradientColor2:"hsl(200, 68%, 50%)",isFloatingEnabled:!0,gradientColor1History:["hsl(210, 70%, 50%)"],gradientColor1HistoryIndex:0,gradientColor2History:["hsl(200, 68%, 50%)"],gradientColor2HistoryIndex:0,isAutoCyclingColor1:!1,isAutoCyclingColor2:!1};function Ma(e){if(!e)return null;const t=e.match(/hsl\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)/);return t?{h:parseInt(t[1]),s:parseInt(t[2]),l:parseInt(t[3])}:null}function $t(){const e=ie(ee);return Ma(e.gradientColor1)||{h:210,s:70,l:50}}function Nt(){const e=ie(ee);return Ma(e.gradientColor2)||{h:200,s:68,l:50}}function An(){let e={...oe,gradientColor1History:[...oe.gradientColor1History],gradientColor2History:[...oe.gradientColor2History]};if(typeof localStorage<"u"){const t=localStorage.getItem("backgroundSettings");if(t)try{const n=JSON.parse(t);e={...e,...n,isAutoCyclingColor1:n.isAutoCyclingColor1??oe.isAutoCyclingColor1,isAutoCyclingColor2:n.isAutoCyclingColor2??oe.isAutoCyclingColor2},!n.gradientColor1History||n.gradientColor1History.length===0?(e.gradientColor1History=[e.gradientColor1],e.gradientColor1HistoryIndex=0):(e.gradientColor1HistoryIndex=Math.max(0,Math.min(n.gradientColor1HistoryIndex??0,n.gradientColor1History.length-1)),e.gradientColor1=n.gradientColor1History[e.gradientColor1HistoryIndex]),!n.gradientColor2History||n.gradientColor2History.length===0?(e.gradientColor2History=[e.gradientColor2],e.gradientColor2HistoryIndex=0):(e.gradientColor2HistoryIndex=Math.max(0,Math.min(n.gradientColor2HistoryIndex??0,n.gradientColor2History.length-1)),e.gradientColor2=n.gradientColor2History[e.gradientColor2HistoryIndex])}catch(n){return console.error("Failed to parse background settings from localStorage",n),{...oe,gradientColor1History:[...oe.gradientColor1History],gradientColor2History:[...oe.gradientColor2History]}}}return e}const wn=An(),ee=ut(wn);typeof localStorage<"u"&&ee.subscribe(e=>{localStorage.setItem("backgroundSettings",JSON.stringify(e))});function ba(e,t,n){let i=[...t];n<i.length-1&&(i=i.slice(0,n+1)),i.push(e),i.length>Bt&&(i=i.slice(i.length-Bt));const a=i.length-1;return{history:i,index:a}}function Xt(e,t,n){let i;typeof e=="string"?i=e:i=`hsl(${Math.round(e)}, ${Math.round(t)}%, ${Math.round(n)}%)`;const a=ie(ee);if(a.gradientColor1===i)return;const{history:o,index:l}=ba(i,a.gradientColor1History,a.gradientColor1HistoryIndex);ee.update(r=>({...r,gradientColor1:i,gradientColor1History:o,gradientColor1HistoryIndex:l}))}function Ft(e,t,n){let i;typeof e=="string"?i=e:i=`hsl(${Math.round(e)}, ${Math.round(t)}%, ${Math.round(n)}%)`;const a=ie(ee);if(a.gradientColor2===i)return;const{history:o,index:l}=ba(i,a.gradientColor2History,a.gradientColor2HistoryIndex);ee.update(r=>({...r,gradientColor2:i,gradientColor2History:o,gradientColor2HistoryIndex:l}))}function kn(){ee.set({...oe,gradientColor1History:[...oe.gradientColor1History],gradientColor2History:[...oe.gradientColor2History]})}const Rn={mouseMove:{maxRadius:50,speed:.35,lineWidth:1,initialOpacity:.35,color:"rgb(100, 180, 255)",decayRate:.005},click:{maxRadius:85,speed:.9,lineWidth:2.2,initialOpacity:.95,color:"rgb(190, 230, 255)",decayRate:.008},ambient:{maxRadius:30,speed:.2,lineWidth:1,initialOpacity:.15,color:"rgb(150, 200, 255)",decayRate:.008},longPress:{maxRadius:150,speed:.3,lineWidth:3.5,initialOpacity:.85,color:"rgb(70, 140, 220)",decayRate:.006},glintExpire:{maxRadius:40,speed:.9,lineWidth:1,initialOpacity:.6,color:"rgba(255, 255, 230, 0.7)",decayRate:.02}},Cn=2e3,_a=128,In=16,xn=.05,En=30,Tn=400,On=10,Ht=.0011,Dn=.003,Aa=3e3,it=2,Pn=15,Gn="rgba(255, 255, 234, 0.95)",wa=4,Ln=1e3,zt=3,Yt=.15,Bn=.3,Wt=.2,$n=.5,qt=45,Nn=60,Pe=.6,Ge=.6,Vt=1,Xn=2.25,Fn=600,jt=.05,Hn=.25,Kt=.5,zn=1.25,Ut=.25,Yn=.55,Wn=6e4,qn=5e3,Se=[{x1:0,y1:0,x2:1,y2:1},{x1:.5,y1:0,x2:.5,y2:1},{x1:1,y1:0,x2:0,y2:1},{x1:1,y1:.5,x2:0,y2:.5},{x1:1,y1:1,x2:0,y2:0},{x1:.5,y1:1,x2:.5,y2:0},{x1:0,y1:1,x2:1,y2:0},{x1:0,y1:.5,x2:1,y2:.5}],ka=25e3,Vn=.55,jn="rgba(235, 245, 255, 0.7)",Kn="rgba(210, 230, 245, 0.5)",Zt=.5,Un=1.5,fe=15,Jt=5,Zn=12,Qt=500,Jn=1e3,Qn=.2,Ee=.02,ot=.12,ea=.005,rt=.05,ta=.02,ei=.3,st=Math.PI/4,aa=25,ti=100,ai=.25,na=10,ni=Math.PI/3,ii=2,ia=30,oi=70,ri=.25,ct={plane:{minSpeed:.25,maxSpeed:.5,minSize:25,maxSize:45,baseOpacity:.4,minDuration:1e4,maxDuration:2e4,chancePerInterval:.01},whaleShadow:{minSpeed:.18,maxSpeed:.32,minSize:40,maxSize:70,baseOpacity:.5,minDuration:1200,maxDuration:2500,chancePerInterval:.09}};function si(e){const t=Math.max(0,Math.min(1,e));return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}const Te=15,Oe=.04;function li(e,t,n){const i=(e*Oe+t*Oe*.3+n*.8)*Math.PI*2,a=(e*Oe*.7-t*Oe+n*.5)*Math.PI*2,o=Math.sin(i)*Te*.6+Math.sin(a)*Te*.4,l=Math.cos(i)*Te*.4+Math.cos(a)*Te*.6;return{dx:o,dy:l}}let oa=0,ra=0,sa=0,ci=0,la=0,ca=0,di=0,da=0;const Le=[],Be=[],$e=[],Ra=[],Ne=[],Xe=[],Ca=[],Fe=[],Ia=[],xa=[],Ea=[],Ta=[],Oa=[],Da=[],Pa=[],ui=()=>Le,We=()=>Be,Ga=()=>$e,ft=()=>Ra,mt=()=>Ne,vt=()=>Xe,Re=()=>Ca,He=()=>Fe;function hi(e){let t=Ia.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.maxRadius=e.maxRadius,t.opacity=e.opacity,t.speed=e.speed,t.lineWidth=e.lineWidth,t.color=e.color,t.isAmbient=e.isAmbient,t.decayRate=e.decayRate,t.id=oa++):t={...e,id:oa++},Le.push(t)}function gi(e){let t=Da.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.currentMaxRadius=e.currentMaxRadius,t.opacity=e.opacity,t.growthSpeed=e.growthSpeed,t.opacitySpeed=e.opacitySpeed,t.color=e.color,t.vx=e.vx,t.vy=e.vy,t.isWave=e.isWave,t.relativeXInSpawn=e.relativeXInSpawn,t.relativeYInSpawn=e.relativeYInSpawn,t.baseVx=e.baseVx,t.baseVy=e.baseVy,t.id=ra++):t={...e,id:ra++},Be.push(t)}function fi(e){let t=xa.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.opacity=e.opacity,t.decay=e.decay,t.color=e.color,t.id=sa++):t={...e,id:sa++},$e.push(t)}const mi=e=>{Ra.push({...e,id:ci++})};function vi(e){let t=Ea.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.opacity=e.opacity,t.decay=e.decay,t.color=e.color,t.id=la++):t={...e,id:la++},Ne.push(t)}function pi(e){let t=Ta.pop();t?(t.type=e.type,t.x=e.x,t.y=e.y,t.vx=e.vx,t.vy=e.vy,t.size=e.size,t.opacity=e.opacity,t.age=0,t.maxAge=e.maxAge,e.type==="whaleShadow"?(t.bodyAngle=e.bodyAngle??0,t.bodyAngleSpeed=e.bodyAngleSpeed,t.bodyAngleAmplitude=e.bodyAngleAmplitude,t.tailAngleOffset=e.tailAngleOffset??0,t.tailOscillationSpeed=e.tailOscillationSpeed,t.tailOscillationAmplitude=e.tailOscillationAmplitude):(delete t.bodyAngle,delete t.bodyAngleSpeed,delete t.bodyAngleAmplitude,delete t.tailAngleOffset,delete t.tailOscillationSpeed,delete t.tailOscillationAmplitude),t.id=ca++):t={...e,age:0,id:ca++},Xe.push(t)}const yi=e=>{Ca.push({...e,id:di++})};function Si(e){let t=Oa.pop();t?(t.anchorX=e.anchorX,t.anchorY=e.anchorY,t.particles=[],t.vx=e.vx,t.vy=e.vy,t.opacity=0,t.age=0,t.maxAge=e.maxAge,t.color=e.color,t.id=da++):t={...e,particles:[],opacity:0,age:0,id:da++},Fe.push(t)}function Mi(e,t){let n=Pa.pop();n?(n.x=t.x,n.y=t.y,n.size=t.size,n.opacity=0,n.initialRelativeX=t.initialRelativeX,n.initialRelativeY=t.initialRelativeY,n.appearAtAge=t.appearAtAge,n.maxOpacity=t.maxOpacity,n.particleAge=0,n.particleMaxAge=t.particleMaxAge):n={...t,opacity:0,particleAge:0},e.particles.push(n)}function bi(e){const t=Le.findIndex(n=>n.id===e.id);if(t!==-1){const n=Le.splice(t,1)[0];n&&Ia.push(n)}else console.warn(`Attempted to release ripple with ID ${e.id} not found in active list.`)}function _i(){if(Be.length>0){const e=Be.shift();if(e)return Da.push(e),e}return null}function Ai(e){const t=$e.findIndex(n=>n.id===e.id);if(t!==-1){const n=$e.splice(t,1)[0];n&&xa.push(n)}else console.warn(`Attempted to release glint with ID ${e.id} not found in active list.`)}function wi(e){const t=Ne.findIndex(n=>n.id===e.id);if(t!==-1){const n=Ne.splice(t,1)[0];n&&Ea.push(n)}else console.warn(`Attempted to release sunGlint with ID ${e.id} not found in active list.`)}function ki(e){const t=Xe.findIndex(n=>n.id===e.id);if(t!==-1){const n=Xe.splice(t,1)[0];n&&Ta.push(n)}else console.warn(`Attempted to release rareSighting with ID ${e.id} not found in active list.`)}function La(e){Pa.push(e)}function dt(e){const t=Fe.findIndex(n=>n.id===e.id);if(t!==-1){const n=Fe.splice(t,1)[0];if(n){for(const i of n.particles)La(i);n.particles=[],Oa.push(n)}}else console.warn(`Attempted to release foamStreak with ID ${e.id} not found in active list.`)}function we(e,t,n){const i=Rn[n];if(!i)throw console.error(`Unknown ripple type: ${n}. Ensure it is defined in RIPPLE_CONFIG.`),new Error(`Unknown ripple type: ${n}`);let a=i.speed,o=i.maxRadius;(n==="mouseMove"||n==="click")&&(a=i.speed*(.9+Math.random()*.2),o=i.maxRadius*(.9+Math.random()*.2)),hi({x:e,y:t,radius:0,maxRadius:o,opacity:i.initialOpacity,speed:a,lineWidth:i.lineWidth,color:i.color,isAmbient:n==="ambient",decayRate:i.decayRate})}function Ri(e){const t=e.globalAlpha,n=ui();for(let i=n.length-1;i>=0;i--){const a=n[i];if(a.radius+=a.speed,a.opacity-=a.decayRate,a.opacity<=0||a.radius>=a.maxRadius){bi(a);continue}e.beginPath(),e.arc(a.x,a.y,a.radius,0,Math.PI*2),e.lineWidth=a.lineWidth,e.strokeStyle=a.color,e.globalAlpha=Math.max(0,a.opacity),e.stroke()}e.globalAlpha=t}function ua(e,t,n){We().length>=_a&&_i();let i,a,o,l,r,u,g,h=1;const y=e*(1-Pe)/2,S=e*Pe,d=t*(1-Ge)/2,c=t*Ge,b=y+Math.random()*S,_=d+Math.random()*c;n?(i=Math.min(e,t)/2*(.8+Math.random()*.4),h=Wt+Math.random()*($n-Wt),a=(Math.random()-.5)*.2*h,o=(Math.random()-.5)*.2*h,l=Yt+Math.random()*(Bn-Yt),r=(Math.random()*.015+.005)*(Math.random()<.5?1:-1)*h,u=(Math.random()*15e-5+5e-5)*(Math.random()<.5?1:-1)*h,g=`hsl(210, ${68+Math.random()*10}%, ${qt+Math.random()*(Nn-qt)}%)`):(i=Math.random()*80+40,a=(Math.random()-.5)*.12,o=(Math.random()-.5)*.12,l=Math.random()*.03+.01,r=(Math.random()*.02+.01)*(Math.random()<.5?1:-1),u=(Math.random()*2e-4+1e-4)*(Math.random()<.5?1:-1),g=`hsl(${200+Math.random()*20}, ${65+Math.random()*20}%, ${35+Math.random()*30}%)`),gi({x:b,y:_,radius:Math.random()*i*.3+i*.2,currentMaxRadius:i,opacity:l,growthSpeed:r,opacitySpeed:u,color:g,vx:a,vy:o,isWave:n,relativeXInSpawn:S>0?(b-y)/S:.5,relativeYInSpawn:c>0?(_-d)/c:.5,baseVx:a,baseVy:o})}function Ci(e,t,n,i){const a=We();if(a.length===0)return;const o=e.globalCompositeOperation;e.globalCompositeOperation="screen";for(let l=a.length-1;l>=0;l--){const r=a[l];r.x+=r.vx,r.y+=r.vy,r.radius+=r.growthSpeed,r.opacity+=r.opacitySpeed,(r.opacity>.06||r.opacity<.005)&&(r.opacitySpeed*=-1,r.opacity=Math.max(.005,Math.min(.06,r.opacity))),(r.radius>r.currentMaxRadius||r.radius<r.currentMaxRadius*.2)&&(r.growthSpeed*=-1,r.radius=Math.max(10,Math.min(r.currentMaxRadius,r.radius))),(r.x-r.radius<0||r.x+r.radius>t)&&(r.vx*=-1,r.x=Math.max(r.radius,Math.min(t-r.radius,r.x))),(r.y-r.radius<0||r.y+r.radius>n)&&(r.vy*=-1,r.y=Math.max(r.radius,Math.min(n-r.radius,r.y)));const u=li(r.x,r.y,i),g=r.x+u.dx,h=r.y+u.dy,y=e.createRadialGradient(g,h,0,g,h,r.radius),S=r.color.substring(0,r.color.lastIndexOf(")"));y.addColorStop(0,`${S}, ${r.opacity})`),y.addColorStop(.7,`${S}, ${r.opacity*.5})`),y.addColorStop(1,`${S}, 0)`),e.fillStyle=y,e.beginPath(),e.arc(g,h,r.radius,0,Math.PI*2),e.fill()}e.globalCompositeOperation=o}function Ii(e,t){const n=We();if(n.length===0)return;const i=e*(1-Pe)/2,a=e*Pe,o=t*(1-Ge)/2,l=t*Ge,r=i+a/2,u=o+l/2,g=Math.sqrt(Math.pow(a/2,2)+Math.pow(l/2,2))+.001;for(const h of n){const y=h.relativeXInSpawn!==void 0?h.relativeXInSpawn:Math.random(),S=h.relativeYInSpawn!==void 0?h.relativeYInSpawn:Math.random();if(h.x=i+y*a,h.y=o+S*l,h.baseVx!==void 0&&h.baseVy!==void 0){const d=Math.sqrt(Math.pow(h.x-r,2)+Math.pow(h.y-u,2)),c=Math.min(1,d/g),b=Vt+c*(Xn-Vt);h.vx=h.baseVx*b,h.vy=h.baseVy*b}if(h.isWave){const d=Math.min(e,t)/2*(.8+Math.random()*.4);h.currentMaxRadius=d,h.radius=Math.random()*d*.3+d*.2}}}const ha=[[0,0],[0,1],[0,2],[1,0],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[1,2],[2,0],[2,1],[2,2]];function Ba(e,t){const n=ha[Math.floor(Math.random()*ha.length)],i=n[0],a=n[1],o=e/3,l=t/3,r=a*o+Math.random()*o,u=i*l+Math.random()*l;return{x:r,y:u}}function xi(e,t,n){if(mt().length>=Aa)return;const i=Math.random()*Math.PI*2,a=Math.random()*n*.5;vi({x:e+Math.cos(i)*a,y:t+Math.sin(i)*a,radius:Math.random()*.6+.4,opacity:Math.random()*.3+.7,decay:Math.random()*.008+.002,color:Gn})}function Ei(e,t){const n=Math.min(e,t),{x:i,y:a}=Ba(e,t);mi({x:i,y:a,baseRadius:n*.45,radiusAmplitude:n*.12,currentRadius:n*.45,baseOpacity:.35,opacityAmplitude:.3,currentOpacity:.35,pulseAngle:Math.random()*Math.PI*2,pulseSpeed:Ht+Math.random()*(Dn-Ht),vx:0,vy:0,relativeX:i/e,relativeY:a/t})}function Ti(e){const t=mt();if(t.length===0)return;const n=e.globalAlpha;for(let i=t.length-1;i>=0;i--){const a=t[i];a.x+=(Math.random()-.5)*.5,a.y+=(Math.random()-.5)*.5,a.opacity-=a.decay,a.radius+=.005,a.opacity<=0?wi(a):(e.beginPath(),e.arc(a.x,a.y,a.radius,0,Math.PI*2),e.fillStyle=a.color,e.globalAlpha=Math.max(0,a.opacity),e.fill())}e.globalAlpha=n}function Oi(e){const t=ft();if(t.length===0)return;const n=e.globalCompositeOperation;e.globalCompositeOperation="lighter";const i=e.globalAlpha;for(let a=0;a<t.length;a++){const o=t[a];o.pulseAngle+=o.pulseSpeed,o.currentRadius=o.baseRadius+Math.sin(o.pulseAngle)*o.radiusAmplitude,o.currentOpacity=o.baseOpacity+(Math.sin(o.pulseAngle*.7+Math.PI/3)*.5+.5)*o.opacityAmplitude,o.currentOpacity=Math.max(0,Math.min(1,o.currentOpacity));const l=o.baseOpacity+o.opacityAmplitude,r=l>0?Math.max(0,o.currentOpacity/l):0,u=l>0?o.baseOpacity/l:0;let g=0;if(r>0)if(r<=u){const y=u>0?r/u:0;g=Math.round(y*it)}else{const y=1-u,S=y>0?(r-u)/y:1;g=Math.round(it+S*(Pn-it))}g=Math.max(0,g);for(let y=0;y<g&&(xi(o.x,o.y,o.currentRadius),!(mt().length>=Aa));y++);const h=e.createRadialGradient(o.x,o.y,0,o.x,o.y,o.currentRadius);h.addColorStop(0,`rgba(255, 250, 220, ${o.currentOpacity})`),h.addColorStop(.25,`rgba(255, 235, 180, ${o.currentOpacity*.8})`),h.addColorStop(.6,`rgba(255, 220, 150, ${o.currentOpacity*.4})`),h.addColorStop(1,"rgba(255, 210, 130, 0)"),e.fillStyle=h,e.globalAlpha=1,e.beginPath(),e.arc(o.x,o.y,o.currentRadius,0,Math.PI*2),e.fill()}e.globalCompositeOperation=n,e.globalAlpha=i}function Di(e,t){const n=ft();if(n.length===0)return;const i=Math.min(e,t);for(const a of n){if(a.relativeX!==void 0&&a.relativeY!==void 0)a.x=a.relativeX*e,a.y=a.relativeY*t;else{console.warn("SunGlow missing relative coordinates during resize. Recalculating position.");const{x:o,y:l}=Ba(e,t);a.x=o,a.y=l,a.relativeX=o/e,a.relativeY=l/t}a.baseRadius=i*.45,a.radiusAmplitude=i*.12}}function Pi(e,t){Ga().length>=In||fi({x:Math.random()*e,y:Math.random()*t,radius:Math.random()*.25+.2,opacity:Math.random()*.4+.2,decay:Math.random()*.005+.005,color:"rgba(255, 255, 230, 0.85)"})}function Gi(e){const t=Ga();if(t.length===0)return[];const n=[],i=e.globalAlpha;for(let a=t.length-1;a>=0;a--){const o=t[a];o.opacity-=o.decay,o.opacity<=0?(n.push({x:o.x,y:o.y}),Ai(o)):(e.beginPath(),e.arc(o.x,o.y,o.radius,0,Math.PI*2),e.fillStyle=o.color,e.globalAlpha=Math.max(0,o.opacity),e.fill())}return e.globalAlpha=i,n}function Li(e,t){e.fillRect(t.x-t.size/2,t.y-t.size/8,t.size,t.size/4),e.fillRect(t.x-t.size/6,t.y-t.size/3,t.size/3,t.size*.8)}function Bi(e,t){t.bodyAngleSpeed&&t.bodyAngleAmplitude&&(t.bodyAngle=Math.sin(t.age*t.bodyAngleSpeed)*t.bodyAngleAmplitude),t.tailOscillationSpeed&&t.tailOscillationAmplitude&&(t.tailAngleOffset=Math.sin(t.age*t.tailOscillationSpeed)*t.tailOscillationAmplitude);const a=t.size*(1+Math.sin(t.age*.02)*.05),o=a/3.5,l=o*.9,r=a*.3;e.save(),e.translate(t.x,t.y),e.rotate(t.bodyAngle||0),e.beginPath(),e.ellipse(0,0,a/2,o/2,0,0,Math.PI*2),e.fill();const u=-a/2*.85,g=0;e.save(),e.translate(u,g),e.rotate(t.tailAngleOffset||0),e.beginPath(),e.ellipse(0,0,r/2,l/2,0,0,Math.PI*2),e.fill(),e.restore(),e.restore()}function $i(e,t,n){if(vt().length>=wa)return;const i=n,a=ct[i];if(!a){console.warn(`Configuration not found for rare sighting type: ${i}`);return}let o,l,r,u;const g=a.minSpeed+Math.random()*(a.maxSpeed-a.minSpeed);switch(i){case"plane":o=Math.random()<.5?-a.maxSize:e+a.maxSize,l=Math.random()*t*.3,r=(o<0?1:-1)*g,u=(Math.random()-.5)*g*.3;break;case"whaleShadow":o=Math.random()<.5?-a.maxSize*1.5:e+a.maxSize*1.5,l=t*(.5+Math.random()*.4),r=(o<0?1:-1)*g,u=(Math.random()-.5)*g*.1;break;default:console.warn(`Unhandled rare sighting type for creation: ${i}`);return}const h={type:i,x:o,y:l,vx:r,vy:u,size:a.minSize+Math.random()*(a.maxSize-a.minSize),opacity:a.baseOpacity,age:0,maxAge:a.minDuration+Math.random()*(a.maxDuration-a.minDuration),...i==="whaleShadow"?{bodyAngle:0,bodyAngleSpeed:(Math.random()*.003+.002)*(Math.random()<.5?1:-1),bodyAngleAmplitude:Math.PI/36,tailAngleOffset:0,tailOscillationSpeed:Math.random()*.04+.03,tailOscillationAmplitude:Math.PI/10}:{}};pi(h)}function Ni(e,t,n){const i=vt();if(i.length===0)return;const a=e.globalAlpha;for(let o=i.length-1;o>=0;o--){const l=i[o];l.age++,l.x+=l.vx,l.y+=l.vy;const r=l.size*2,u=l.age>l.maxAge,g=l.x<-r||l.x>t+r||l.y<-r||l.y>n+r;if(u||g){ki(l);continue}let h=l.opacity;const y=.8;if(l.age/l.maxAge>y){const S=(l.age/l.maxAge-y)/(1-y);h=l.opacity*(1-S)}switch(h=Math.max(0,h),e.globalAlpha=h,e.fillStyle=`rgba(10, 10, 20, ${h*.7})`,l.type){case"plane":Li(e,l);break;case"whaleShadow":Bi(e,l);break;default:console.warn(`No drawing function implemented for rare sighting type: ${l.type}`)}}e.globalAlpha=a}function Xi(e,t){if(Re().length>0){console.warn("Attempted to re-initialize water grains. Skipping.");return}for(let n=0;n<Fn;n++){const i=jt+Math.random()*(Hn-jt),a=Math.random()*Math.PI*2,o=20+Math.random()*10,l=Math.random()*e,r=Math.random()*t;yi({x:l,y:r,vx:Math.cos(a)*i,vy:Math.sin(a)*i,size:Kt+Math.random()*(zn-Kt),opacity:Ut+Math.random()*(Yn-Ut),color:`hsl(210, ${65+Math.random()*10}%, ${o}%)`,relativeX:e>0?l/e:.5,relativeY:t>0?r/t:.5})}console.log(`Initialized ${Re().length} water grains.`)}function Fi(e,t,n){const i=Re();if(i.length===0)return;const a=e.globalAlpha;for(const o of i)o.x+=o.vx,o.y+=o.vy,o.x<-o.size?o.x=t+o.size:o.x>t+o.size&&(o.x=-o.size),o.y<-o.size?o.y=n+o.size:o.y>n+o.size&&(o.y=-o.size),e.beginPath(),e.arc(o.x,o.y,o.size,0,Math.PI*2),e.fillStyle=o.color,e.globalAlpha=Math.max(0,o.opacity*a),e.fill();e.globalAlpha=a}function Hi(e,t){const n=Re();if(n.length!==0)for(const i of n)i.relativeX!==void 0&&i.relativeY!==void 0?(i.x=i.relativeX*e,i.y=i.relativeY*t):(console.warn("WaterGrain missing relative coordinates during resize. Re-randomizing position."),i.x=Math.random()*e,i.y=Math.random()*t,i.relativeX=e>0?i.x/e:.5,i.relativeY=t>0?i.y/t:.5)}function zi(e,t){if(He().length>=ka)return;const n=Math.floor(Math.random()*3);let i,a,o,l,r;n===0?(i=Math.random()*e,a=-fe,o=(Math.random()-.5)*ot*.5,l=ea+Math.random()*(rt-ea),r=Math.PI/2+(Math.random()-.5)*(Math.PI/6)):n===1?(i=-fe,a=Math.random()*t,o=Ee+Math.random()*(ot-Ee),l=(Math.random()-.5)*rt*.4,r=(Math.random()-.5)*(Math.PI/4)):(i=e+fe,a=Math.random()*t,o=-(Ee+Math.random()*(ot-Ee)),l=(Math.random()-.5)*rt*.4,r=Math.PI+(Math.random()-.5)*(Math.PI/4));let u=0;const g=(d,c,b,_,w,v)=>{let F=c,k=b,A=_;for(let D=0;D<w;D++){const L=Jt+Math.random()*(Zn-Jt);if(A+=(Math.random()-.5)*2*st,v){const T=(A-_+Math.PI*3)%(Math.PI*2)-Math.PI;Math.abs(T)>st*1.5&&(A=_+Math.sign(T)*st*1.5)}else n===0?A=Math.max(Math.PI/4,Math.min(3*Math.PI/4,A)):n===1?A=Math.max(-Math.PI/3,Math.min(Math.PI/3,A)):A=Math.max(2*Math.PI/3,Math.min(4*Math.PI/3,A));const x=F+Math.cos(A)*L,P=k+Math.sin(A)*L;for(let T=0;T<ii;T++){const Y=Zt+Math.random()*(Un-Zt),te=A+Math.PI/2,m=(Math.random()-.5)*fe*.8,V=F+Math.cos(te)*m,G=k+Math.sin(te)*m;Mi(d,{x:V,y:G,initialRelativeX:V,initialRelativeY:G,size:Y,opacity:0,appearAtAge:u++*ei,maxOpacity:.5+Math.random()*.4,particleAge:0,particleMaxAge:ia+Math.random()*(oi-ia)})}if(F=x,k=P,!v&&Math.random()<ai&&D<w-na/2&&D>2){const T=(Math.random()<.5?-1:1)*ni*(.7+Math.random()*.6),Y=Math.floor(na*(.5+Math.random()*.5));g(d,F,k,A+T,Y,!0)}}},h=aa+Math.floor(Math.random()*(ti-aa+1));g(0,0,r,h,!1);const y={anchorX:i,anchorY:a,particles:[],vx:o,vy:l,opacity:0,age:0,maxAge:Qt+Math.random()*(Jn-Qt),color:Math.random()<.6?jn:Kn};Si(y);const S=He().find(d=>d.anchorX===i&&d.anchorY===a&&d.age===0);if(S){if(g(S,0,0,r,h,!1),S.particles.length<5){dt(S);return}}else console.warn("Could not find newly added streak to generate particles into.")}function Yi(e,t,n){const i=He();if(i.length===0)return;const a=e.globalAlpha,o=e.globalCompositeOperation;e.globalCompositeOperation="lighter";for(let l=i.length-1;l>=0;l--){const r=i[l];r.age++,r.anchorX+=r.vx,r.anchorY+=r.vy;const u=r.maxAge*Qn;if(r.age<u?r.opacity=r.age/u:r.age>r.maxAge-u?r.opacity=1-(r.age-(r.maxAge-u))/u:r.opacity=1,r.opacity=Math.max(0,Math.min(1,r.opacity)),r.opacity<=0&&r.age>u){dt(r);continue}let g=!0;const h=fe*5,y=fe*5;if(r.anchorX>-h&&r.anchorX<t+h&&r.anchorY>-y&&r.anchorY<n+y)g=!1;else{g=!0;for(const S of r.particles){const d=r.anchorX+S.x,c=r.anchorY+S.y;if(d>-S.size&&d<t+S.size&&c>-S.size&&c<n+S.size){g=!1;break}}}if(g&&r.age>u*2){dt(r);continue}e.fillStyle=r.color;for(let S=r.particles.length-1;S>=0;S--){const d=r.particles[S];if(r.age<d.appearAtAge)continue;if(d.particleAge++,d.particleAge>d.particleMaxAge){d.opacity=0,La(d),r.particles.splice(S,1);continue}else{const A=d.particleMaxAge*ri;d.particleAge<A?d.opacity=d.particleAge/A*d.maxOpacity:d.particleAge>d.particleMaxAge-A?d.opacity=(1-(d.particleAge-(d.particleMaxAge-A))/A)*d.maxOpacity:d.opacity=d.maxOpacity,d.opacity=Math.max(0,Math.min(d.maxOpacity,d.opacity))}if(d.opacity<=.001)continue;d.x+=(Math.random()-.5)*ta,d.y+=(Math.random()-.5)*ta;const c=d.x-d.initialRelativeX,b=d.y-d.initialRelativeY,_=c*c+b*b,w=fe*.5;if(_>w*w){const A=Math.sqrt(_);d.x=d.initialRelativeX+c/A*w,d.y=d.initialRelativeY+b/A*w}const v=r.anchorX+d.x,F=r.anchorY+d.y,k=r.opacity*d.opacity;k<=.001||(e.globalAlpha=k*a,e.beginPath(),e.arc(v,F,d.size,0,Math.PI*2),e.fill())}}e.globalCompositeOperation=o,e.globalAlpha=a}var Wi=J('<canvas class="pointer-events-none fixed top-0 left-0 -z-10 h-full w-full svelte-1mnusik"></canvas>');function qi(e,t){ve(t,!1);let n=Ot(t,"gradientColor1",8,"hsl(210, 70%, 50%)"),i=Ot(t,"gradientColor2",8,"hsl(200, 68%, 50%)"),a=H(),o,l=0,r=0,u=0,g=1,h=0,y={...Se[0]},S=0;ht(()=>{const c=s(a);if(!c){console.error("Canvas not available onMount");return}const b=c.getContext("2d");if(!b){console.error("Context not available onMount");return}Y(),console.log(`[onMount after initial resize] Canvas: ${c.width}x${c.height}`);let _=0,w=0,v=null,F,k=!1,A=0;function D(){const m=Date.now();if(h===0&&(h=m,S=m,u=(r+1)%Se.length,g=0),m-h>=Wn&&g>=1&&(r=u,u=(r+1)%Se.length,g=0,h=m,S=m),g<1){const V=m-S;g=Math.min(1,V/qn);const G=si(g),O=Se[r],W=Se[u];y.x1=O.x1+(W.x1-O.x1)*G,y.y1=O.y1+(W.y1-O.y1)*G,y.x2=O.x2+(W.x2-O.x2)*G,y.y2=O.y2+(W.y2-O.y2)*G}else y={...Se[u]},r=u}const L=m=>{if(v){if(!k){const G=m.pageX-v.x,O=m.pageY-v.y;Math.sqrt(G*G+O*O)>On&&(k=!0)}const V=Date.now();V-_>En&&(we(m.pageX,m.pageY,"mouseMove"),_=V)}},x=m=>{w=Date.now(),v={x:m.pageX,y:m.pageY},k=!1},P=m=>{if(!v||w===0)return;const V=Date.now()-w;k||(V>=Tn?we(m.pageX,m.pageY,"longPress"):we(m.pageX,m.pageY,"mouseMove")),v=null,w=0,k=!1},T=()=>{c&&we(Math.random()*c.width,Math.random()*c.height,"ambient")};function Y(){c&&(c.width=window.innerWidth,c.height=window.innerHeight,console.log(`[resizeCanvas] Canvas: ${c.width}x${c.height}`),Ii(c.width,c.height),Di(c.width,c.height),Hi(c.width,c.height))}if(window.addEventListener("resize",Y),window.addEventListener("mousemove",L),window.addEventListener("mousedown",x),window.addEventListener("mouseup",P),typeof window<"u"&&(F=window.setInterval(T,Cn)),c){for(let m=0;m<_a-zt;m++)ua(c.width,c.height,!1);for(let m=0;m<zt;m++)ua(c.width,c.height,!0);Ei(c.width,c.height),Xi(c.width,c.height)}console.log(`[onMount End] Canvas: ${c.width}x${c.height}, ShimmerSpots: ${We().length}, Grains: ${Re().length}, SunGlows: ${ft().length}`);function te(){if(!b||!c){o=requestAnimationFrame(te);return}l+=.002,D();const m=y.x1*c.width,V=y.y1*c.height,G=y.x2*c.width,O=y.y2*c.height,W=b.createLinearGradient(m,V,G,O),ae=typeof n()=="string"&&n().includes("hsl")?n():"hsl(210, 70%, 50%)",ne=typeof i()=="string"&&i().includes("hsl")?i():"hsl(200, 68%, 50%)";if(W.addColorStop(0,ae),W.addColorStop(1,ne),b.fillStyle=W,b.fillRect(0,0,c.width,c.height),Ri(b),Ci(b,c.width,c.height,l),Fi(b,c.width,c.height),Oi(b),Ti(b),A+=16.67,A>=Ln){for(const ue in ct){const be=ue,Ie=ct[be];typeof Ie.chancePerInterval=="number"&&Math.random()<Ie.chancePerInterval&&vt().length<wa&&$i(c.width,c.height,be)}A=0}Ni(b,c.width,c.height),Math.random()<xn&&Pi(c.width,c.height),Gi(b).forEach(ue=>we(ue.x,ue.y,"glintExpire")),Math.random()<Vn&&He().length<ka&&zi(c.width,c.height),Yi(b,c.width,c.height),o=requestAnimationFrame(te)}return te(),()=>{window.removeEventListener("resize",Y),window.removeEventListener("mousemove",L),window.removeEventListener("mousedown",x),window.removeEventListener("mouseup",P),F&&clearInterval(F),o&&cancelAnimationFrame(o)}}),me();var d=Wi();ke(d,c=>E(a,c),()=>s(a)),Z(e,d),pe()}var Vi=J('<div class="professional-hsl-picker svelte-1bvbq9v"><div class="picker-header svelte-1bvbq9v"><div class="control-buttons svelte-1bvbq9v"><button title="Sync both gradients">ðŸ”—</button> <button title="Lock current selection">ðŸ”’</button> <button class="control-btn reset-btn svelte-1bvbq9v" title="Reset to defaults">â†º</button></div></div> <div class="slider-section svelte-1bvbq9v"><div class="slider-label svelte-1bvbq9v">Hue (0Â° - 360Â°)</div> <div class="slider-container svelte-1bvbq9v"><canvas class="color-slider svelte-1bvbq9v"></canvas></div></div> <div class="slider-section svelte-1bvbq9v"><div class="slider-label svelte-1bvbq9v">Saturation (0% - 100%)</div> <div class="slider-container svelte-1bvbq9v"><canvas class="color-slider svelte-1bvbq9v"></canvas></div></div> <div class="slider-section svelte-1bvbq9v"><div class="slider-label svelte-1bvbq9v">Lightness (0% - 100%)</div> <div class="slider-container svelte-1bvbq9v"><canvas class="color-slider svelte-1bvbq9v"></canvas></div></div> <div class="color-preview svelte-1bvbq9v"><div class="preview-item svelte-1bvbq9v"><div class="preview-swatch svelte-1bvbq9v"></div> <span class="preview-label svelte-1bvbq9v"> </span></div> <div class="preview-item svelte-1bvbq9v"><div class="preview-swatch svelte-1bvbq9v"></div> <span class="preview-label svelte-1bvbq9v"> </span></div></div> <div class="instructions svelte-1bvbq9v"><p>Click: Set Gradient 1 â€¢ Drag indicators to move</p></div></div>');function ji(e,t){ve(t,!1);const n=H(),i=H();let a=H(),o=H(),l=H(),r,u=H(null),g=H(null),h=H(null),y=H(!1),S=H(!1),d=!1,c=null,b=null;const _=320,w=40,v=16;let F=0,k={x:0,targetX:0,scale:1,opacity:.9},A={x:0,targetX:0,scale:1,opacity:.9},D={x:0,targetX:0,scale:1,opacity:.9},L={x:0,targetX:0,scale:1,opacity:.9},x={x:0,targetX:0,scale:1,opacity:.9},P={x:0,targetX:0,scale:1,opacity:.9},T;function Y(){k.targetX=v+s(n).h/360*(_-2*v),A.targetX=v+s(i).h/360*(_-2*v),k.x=k.targetX,A.x=A.targetX,D.targetX=v+s(n).s/100*(_-2*v),L.targetX=v+s(i).s/100*(_-2*v),D.x=D.targetX,L.x=L.targetX,x.targetX=v+s(n).l/100*(_-2*v),P.targetX=v+s(i).l/100*(_-2*v),x.x=x.targetX,P.x=P.targetX}function te(f,p){const M=Math.max(0,Math.min(1,(f-v)/(_-2*v)));switch(p){case"hue":return M*360;case"saturation":return M*100;case"lightness":return M*100}}function m(){if(!s(u)||!s(g)||!s(h)){r=requestAnimationFrame(m);return}F+=.016,d||(k.x+=(k.targetX-k.x)*.15,A.x+=(A.targetX-A.x)*.15,D.x+=(D.targetX-D.x)*.15,L.x+=(L.targetX-L.x)*.15,x.x+=(x.targetX-x.x)*.15,P.x+=(P.targetX-P.x)*.15),[k,A,D,L,x,P].forEach((p,M)=>{const B=M%2+1;c===B&&(b==="hue"&&M<2||b==="saturation"&&M>=2&&M<4||b==="lightness"&&M>=4)?(p.scale=1+.2*Math.sin(F*8),p.opacity=.95):(p.scale+=(1-p.scale)*.1,p.opacity+=(.9-p.opacity)*.1)}),V(),r=requestAnimationFrame(m)}function V(){G(),O(),W()}function G(){if(!s(u))return;s(u).clearRect(0,0,_,w);const f=s(u).createLinearGradient(v,0,_-v,0);for(let p=0;p<=12;p++){const M=p/12*360;f.addColorStop(p/12,`hsl(${M}, 70%, 50%)`)}K(u,s(u).fillStyle=f),ne(s(u),v,8,_-2*v,w-16,8),s(u).fill(),K(u,s(u).strokeStyle="rgba(255, 255, 255, 0.2)"),K(u,s(u).lineWidth=1),ne(s(u),v,8,_-2*v,w-16,8),s(u).stroke(),ae(s(u),k,"#3B82F6","1"),ae(s(u),A,"#EC4899","2")}function O(){if(!s(g))return;s(g).clearRect(0,0,_,w);const f=(s(n).h+s(i).h)/2,p=s(g).createLinearGradient(v,0,_-v,0);p.addColorStop(0,`hsl(${f}, 0%, 50%)`),p.addColorStop(1,`hsl(${f}, 100%, 50%)`),K(g,s(g).fillStyle=p),ne(s(g),v,8,_-2*v,w-16,8),s(g).fill(),K(g,s(g).strokeStyle="rgba(255, 255, 255, 0.2)"),K(g,s(g).lineWidth=1),ne(s(g),v,8,_-2*v,w-16,8),s(g).stroke(),ae(s(g),D,"#3B82F6","1"),ae(s(g),L,"#EC4899","2")}function W(){if(!s(h))return;s(h).clearRect(0,0,_,w);const f=(s(n).h+s(i).h)/2,p=(s(n).s+s(i).s)/2,M=s(h).createLinearGradient(v,0,_-v,0);M.addColorStop(0,`hsl(${f}, ${p}%, 0%)`),M.addColorStop(.25,`hsl(${f}, ${p}%, 25%)`),M.addColorStop(.5,`hsl(${f}, ${p}%, 50%)`),M.addColorStop(.75,`hsl(${f}, ${p}%, 75%)`),M.addColorStop(1,`hsl(${f}, ${p}%, 100%)`),K(h,s(h).fillStyle=M),ne(s(h),v,8,_-2*v,w-16,8),s(h).fill(),K(h,s(h).strokeStyle="rgba(255, 255, 255, 0.2)"),K(h,s(h).lineWidth=1),ne(s(h),v,8,_-2*v,w-16,8),s(h).stroke(),ae(s(h),x,"#3B82F6","1"),ae(s(h),P,"#EC4899","2")}function ae(f,p,M,B){const $=p.x,N=w/2,X=p.scale,he=p.opacity;f.save(),f.globalAlpha=he;const _e=f.createRadialGradient($,N,0,$,N,20*X);_e.addColorStop(0,M+"40"),_e.addColorStop(1,M+"00"),f.fillStyle=_e,f.fillRect($-20*X,N-20*X,40*X,40*X),f.beginPath(),f.arc($,N,10*X,0,Math.PI*2),f.fillStyle=M,f.fill(),f.strokeStyle="rgba(255, 255, 255, 0.9)",f.lineWidth=2,f.stroke(),f.beginPath(),f.arc($,N,6*X,0,Math.PI*2),f.fillStyle="rgba(255, 255, 255, 0.3)",f.fill(),f.fillStyle="white",f.font=`bold ${8*X}px system-ui`,f.textAlign="center",f.textBaseline="middle",f.fillText(B,$,N),f.restore()}function ne(f,p,M,B,$,N){f.beginPath(),f.moveTo(p+N,M),f.lineTo(p+B-N,M),f.quadraticCurveTo(p+B,M,p+B,M+N),f.lineTo(p+B,M+$-N),f.quadraticCurveTo(p+B,M+$,p+B-N,M+$),f.lineTo(p+N,M+$),f.quadraticCurveTo(p,M+$,p,M+$-N),f.lineTo(p,M+N),f.quadraticCurveTo(p,M,p+N,M),f.closePath()}function Ce(f,p){let M,B,$;switch(p){case"hue":M=s(a),B=k,$=A;break;case"saturation":M=s(o),B=D,$=L;break;case"lightness":M=s(l),B=x,$=P;break;default:return}if(!M)return;const N=M.getBoundingClientRect(),X=f.clientX-N.left,he=Math.abs(X-B.x),_e=Math.abs(X-$.x);if(he<20)d=!0,c=1,b=p,f.preventDefault();else if(_e<20)d=!0,c=2,b=p,f.preventDefault();else{const za=te(X,p);be(p,za,1)}}function qe(f){if(!d||!b||!c)return;let p,M,B;switch(b){case"hue":p=s(a),M=k,B=A;break;case"saturation":p=s(o),M=D,B=L;break;case"lightness":p=s(l),M=x,B=P;break;default:return}if(!p)return;const $=p.getBoundingClientRect(),N=f.clientX-$.left,X=Math.max(v,Math.min(_-v,N));c===1?(M.targetX=X,M.x=X):(B.targetX=X,B.x=X);const he=te(X,b);be(b,he,c)}function ue(){d=!1,c=null,b=null}function be(f,p,M){const B=M===1?s(n):s(i);if(!B)return;let $=B.h,N=B.s,X=B.l;switch(f){case"hue":$=p;break;case"saturation":N=p;break;case"lightness":X=p;break}M===1?(Xt($,N,X),E(n,{h:$,s:N,l:X})):(Ft($,N,X),E(i,{h:$,s:N,l:X}))}function Ie(){E(S,!s(S))}function $a(){E(y,!s(y))}function Na(){Xt(210,70,50),Ft(200,68,50)}ht(()=>{if(!(!s(a)||!s(o)||!s(l))&&(E(u,s(a).getContext("2d")),E(g,s(o).getContext("2d")),E(h,s(l).getContext("2d")),!(!s(u)||!s(g)||!s(h))))return K(a,s(a).width=_),K(a,s(a).height=w),K(o,s(o).width=_),K(o,s(o).height=w),K(l,s(l).width=_),K(l,s(l).height=w),Y(),m(),document.addEventListener("mousemove",qe),document.addEventListener("mouseup",ue),T=ee.subscribe(f=>{(f.gradientColor1||f.gradientColor2)&&Y()}),()=>{r&&cancelAnimationFrame(r),document.removeEventListener("mousemove",qe),document.removeEventListener("mouseup",ue),T&&T()}}),tn(()=>{r&&cancelAnimationFrame(r)}),le(()=>$t,()=>{E(n,$t()||{h:210,s:70,l:50})}),le(()=>Nt,()=>{E(i,Nt()||{h:200,s:68,l:50})}),le(()=>(s(n),s(i),s(u),s(g),s(h)),()=>{s(n)&&s(i)&&typeof s(n).h=="number"&&typeof s(i).h=="number"&&(Y(),s(u)&&s(g)&&s(h)&&V())}),ze(),me();var Ve=Vi(),je=R(Ve),pt=R(je),Ke=R(pt);let yt;var Ue=I(Ke,2);let St;var Xa=I(Ue,2);C(pt),C(je);var Ze=I(je,2),Mt=I(R(Ze),2),bt=R(Mt);ke(bt,f=>E(a,f),()=>s(a)),C(Mt),C(Ze);var Je=I(Ze,2),_t=I(R(Je),2),At=R(_t);ke(At,f=>E(o,f),()=>s(o)),C(_t),C(Je);var Qe=I(Je,2),wt=I(R(Qe),2),kt=R(wt);ke(kt,f=>E(l,f),()=>s(l)),C(wt),C(Qe);var Rt=I(Qe,2),et=R(Rt),Ct=R(et),It=I(Ct,2),Fa=R(It);C(It),C(et);var xt=I(et,2),Et=R(xt),Tt=I(Et,2),Ha=R(Tt);C(Tt),C(xt),C(Rt),fa(2),C(Ve),re((f,p,M,B,$,N,X,he)=>{yt=ge(Ke,1,"control-btn svelte-1bvbq9v",null,yt,f),St=ge(Ue,1,"control-btn svelte-1bvbq9v",null,St,p),lt(Ct,`background-color: hsl(${s(n),z(()=>s(n).h)??""}, ${s(n),z(()=>s(n).s)??""}%, ${s(n),z(()=>s(n).l)??""}%)`),ce(Fa,`Gradient 1: ${M??""}Â°, ${B??""}%, ${$??""}%`),lt(Et,`background-color: hsl(${s(i),z(()=>s(i).h)??""}, ${s(i),z(()=>s(i).s)??""}%, ${s(i),z(()=>s(i).l)??""}%)`),ce(Ha,`Gradient 2: ${N??""}Â°, ${X??""}%, ${he??""}%`)},[()=>({active:s(S)}),()=>({active:s(y)}),()=>(s(n),z(()=>Math.round(s(n).h))),()=>(s(n),z(()=>Math.round(s(n).s))),()=>(s(n),z(()=>Math.round(s(n).l))),()=>(s(i),z(()=>Math.round(s(i).h))),()=>(s(i),z(()=>Math.round(s(i).s))),()=>(s(i),z(()=>Math.round(s(i).l)))]),q("click",Ke,Ie),q("click",Ue,$a),q("click",Xa,Na),q("mousedown",bt,f=>Ce(f,"hue")),q("mousedown",At,f=>Ce(f,"saturation")),q("mousedown",kt,f=>Ce(f,"lightness")),Z(e,Ve),pe()}var Ki=J('<div class="timer-settings-panel svelte-1m1yjnh"><h3 class="panel-title svelte-1m1yjnh">Timer Settings</h3> <div class="settings-grid svelte-1m1yjnh"><div class="setting-item svelte-1m1yjnh"><label for="work-duration" class="setting-label svelte-1m1yjnh">Work (min)</label> <input id="work-duration" type="number" min="1" max="120" class="setting-input svelte-1m1yjnh"/></div> <div class="setting-item svelte-1m1yjnh"><label for="short-break-duration" class="setting-label svelte-1m1yjnh">Short Break (min)</label> <input id="short-break-duration" type="number" min="1" max="60" class="setting-input svelte-1m1yjnh"/></div> <div class="setting-item svelte-1m1yjnh"><label for="long-break-duration" class="setting-label svelte-1m1yjnh">Long Break (min)</label> <input id="long-break-duration" type="number" min="1" max="120" class="setting-input svelte-1m1yjnh"/></div> <div class="setting-item svelte-1m1yjnh"><label for="sessions-before-long-break" class="setting-label svelte-1m1yjnh">Sessions Before Long Break</label> <input id="sessions-before-long-break" type="number" min="1" max="10" class="setting-input svelte-1m1yjnh"/></div></div> <div class="toggles-section svelte-1m1yjnh"><div class="toggle-item svelte-1m1yjnh"><label for="auto-cycle" class="toggle-label svelte-1m1yjnh">Auto-cycle sessions</label> <input id="auto-cycle" type="checkbox" class="toggle-input svelte-1m1yjnh"/></div> <div class="toggle-item svelte-1m1yjnh"><label for="floating-enabled" class="toggle-label svelte-1m1yjnh">Enable floating effects</label> <input id="floating-enabled" type="checkbox" class="toggle-input svelte-1m1yjnh"/></div></div> <button type="button" class="reset-button svelte-1m1yjnh">Reset to Defaults</button></div>');function Ui(e,t){ve(t,!1);const[n,i]=Ye(),a=()=>se(Q,"$timerSettings",n),o=()=>se(ee,"$backgroundSettings",n);let l=H(a().workDuration/60),r=H(a().shortBreakDuration/60),u=H(a().longBreakDuration/60),g=H(a().sessionsBeforeLongBreak),h=H(a().autoCycle),y=H(o().isFloatingEnabled);Q.subscribe(m=>{m.workDuration/60!==s(l)&&E(l,m.workDuration/60),m.shortBreakDuration/60!==s(r)&&E(r,m.shortBreakDuration/60),m.longBreakDuration/60!==s(u)&&E(u,m.longBreakDuration/60),m.sessionsBeforeLongBreak!==s(g)&&E(g,m.sessionsBeforeLongBreak),m.autoCycle!==s(h)&&E(h,m.autoCycle)}),ee.subscribe(m=>{m.isFloatingEnabled!==s(y)&&E(y,m.isFloatingEnabled)});function S(){kn(),Q.set({workDuration:1500,shortBreakDuration:300,longBreakDuration:900,sessionsBeforeLongBreak:4,autoCycle:!1})}le(()=>(s(l),s(r),s(u),s(g),s(h),a(),Q),()=>{const m={workDuration:Math.max(1,s(l))*60,shortBreakDuration:Math.max(1,s(r))*60,longBreakDuration:Math.max(1,s(u))*60,sessionsBeforeLongBreak:Math.max(1,s(g)),autoCycle:s(h)};(a().workDuration!==m.workDuration||a().shortBreakDuration!==m.shortBreakDuration||a().longBreakDuration!==m.longBreakDuration||a().sessionsBeforeLongBreak!==m.sessionsBeforeLongBreak||a().autoCycle!==m.autoCycle)&&Q.set(m)}),le(()=>(o(),s(y),ee),()=>{o().isFloatingEnabled!==s(y)&&ee.update(m=>({...m,isFloatingEnabled:s(y)}))}),ze(),me();var d=Ki(),c=I(R(d),2),b=R(c),_=I(R(b),2);ye(_),C(b);var w=I(b,2),v=I(R(w),2);ye(v),C(w);var F=I(w,2),k=I(R(F),2);ye(k),C(F);var A=I(F,2),D=I(R(A),2);ye(D),C(A),C(c);var L=I(c,2),x=R(L),P=I(R(x),2);ye(P),C(x);var T=I(x,2),Y=I(R(T),2);ye(Y),C(T),C(L);var te=I(L,2);C(d),xe(_,()=>s(l),m=>E(l,m)),xe(v,()=>s(r),m=>E(r,m)),xe(k,()=>s(u),m=>E(u,m)),xe(D,()=>s(g),m=>E(g,m)),Gt(P,()=>s(h),m=>E(h,m)),Gt(Y,()=>s(y),m=>E(y,m)),q("click",te,S),Z(e,d),pe(),i()}var Zi=J("<div><!></div>"),Ji=J("<div><!></div>"),Qi=J('<div role="toolbar" aria-label="Background Effects Dock"><div class="dock-container svelte-up6kvm"><div title="Professional HSL Color Picker"><div class="dock-icon svelte-up6kvm">ðŸŽ¨</div></div> <div class="dock-item svelte-up6kvm" title="Water Effects"><div class="dock-icon svelte-up6kvm">ðŸŒŠ</div></div> <div class="dock-item svelte-up6kvm" title="Light Effects"><div class="dock-icon svelte-up6kvm">âœ¨</div></div> <div class="dock-item svelte-up6kvm" title="Particle Effects"><div class="dock-icon svelte-up6kvm">ðŸ’«</div></div> <div title="Timer Settings"><div class="dock-icon svelte-up6kvm">â±ï¸</div></div> <div class="dock-item svelte-up6kvm" title="Settings"><div class="dock-icon svelte-up6kvm">âš™ï¸</div></div></div> <!> <!></div>');function eo(e,t){ve(t,!1);let n=H(),i=H(!1),a,o=0,l=0,r=H(!1),u=H(!1);const g=100,h=3e3;ht(()=>{const G=W=>{o=W.clientY,y()},O=()=>{l=window.innerHeight};return window.addEventListener("mousemove",G),window.addEventListener("resize",O),O(),()=>{window.removeEventListener("mousemove",G),window.removeEventListener("resize",O),a&&clearTimeout(a)}});function y(){const O=l-o<=g;O&&!s(i)?S():!O&&s(i)&&c()}function S(){E(i,!0),a&&(clearTimeout(a),a=0)}function d(){E(i,!1)}function c(){a&&clearTimeout(a),a=setTimeout(d,h)}function b(){S()}function _(){c()}function w(){E(r,!s(r)),E(u,!1),s(r)&&S()}function v(){E(u,!s(u)),E(r,!1),s(u)&&S()}function F(G){switch(G){case"colors":w();break;case"timer":v();break}}me();var k=Qi();let A;var D=R(k),L=R(D);let x;var P=I(L,8);let T;fa(2),C(D);var Y=I(D,2);{var te=G=>{var O=Zi();let W;var ae=R(O);ji(ae,{}),C(O),re(ne=>W=ge(O,1,"panel-container color-grid-panel svelte-up6kvm",null,W,ne),[()=>({visible:s(r)})]),Z(G,O)};Me(Y,G=>{s(r)&&G(te)})}var m=I(Y,2);{var V=G=>{var O=Ji();let W;var ae=R(O);Ui(ae,{}),C(O),re(ne=>W=ge(O,1,"panel-container timer-settings-panel svelte-up6kvm",null,W,ne),[()=>({visible:s(u)})]),Z(G,O)};Me(m,G=>{s(u)&&G(V)})}C(k),ke(k,G=>E(n,G),()=>s(n)),re((G,O,W)=>{A=ge(k,1,"floating-dock svelte-up6kvm",null,A,G),x=ge(L,1,"dock-item svelte-up6kvm",null,x,O),T=ge(P,1,"dock-item svelte-up6kvm",null,T,W)},[()=>({visible:s(i)}),()=>({active:s(r)}),()=>({active:s(u)})]),q("click",L,()=>F("colors")),q("click",P,()=>F("timer")),q("mouseenter",k,b),q("mouseleave",k,_),Z(e,k),pe()}var to=J('<meta name="description" content="A beautiful Pomodoro timer with interactive background effects"/>'),ao=J('<span class="text-sm text-white/60 block mt-1"> </span>'),no=J('<div class="text-lg font-medium text-white/80"> <!></div>'),io=J('<!> <!> <main class="relative z-10 flex min-h-screen flex-col items-center justify-center px-4 py-8 transition-all duration-1000 ease-in-out"><div class="w-full max-w-md space-y-8 text-center"><!> <!> <!></div></main>',1);function uo(e,t){ve(t,!1);const[n,i]=Ye(),a=()=>se(ee,"$backgroundSettings",n),o=()=>se(j,"$timerState",n),l=()=>se(Q,"$timerSettings",n);function r(w){switch(w){case"work":return"Focus Session";case"shortBreak":return"Short Break";case"longBreak":return"Long Break";default:return"Session"}}me();var u=io();an(w=>{var v=to();Ja.title="Locked-In Pomodoro Timer",Z(w,v)});var g=Za(u);qi(g,{get gradientColor1(){return a().gradientColor1},get gradientColor2(){return a().gradientColor2}});var h=I(g,2);eo(h,{});var y=I(h,2),S=R(y),d=R(S);yn(d,{});var c=I(d,2);{var b=w=>{var v=no(),F=R(v),k=I(F);{var A=D=>{var L=ao(),x=R(L);C(L),re(()=>ce(x,`Session ${o().completedSessions+1} of ${l().sessionsBeforeLongBreak??""}`)),Z(D,L)};Me(k,D=>{o().currentSession.type==="work"&&D(A)})}C(v),re(D=>ce(F,`${D??""} `),[()=>r(o().currentSession.type)]),Z(w,v)};Me(c,w=>{o().currentSession&&w(b)})}var _=I(c,2);_n(_,{}),C(S),C(y),Z(e,u),pe(),i()}export{uo as component};
