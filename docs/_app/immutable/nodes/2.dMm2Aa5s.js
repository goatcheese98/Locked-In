import"../chunks/DsnmJJEf.js";import{i as fe}from"../chunks/BhtY715V.js";import{w as de,aE as Wn,aF as qn,aG as Vn,aH as jn,aI as Kn,aJ as Un,F as Ae,e as H,M as fn,aK as Zn,p as me,aL as le,aM as ze,l as J,t as re,a as Z,m as ve,T as E,R as F,n as k,o as R,q as I,h as s,aN as K,aO as mn,f as Jn,aP as Qn}from"../chunks/BGg158e2.js";import{b as ea,l as vn,w as ut,d as ta,g as ie,s as ce,e as q,o as gt,c as na,f as aa}from"../chunks/By67yA7Y.js";import{i as Se,s as Ye,a as se,p as Ot,b as ke}from"../chunks/BxKPKBtI.js";const Dt=[...` 	
\r\fÂ \v\uFEFF`];function ia(e,t,a){var i=e==null?"":""+e;if(a){for(var n in a)if(a[n])i=i?i+" "+n:n;else if(i.length)for(var o=n.length,l=0;(l=i.indexOf(n,l))>=0;){var r=l+o;(l===0||Dt.includes(i[l-1]))&&(r===i.length||Dt.includes(i[r]))?i=(l===0?"":i.substring(0,l))+i.substring(r+1):l=r}}return i===""?null:i}function oa(e,t){return e==null?null:String(e)}function ge(e,t,a,i,n,o){var l=e.__className;if(de||l!==a||l===void 0){var r=ia(a,i,o);(!de||r!==e.getAttribute("class"))&&(r==null?e.removeAttribute("class"):e.className=r),e.__className=a}else if(o&&n!==o)for(var u in o){var h=!!o[u];(n==null||h!==!!n[u])&&e.classList.toggle(u,h)}return o}function lt(e,t,a,i){var n=e.__style;if(de||n!==t){var o=oa(t);(!de||o!==e.getAttribute("style"))&&(o==null?e.removeAttribute("style"):e.style.cssText=o),e.__style=t}return i}const ra=Symbol("is custom element"),sa=Symbol("is html");function pe(e){if(de){var t=!1,a=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var i=e.value;De(e,"value",null),e.value=i}if(e.hasAttribute("checked")){var n=e.checked;De(e,"checked",null),e.checked=n}}};e.__on_r=a,jn(a),ea()}}function De(e,t,a,i){var n=la(e);de&&(n[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||n[t]!==(n[t]=a)&&(t==="loading"&&(e[Kn]=a),a==null?e.removeAttribute(t):typeof a!="string"&&ca(e).includes(t)?e[t]=a:e.setAttribute(t,a))}function la(e){return e.__attributes??={[ra]:e.nodeName.includes("-"),[sa]:e.namespaceURI===Wn}}var Pt=new Map;function ca(e){var t=Pt.get(e.nodeName);if(t)return t;Pt.set(e.nodeName,t=[]);for(var a,i=e,n=Element.prototype;n!==i;){a=Vn(i);for(var o in a)a[o].set&&t.push(o);i=qn(i)}return t}function xe(e,t,a=t){var i=Un(),n=new WeakSet;vn(e,"input",o=>{var l=o?e.defaultValue:e.value;if(l=tt(e)?nt(l):l,a(l),Ae!==null&&n.add(Ae),i&&l!==(l=t())){var r=e.selectionStart,u=e.selectionEnd;e.value=l??"",u!==null&&(e.selectionStart=r,e.selectionEnd=Math.min(u,e.value.length))}}),(de&&e.defaultValue!==e.value||H(t)==null&&e.value)&&(a(tt(e)?nt(e.value):e.value),Ae!==null&&n.add(Ae)),fn(()=>{var o=t();if(e===document.activeElement){var l=Zn??Ae;if(n.has(l))return}tt(e)&&o===nt(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function Gt(e,t,a=t){vn(e,"change",i=>{var n=i?e.defaultChecked:e.checked;a(n)}),(de&&e.defaultChecked!==e.checked||H(t)==null)&&a(e.checked),fn(()=>{var i=t();e.checked=!!i})}function tt(e){var t=e.type;return t==="number"||t==="range"}function nt(e){return e===""?null:+e}const pn="zenZoneTimerSettings",ht={workDuration:Math.max(1,25)*60,shortBreakDuration:Math.max(1,5)*60,longBreakDuration:Math.max(1,15)*60,sessionsBeforeLongBreak:Math.max(1,4),autoCycle:!1};function at(e){const t={...ht,...e};return t.workDuration=Math.max(1,Math.floor(t.workDuration/60))*60,t.shortBreakDuration=Math.max(1,Math.floor(t.shortBreakDuration/60))*60,t.longBreakDuration=Math.max(1,Math.floor(t.longBreakDuration/60))*60,t.sessionsBeforeLongBreak=Math.max(1,Math.floor(t.sessionsBeforeLongBreak)),t}function yn(){if(typeof window<"u"&&window.localStorage){const e=localStorage.getItem(pn);if(e)try{const t=JSON.parse(e);if(t&&typeof t.workDuration=="number"&&typeof t.shortBreakDuration=="number"&&typeof t.longBreakDuration=="number"&&typeof t.sessionsBeforeLongBreak=="number"&&typeof t.autoCycle=="boolean")return at(t);if(t)return console.warn("Partially invalid settings found in localStorage, attempting to sanitize."),at(t)}catch(t){console.error("Error parsing timer settings from localStorage:",t)}}return at(ht)}const da=yn(),ua={currentSession:"Work",timeRemaining:da.workDuration,isRunning:!1,currentCycleCount:0},Q=ut(yn()),j=ut(ua);typeof window<"u"&&window.localStorage&&Q.subscribe(e=>{try{localStorage.setItem(pn,JSON.stringify(e))}catch(t){console.error("Error saving timer settings to localStorage:",t)}});const ga=ta(j,e=>{const t=Math.floor(e.timeRemaining/60),a=e.timeRemaining%60;return`${String(t).padStart(2,"0")}:${String(a).padStart(2,"0")}`});let U;function Sn(){const e=ie(j);if(e.isRunning&&e.timeRemaining>0)return;let t=e.timeRemaining;if(t<=0){const a=ie(Q);switch(e.currentSession){case"Work":t=a.workDuration;break;case"Short Break":t=a.shortBreakDuration;break;case"Long Break":t=a.longBreakDuration;break}}j.update(a=>({...a,isRunning:!0,timeRemaining:t})),U&&clearInterval(U),U=setInterval(()=>{const a=ie(j);a.isRunning&&a.timeRemaining>0?j.update(i=>({...i,timeRemaining:i.timeRemaining-1})):a.isRunning&&a.timeRemaining<=0&&(U&&clearInterval(U),U=void 0,ma())},1e3)}function ha(){U&&(clearInterval(U),U=void 0),j.update(e=>({...e,isRunning:!1}))}function fa(){U&&(clearInterval(U),U=void 0),j.update(e=>{let t,a,i=e.currentCycleCount,n=ht;return Q.subscribe(l=>{n=l})(),e.currentSession==="Work"?(i++,i>=n.sessionsBeforeLongBreak?(t="Long Break",a=n.longBreakDuration,i=0):(t="Short Break",a=n.shortBreakDuration)):(t="Work",a=n.workDuration),{...e,currentSession:t,timeRemaining:a,isRunning:!1,currentCycleCount:i}})}function Mn(e){U&&(clearInterval(U),U=void 0);const t=ie(Q),a=e||ie(j).currentSession;let i=t.workDuration,n=ie(j).currentCycleCount;switch(a){case"Work":i=t.workDuration,e==="Work"&&(n=0);break;case"Short Break":i=t.shortBreakDuration;break;case"Long Break":i=t.longBreakDuration;break}j.update(o=>({...o,currentSession:a,timeRemaining:i,isRunning:!1,currentCycleCount:n}))}function Lt(e){j.update(t=>{if(t.isRunning)return t;const a=Math.max(60,e);return Q.update(i=>{const n={...i};switch(t.currentSession){case"Work":n.workDuration=a;break;case"Short Break":n.shortBreakDuration=a;break;case"Long Break":n.longBreakDuration=a;break}return n}),{...t,timeRemaining:a}})}function ma(){const e=ie(j),t=ie(Q);let a,i=e.currentCycleCount;e.currentSession==="Work"?(i++,i>=t.sessionsBeforeLongBreak?(a="Long Break",i=0):a="Short Break"):a="Work",j.update(n=>({...n,currentSession:a,isRunning:!1,currentCycleCount:i})),Mn(a),t.autoCycle&&Sn()}var va=J('<div class="mx-2 flex scale-75 flex-col items-center justify-center opacity-60 transition-opacity hover:opacity-100"><button title="Increase minutes" aria-label="Increase minutes" class="p-1 text-gray-300 hover:text-teal-300 disabled:opacity-30"><svg class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg></button> <button title="Decrease minutes" aria-label="Decrease minutes" class="p-1 text-gray-300 hover:text-teal-300 disabled:opacity-30"><svg class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div>'),pa=J('<div class="mt-2 mb-8 text-center"><p class="mb-2 text-xl font-semibold text-teal-400" id="current-session-label"> </p> <div class="relative flex items-center justify-center font-mono text-8xl tracking-tighter text-gray-100 tabular-nums select-none svelte-1sjqirj" aria-live="polite" aria-atomic="true"><!> <span class="w-32 text-center"> </span> <span class="w-8 text-center">:</span> <span class="w-32 text-center"> </span></div> <div class="mt-6 h-2.5 w-full overflow-hidden rounded-full bg-slate-700 shadow-inner"><div class="h-2.5 rounded-full bg-teal-500 transition-all duration-1000 ease-linear" aria-valuemin="0" aria-valuemax="100" aria-labelledby="current-session-label" role="progressbar"></div></div></div>');function ya(e,t){me(t,!1);const[a,i]=Ye(),n=()=>se(j,"$timerState",a),o=()=>se(Q,"$timerSettings",a),l=()=>se(ga,"$formattedTime",a),r=F(),u=F();let h=F(0);function g(){if(n().isRunning)return;const x=Math.floor(n().timeRemaining/60),P=n().timeRemaining%60,T=(x+1)*60+P;Lt(T)}function p(){if(n().isRunning)return;const x=Math.floor(n().timeRemaining/60),P=n().timeRemaining%60,T=Math.max(0,x-1)*60+P;Lt(T)}le(()=>(n(),o()),()=>{const x=n(),P=o();let T=P.workDuration;x.currentSession==="Short Break"?T=P.shortBreakDuration:x.currentSession==="Long Break"&&(T=P.longBreakDuration),T=Math.max(1,T),T>0?E(h,Math.max(0,100-x.timeRemaining/T*100)):E(h,x.timeRemaining>0?0:100)}),le(()=>l(),()=>{E(r,l().substring(0,2))}),le(()=>l(),()=>{E(u,l().substring(3,5))}),ze(),fe();var y=pa(),d=k(y),c=k(d,!0);R(d);var M=I(d,2),_=k(M);{var w=x=>{var P=va(),T=k(P),Y=I(T,2);R(P),re(()=>{T.disabled=(n(),H(()=>n().isRunning)),Y.disabled=(n(),H(()=>n().isRunning||n().timeRemaining<120&&n().timeRemaining%60===0&&n().timeRemaining/60<=1||n().timeRemaining<60))}),q("click",T,g),q("click",Y,p),Z(x,P)};Se(_,x=>{n(),H(()=>!n().isRunning)&&x(w)})}var v=I(_,2),X=k(v,!0);R(v);var C=I(v,4),A=k(C,!0);R(C),R(M);var D=I(M,2),L=k(D);R(D),R(y),re(()=>{ce(c,(n(),H(()=>n().currentSession))),ce(X,s(r)),ce(A,s(u)),lt(L,`width: ${s(h)??""}%;`),De(L,"aria-valuenow",s(h))}),Z(e,y),ve(),i()}var Sa=J(`<button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
             text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-teal-300
             focus:ring-2 focus:ring-teal-400
             focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50"> </button>`),Ma=J(`<button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
             text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-amber-300
             focus:ring-2 focus:ring-amber-300
             focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50" aria-label="Pause timer">Pause</button>`),ba=J(`<div class="mt-6 flex justify-center space-x-2"><!> <button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
           text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-sky-300
           focus:ring-2 focus:ring-sky-400
           focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50" aria-label="Skip to next session" title="Skip to next session">Skip <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="ml-1 inline h-5 w-5 align-text-bottom"><path fill-rule="evenodd" d="M2 10a.75.75 0 0 1 .75-.75h12.59l-2.1-1.95a.75.75 0 1 1 1.02-1.1l3.5 3.25a.75.75 0 0 1 0 1.1l-3.5 3.25a.75.75 0 1 1-1.02-1.1l2.1-1.95H2.75A.75.75 0 0 1 2 10Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M18 10a.75.75 0 0 1-.75.75h-.008a.75.75 0 0 1 0-1.5h.008A.75.75 0 0 1 18 10Z" clip-rule="evenodd"></path></svg></button> <button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
           text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-rose-300
           focus:ring-2 focus:ring-rose-400
           focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50" aria-label="Reset current session timer" title="Reset current session">Reset <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="ml-1 inline h-5 w-5 align-text-bottom"><path fill-rule="evenodd" d="M15.323 3.407a.75.75 0 0 1 0 1.06l-2.096 2.096A6.5 6.5 0 0 1 10 16.5a6.501 6.501 0 0 1-6.414-5.523.75.75 0 0 1 1.482-.236A5.001 5.001 0 0 0 10 15a5 5 0 0 0 4.19-2.402l-1.618 1.617a.75.75 0 1 1-1.06 1.061l3.25-3.25a.75.75 0 0 1 0-1.06l-3.25-3.25a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M4.677 12.593a.75.75 0 0 1 0-1.06l2.096-2.096A6.5 6.5 0 0 1 10 3.5a6.501 6.501 0 0 1 6.414 5.523.75.75 0 0 1-1.482.236A5.001 5.001 0 0 0 10 5a5 5 0 0 0-4.19 2.402l1.618-1.617a.75.75 0 1 1 1.06-1.061L5.238 8.075a.75.75 0 0 1 0 1.06l3.25 3.25a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd"></path></svg></button></div>`);function _a(e,t){me(t,!1);const[a,i]=Ye(),n=()=>se(j,"$timerState",a),o=()=>se(Q,"$timerSettings",a);let l=F();le(()=>(n(),o()),()=>{const d=n(),c=o();E(l,!d.timeRemaining||d.currentSession==="Work"&&d.timeRemaining===c.workDuration||d.currentSession==="Short Break"&&d.timeRemaining===c.shortBreakDuration||d.currentSession==="Long Break"&&d.timeRemaining===c.longBreakDuration)}),ze(),fe();var r=ba(),u=k(r);{var h=d=>{var c=Sa(),M=k(c,!0);R(c),re(()=>{De(c,"aria-label",s(l)?"Start timer":"Resume timer"),ce(M,s(l)?"Start":"Resume")}),q("click",c,function(..._){Sn?.apply(this,_)}),Z(d,c)},g=d=>{var c=Ma();q("click",c,function(...M){ha?.apply(this,M)}),Z(d,c)};Se(u,d=>{n(),H(()=>!n().isRunning)?d(h):d(g,!1)})}var p=I(u,2),y=I(p,2);R(r),re(()=>{p.disabled=(n(),H(()=>n().isRunning)),y.disabled=(n(),s(l),H(()=>n().isRunning&&s(l)))}),q("click",p,function(...d){fa?.apply(this,d)}),q("click",y,function(...d){Mn?.apply(this,d)}),Z(e,r),ve(),i()}const Bt=20,oe={gradientColor1:"hsl(210, 70%, 50%)",gradientColor2:"hsl(200, 68%, 50%)",isFloatingEnabled:!0,gradientColor1History:["hsl(210, 70%, 50%)"],gradientColor1HistoryIndex:0,gradientColor2History:["hsl(200, 68%, 50%)"],gradientColor2HistoryIndex:0,isAutoCyclingColor1:!1,isAutoCyclingColor2:!1};function bn(e){if(!e)return null;const t=e.match(/hsl\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)/);return t?{h:parseInt(t[1]),s:parseInt(t[2]),l:parseInt(t[3])}:null}function $t(){const e=ie(ee);return bn(e.gradientColor1)||{h:210,s:70,l:50}}function Nt(){const e=ie(ee);return bn(e.gradientColor2)||{h:200,s:68,l:50}}function Aa(){let e={...oe,gradientColor1History:[...oe.gradientColor1History],gradientColor2History:[...oe.gradientColor2History]};if(typeof localStorage<"u"){const t=localStorage.getItem("backgroundSettings");if(t)try{const a=JSON.parse(t);e={...e,...a,isAutoCyclingColor1:a.isAutoCyclingColor1??oe.isAutoCyclingColor1,isAutoCyclingColor2:a.isAutoCyclingColor2??oe.isAutoCyclingColor2},!a.gradientColor1History||a.gradientColor1History.length===0?(e.gradientColor1History=[e.gradientColor1],e.gradientColor1HistoryIndex=0):(e.gradientColor1HistoryIndex=Math.max(0,Math.min(a.gradientColor1HistoryIndex??0,a.gradientColor1History.length-1)),e.gradientColor1=a.gradientColor1History[e.gradientColor1HistoryIndex]),!a.gradientColor2History||a.gradientColor2History.length===0?(e.gradientColor2History=[e.gradientColor2],e.gradientColor2HistoryIndex=0):(e.gradientColor2HistoryIndex=Math.max(0,Math.min(a.gradientColor2HistoryIndex??0,a.gradientColor2History.length-1)),e.gradientColor2=a.gradientColor2History[e.gradientColor2HistoryIndex])}catch(a){return console.error("Failed to parse background settings from localStorage",a),{...oe,gradientColor1History:[...oe.gradientColor1History],gradientColor2History:[...oe.gradientColor2History]}}}return e}const wa=Aa(),ee=ut(wa);typeof localStorage<"u"&&ee.subscribe(e=>{localStorage.setItem("backgroundSettings",JSON.stringify(e))});function _n(e,t,a){let i=[...t];a<i.length-1&&(i=i.slice(0,a+1)),i.push(e),i.length>Bt&&(i=i.slice(i.length-Bt));const n=i.length-1;return{history:i,index:n}}function Xt(e,t,a){let i;typeof e=="string"?i=e:i=`hsl(${Math.round(e)}, ${Math.round(t)}%, ${Math.round(a)}%)`;const n=ie(ee);if(n.gradientColor1===i)return;const{history:o,index:l}=_n(i,n.gradientColor1History,n.gradientColor1HistoryIndex);ee.update(r=>({...r,gradientColor1:i,gradientColor1History:o,gradientColor1HistoryIndex:l}))}function Ft(e,t,a){let i;typeof e=="string"?i=e:i=`hsl(${Math.round(e)}, ${Math.round(t)}%, ${Math.round(a)}%)`;const n=ie(ee);if(n.gradientColor2===i)return;const{history:o,index:l}=_n(i,n.gradientColor2History,n.gradientColor2HistoryIndex);ee.update(r=>({...r,gradientColor2:i,gradientColor2History:o,gradientColor2HistoryIndex:l}))}function ka(){ee.set({...oe,gradientColor1History:[...oe.gradientColor1History],gradientColor2History:[...oe.gradientColor2History]})}const Ra={mouseMove:{maxRadius:50,speed:.35,lineWidth:1,initialOpacity:.35,color:"rgb(100, 180, 255)",decayRate:.005},click:{maxRadius:85,speed:.9,lineWidth:2.2,initialOpacity:.95,color:"rgb(190, 230, 255)",decayRate:.008},ambient:{maxRadius:30,speed:.2,lineWidth:1,initialOpacity:.15,color:"rgb(150, 200, 255)",decayRate:.008},longPress:{maxRadius:150,speed:.3,lineWidth:3.5,initialOpacity:.85,color:"rgb(70, 140, 220)",decayRate:.006},glintExpire:{maxRadius:40,speed:.9,lineWidth:1,initialOpacity:.6,color:"rgba(255, 255, 230, 0.7)",decayRate:.02}},Ia=2e3,An=128,Ca=16,xa=.05,Ea=30,Ta=400,Oa=10,Ht=.0011,Da=.003,wn=3e3,it=2,Pa=15,Ga="rgba(255, 255, 234, 0.95)",kn=4,La=1e3,zt=3,Yt=.15,Ba=.3,Wt=.2,$a=.5,qt=45,Na=60,Pe=.6,Ge=.6,Vt=1,Xa=2.25,Fa=600,jt=.05,Ha=.25,Kt=.5,za=1.25,Ut=.25,Ya=.55,Wa=6e4,qa=5e3,ye=[{x1:0,y1:0,x2:1,y2:1},{x1:.5,y1:0,x2:.5,y2:1},{x1:1,y1:0,x2:0,y2:1},{x1:1,y1:.5,x2:0,y2:.5},{x1:1,y1:1,x2:0,y2:0},{x1:.5,y1:1,x2:.5,y2:0},{x1:0,y1:1,x2:1,y2:0},{x1:0,y1:.5,x2:1,y2:.5}],Rn=25e3,Va=.55,ja="rgba(235, 245, 255, 0.7)",Ka="rgba(210, 230, 245, 0.5)",Zt=.5,Ua=1.5,he=15,Jt=5,Za=12,Qt=500,Ja=1e3,Qa=.2,Ee=.02,ot=.12,en=.005,rt=.05,tn=.02,ei=.3,st=Math.PI/4,nn=25,ti=100,ni=.25,an=10,ai=Math.PI/3,ii=2,on=30,oi=70,ri=.25,ct={plane:{minSpeed:.25,maxSpeed:.5,minSize:25,maxSize:45,baseOpacity:.4,minDuration:1e4,maxDuration:2e4,chancePerInterval:.01},whaleShadow:{minSpeed:.18,maxSpeed:.32,minSize:40,maxSize:70,baseOpacity:.5,minDuration:1200,maxDuration:2500,chancePerInterval:.09}};function si(e){const t=Math.max(0,Math.min(1,e));return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}const Te=15,Oe=.04;function li(e,t,a){const i=(e*Oe+t*Oe*.3+a*.8)*Math.PI*2,n=(e*Oe*.7-t*Oe+a*.5)*Math.PI*2,o=Math.sin(i)*Te*.6+Math.sin(n)*Te*.4,l=Math.cos(i)*Te*.4+Math.cos(n)*Te*.6;return{dx:o,dy:l}}let rn=0,sn=0,ln=0,ci=0,cn=0,dn=0,di=0,un=0;const Le=[],Be=[],$e=[],In=[],Ne=[],Xe=[],Cn=[],Fe=[],xn=[],En=[],Tn=[],On=[],Dn=[],Pn=[],Gn=[],ui=()=>Le,We=()=>Be,Ln=()=>$e,ft=()=>In,mt=()=>Ne,vt=()=>Xe,Re=()=>Cn,He=()=>Fe;function gi(e){let t=xn.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.maxRadius=e.maxRadius,t.opacity=e.opacity,t.speed=e.speed,t.lineWidth=e.lineWidth,t.color=e.color,t.isAmbient=e.isAmbient,t.decayRate=e.decayRate,t.id=rn++):t={...e,id:rn++},Le.push(t)}function hi(e){let t=Pn.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.currentMaxRadius=e.currentMaxRadius,t.opacity=e.opacity,t.growthSpeed=e.growthSpeed,t.opacitySpeed=e.opacitySpeed,t.color=e.color,t.vx=e.vx,t.vy=e.vy,t.isWave=e.isWave,t.relativeXInSpawn=e.relativeXInSpawn,t.relativeYInSpawn=e.relativeYInSpawn,t.baseVx=e.baseVx,t.baseVy=e.baseVy,t.id=sn++):t={...e,id:sn++},Be.push(t)}function fi(e){let t=En.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.opacity=e.opacity,t.decay=e.decay,t.color=e.color,t.id=ln++):t={...e,id:ln++},$e.push(t)}const mi=e=>{In.push({...e,id:ci++})};function vi(e){let t=Tn.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.opacity=e.opacity,t.decay=e.decay,t.color=e.color,t.id=cn++):t={...e,id:cn++},Ne.push(t)}function pi(e){let t=On.pop();t?(t.type=e.type,t.x=e.x,t.y=e.y,t.vx=e.vx,t.vy=e.vy,t.size=e.size,t.opacity=e.opacity,t.age=0,t.maxAge=e.maxAge,e.type==="whaleShadow"?(t.bodyAngle=e.bodyAngle??0,t.bodyAngleSpeed=e.bodyAngleSpeed,t.bodyAngleAmplitude=e.bodyAngleAmplitude,t.tailAngleOffset=e.tailAngleOffset??0,t.tailOscillationSpeed=e.tailOscillationSpeed,t.tailOscillationAmplitude=e.tailOscillationAmplitude):(delete t.bodyAngle,delete t.bodyAngleSpeed,delete t.bodyAngleAmplitude,delete t.tailAngleOffset,delete t.tailOscillationSpeed,delete t.tailOscillationAmplitude),t.id=dn++):t={...e,age:0,id:dn++},Xe.push(t)}const yi=e=>{Cn.push({...e,id:di++})};function Si(e){let t=Dn.pop();t?(t.anchorX=e.anchorX,t.anchorY=e.anchorY,t.particles=[],t.vx=e.vx,t.vy=e.vy,t.opacity=0,t.age=0,t.maxAge=e.maxAge,t.color=e.color,t.id=un++):t={...e,particles:[],opacity:0,age:0,id:un++},Fe.push(t)}function Mi(e,t){let a=Gn.pop();a?(a.x=t.x,a.y=t.y,a.size=t.size,a.opacity=0,a.initialRelativeX=t.initialRelativeX,a.initialRelativeY=t.initialRelativeY,a.appearAtAge=t.appearAtAge,a.maxOpacity=t.maxOpacity,a.particleAge=0,a.particleMaxAge=t.particleMaxAge):a={...t,opacity:0,particleAge:0},e.particles.push(a)}function bi(e){const t=Le.findIndex(a=>a.id===e.id);if(t!==-1){const a=Le.splice(t,1)[0];a&&xn.push(a)}else console.warn(`Attempted to release ripple with ID ${e.id} not found in active list.`)}function _i(){if(Be.length>0){const e=Be.shift();if(e)return Pn.push(e),e}return null}function Ai(e){const t=$e.findIndex(a=>a.id===e.id);if(t!==-1){const a=$e.splice(t,1)[0];a&&En.push(a)}else console.warn(`Attempted to release glint with ID ${e.id} not found in active list.`)}function wi(e){const t=Ne.findIndex(a=>a.id===e.id);if(t!==-1){const a=Ne.splice(t,1)[0];a&&Tn.push(a)}else console.warn(`Attempted to release sunGlint with ID ${e.id} not found in active list.`)}function ki(e){const t=Xe.findIndex(a=>a.id===e.id);if(t!==-1){const a=Xe.splice(t,1)[0];a&&On.push(a)}else console.warn(`Attempted to release rareSighting with ID ${e.id} not found in active list.`)}function Bn(e){Gn.push(e)}function dt(e){const t=Fe.findIndex(a=>a.id===e.id);if(t!==-1){const a=Fe.splice(t,1)[0];if(a){for(const i of a.particles)Bn(i);a.particles=[],Dn.push(a)}}else console.warn(`Attempted to release foamStreak with ID ${e.id} not found in active list.`)}function we(e,t,a){const i=Ra[a];if(!i)throw console.error(`Unknown ripple type: ${a}. Ensure it is defined in RIPPLE_CONFIG.`),new Error(`Unknown ripple type: ${a}`);let n=i.speed,o=i.maxRadius;(a==="mouseMove"||a==="click")&&(n=i.speed*(.9+Math.random()*.2),o=i.maxRadius*(.9+Math.random()*.2)),gi({x:e,y:t,radius:0,maxRadius:o,opacity:i.initialOpacity,speed:n,lineWidth:i.lineWidth,color:i.color,isAmbient:a==="ambient",decayRate:i.decayRate})}function Ri(e){const t=e.globalAlpha,a=ui();for(let i=a.length-1;i>=0;i--){const n=a[i];if(n.radius+=n.speed,n.opacity-=n.decayRate,n.opacity<=0||n.radius>=n.maxRadius){bi(n);continue}e.beginPath(),e.arc(n.x,n.y,n.radius,0,Math.PI*2),e.lineWidth=n.lineWidth,e.strokeStyle=n.color,e.globalAlpha=Math.max(0,n.opacity),e.stroke()}e.globalAlpha=t}function gn(e,t,a){We().length>=An&&_i();let i,n,o,l,r,u,h,g=1;const p=e*(1-Pe)/2,y=e*Pe,d=t*(1-Ge)/2,c=t*Ge,M=p+Math.random()*y,_=d+Math.random()*c;a?(i=Math.min(e,t)/2*(.8+Math.random()*.4),g=Wt+Math.random()*($a-Wt),n=(Math.random()-.5)*.2*g,o=(Math.random()-.5)*.2*g,l=Yt+Math.random()*(Ba-Yt),r=(Math.random()*.015+.005)*(Math.random()<.5?1:-1)*g,u=(Math.random()*15e-5+5e-5)*(Math.random()<.5?1:-1)*g,h=`hsl(210, ${68+Math.random()*10}%, ${qt+Math.random()*(Na-qt)}%)`):(i=Math.random()*80+40,n=(Math.random()-.5)*.12,o=(Math.random()-.5)*.12,l=Math.random()*.03+.01,r=(Math.random()*.02+.01)*(Math.random()<.5?1:-1),u=(Math.random()*2e-4+1e-4)*(Math.random()<.5?1:-1),h=`hsl(${200+Math.random()*20}, ${65+Math.random()*20}%, ${35+Math.random()*30}%)`),hi({x:M,y:_,radius:Math.random()*i*.3+i*.2,currentMaxRadius:i,opacity:l,growthSpeed:r,opacitySpeed:u,color:h,vx:n,vy:o,isWave:a,relativeXInSpawn:y>0?(M-p)/y:.5,relativeYInSpawn:c>0?(_-d)/c:.5,baseVx:n,baseVy:o})}function Ii(e,t,a,i){const n=We();if(n.length===0)return;const o=e.globalCompositeOperation;e.globalCompositeOperation="screen";for(let l=n.length-1;l>=0;l--){const r=n[l];r.x+=r.vx,r.y+=r.vy,r.radius+=r.growthSpeed,r.opacity+=r.opacitySpeed,(r.opacity>.06||r.opacity<.005)&&(r.opacitySpeed*=-1,r.opacity=Math.max(.005,Math.min(.06,r.opacity))),(r.radius>r.currentMaxRadius||r.radius<r.currentMaxRadius*.2)&&(r.growthSpeed*=-1,r.radius=Math.max(10,Math.min(r.currentMaxRadius,r.radius))),(r.x-r.radius<0||r.x+r.radius>t)&&(r.vx*=-1,r.x=Math.max(r.radius,Math.min(t-r.radius,r.x))),(r.y-r.radius<0||r.y+r.radius>a)&&(r.vy*=-1,r.y=Math.max(r.radius,Math.min(a-r.radius,r.y)));const u=li(r.x,r.y,i),h=r.x+u.dx,g=r.y+u.dy,p=e.createRadialGradient(h,g,0,h,g,r.radius),y=r.color.substring(0,r.color.lastIndexOf(")"));p.addColorStop(0,`${y}, ${r.opacity})`),p.addColorStop(.7,`${y}, ${r.opacity*.5})`),p.addColorStop(1,`${y}, 0)`),e.fillStyle=p,e.beginPath(),e.arc(h,g,r.radius,0,Math.PI*2),e.fill()}e.globalCompositeOperation=o}function Ci(e,t){const a=We();if(a.length===0)return;const i=e*(1-Pe)/2,n=e*Pe,o=t*(1-Ge)/2,l=t*Ge,r=i+n/2,u=o+l/2,h=Math.sqrt(Math.pow(n/2,2)+Math.pow(l/2,2))+.001;for(const g of a){const p=g.relativeXInSpawn!==void 0?g.relativeXInSpawn:Math.random(),y=g.relativeYInSpawn!==void 0?g.relativeYInSpawn:Math.random();if(g.x=i+p*n,g.y=o+y*l,g.baseVx!==void 0&&g.baseVy!==void 0){const d=Math.sqrt(Math.pow(g.x-r,2)+Math.pow(g.y-u,2)),c=Math.min(1,d/h),M=Vt+c*(Xa-Vt);g.vx=g.baseVx*M,g.vy=g.baseVy*M}if(g.isWave){const d=Math.min(e,t)/2*(.8+Math.random()*.4);g.currentMaxRadius=d,g.radius=Math.random()*d*.3+d*.2}}}const hn=[[0,0],[0,1],[0,2],[1,0],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[1,2],[2,0],[2,1],[2,2]];function $n(e,t){const a=hn[Math.floor(Math.random()*hn.length)],i=a[0],n=a[1],o=e/3,l=t/3,r=n*o+Math.random()*o,u=i*l+Math.random()*l;return{x:r,y:u}}function xi(e,t,a){if(mt().length>=wn)return;const i=Math.random()*Math.PI*2,n=Math.random()*a*.5;vi({x:e+Math.cos(i)*n,y:t+Math.sin(i)*n,radius:Math.random()*.6+.4,opacity:Math.random()*.3+.7,decay:Math.random()*.008+.002,color:Ga})}function Ei(e,t){const a=Math.min(e,t),{x:i,y:n}=$n(e,t);mi({x:i,y:n,baseRadius:a*.45,radiusAmplitude:a*.12,currentRadius:a*.45,baseOpacity:.35,opacityAmplitude:.3,currentOpacity:.35,pulseAngle:Math.random()*Math.PI*2,pulseSpeed:Ht+Math.random()*(Da-Ht),vx:0,vy:0,relativeX:i/e,relativeY:n/t})}function Ti(e){const t=mt();if(t.length===0)return;const a=e.globalAlpha;for(let i=t.length-1;i>=0;i--){const n=t[i];n.x+=(Math.random()-.5)*.5,n.y+=(Math.random()-.5)*.5,n.opacity-=n.decay,n.radius+=.005,n.opacity<=0?wi(n):(e.beginPath(),e.arc(n.x,n.y,n.radius,0,Math.PI*2),e.fillStyle=n.color,e.globalAlpha=Math.max(0,n.opacity),e.fill())}e.globalAlpha=a}function Oi(e){const t=ft();if(t.length===0)return;const a=e.globalCompositeOperation;e.globalCompositeOperation="lighter";const i=e.globalAlpha;for(let n=0;n<t.length;n++){const o=t[n];o.pulseAngle+=o.pulseSpeed,o.currentRadius=o.baseRadius+Math.sin(o.pulseAngle)*o.radiusAmplitude,o.currentOpacity=o.baseOpacity+(Math.sin(o.pulseAngle*.7+Math.PI/3)*.5+.5)*o.opacityAmplitude,o.currentOpacity=Math.max(0,Math.min(1,o.currentOpacity));const l=o.baseOpacity+o.opacityAmplitude,r=l>0?Math.max(0,o.currentOpacity/l):0,u=l>0?o.baseOpacity/l:0;let h=0;if(r>0)if(r<=u){const p=u>0?r/u:0;h=Math.round(p*it)}else{const p=1-u,y=p>0?(r-u)/p:1;h=Math.round(it+y*(Pa-it))}h=Math.max(0,h);for(let p=0;p<h&&(xi(o.x,o.y,o.currentRadius),!(mt().length>=wn));p++);const g=e.createRadialGradient(o.x,o.y,0,o.x,o.y,o.currentRadius);g.addColorStop(0,`rgba(255, 250, 220, ${o.currentOpacity})`),g.addColorStop(.25,`rgba(255, 235, 180, ${o.currentOpacity*.8})`),g.addColorStop(.6,`rgba(255, 220, 150, ${o.currentOpacity*.4})`),g.addColorStop(1,"rgba(255, 210, 130, 0)"),e.fillStyle=g,e.globalAlpha=1,e.beginPath(),e.arc(o.x,o.y,o.currentRadius,0,Math.PI*2),e.fill()}e.globalCompositeOperation=a,e.globalAlpha=i}function Di(e,t){const a=ft();if(a.length===0)return;const i=Math.min(e,t);for(const n of a){if(n.relativeX!==void 0&&n.relativeY!==void 0)n.x=n.relativeX*e,n.y=n.relativeY*t;else{console.warn("SunGlow missing relative coordinates during resize. Recalculating position.");const{x:o,y:l}=$n(e,t);n.x=o,n.y=l,n.relativeX=o/e,n.relativeY=l/t}n.baseRadius=i*.45,n.radiusAmplitude=i*.12}}function Pi(e,t){Ln().length>=Ca||fi({x:Math.random()*e,y:Math.random()*t,radius:Math.random()*.25+.2,opacity:Math.random()*.4+.2,decay:Math.random()*.005+.005,color:"rgba(255, 255, 230, 0.85)"})}function Gi(e){const t=Ln();if(t.length===0)return[];const a=[],i=e.globalAlpha;for(let n=t.length-1;n>=0;n--){const o=t[n];o.opacity-=o.decay,o.opacity<=0?(a.push({x:o.x,y:o.y}),Ai(o)):(e.beginPath(),e.arc(o.x,o.y,o.radius,0,Math.PI*2),e.fillStyle=o.color,e.globalAlpha=Math.max(0,o.opacity),e.fill())}return e.globalAlpha=i,a}function Li(e,t){e.fillRect(t.x-t.size/2,t.y-t.size/8,t.size,t.size/4),e.fillRect(t.x-t.size/6,t.y-t.size/3,t.size/3,t.size*.8)}function Bi(e,t){t.bodyAngleSpeed&&t.bodyAngleAmplitude&&(t.bodyAngle=Math.sin(t.age*t.bodyAngleSpeed)*t.bodyAngleAmplitude),t.tailOscillationSpeed&&t.tailOscillationAmplitude&&(t.tailAngleOffset=Math.sin(t.age*t.tailOscillationSpeed)*t.tailOscillationAmplitude);const n=t.size*(1+Math.sin(t.age*.02)*.05),o=n/3.5,l=o*.9,r=n*.3;e.save(),e.translate(t.x,t.y),e.rotate(t.bodyAngle||0),e.beginPath(),e.ellipse(0,0,n/2,o/2,0,0,Math.PI*2),e.fill();const u=-n/2*.85,h=0;e.save(),e.translate(u,h),e.rotate(t.tailAngleOffset||0),e.beginPath(),e.ellipse(0,0,r/2,l/2,0,0,Math.PI*2),e.fill(),e.restore(),e.restore()}function $i(e,t,a){if(vt().length>=kn)return;const i=a,n=ct[i];if(!n){console.warn(`Configuration not found for rare sighting type: ${i}`);return}let o,l,r,u;const h=n.minSpeed+Math.random()*(n.maxSpeed-n.minSpeed);switch(i){case"plane":o=Math.random()<.5?-n.maxSize:e+n.maxSize,l=Math.random()*t*.3,r=(o<0?1:-1)*h,u=(Math.random()-.5)*h*.3;break;case"whaleShadow":o=Math.random()<.5?-n.maxSize*1.5:e+n.maxSize*1.5,l=t*(.5+Math.random()*.4),r=(o<0?1:-1)*h,u=(Math.random()-.5)*h*.1;break;default:console.warn(`Unhandled rare sighting type for creation: ${i}`);return}const g={type:i,x:o,y:l,vx:r,vy:u,size:n.minSize+Math.random()*(n.maxSize-n.minSize),opacity:n.baseOpacity,age:0,maxAge:n.minDuration+Math.random()*(n.maxDuration-n.minDuration),...i==="whaleShadow"?{bodyAngle:0,bodyAngleSpeed:(Math.random()*.003+.002)*(Math.random()<.5?1:-1),bodyAngleAmplitude:Math.PI/36,tailAngleOffset:0,tailOscillationSpeed:Math.random()*.04+.03,tailOscillationAmplitude:Math.PI/10}:{}};pi(g)}function Ni(e,t,a){const i=vt();if(i.length===0)return;const n=e.globalAlpha;for(let o=i.length-1;o>=0;o--){const l=i[o];l.age++,l.x+=l.vx,l.y+=l.vy;const r=l.size*2,u=l.age>l.maxAge,h=l.x<-r||l.x>t+r||l.y<-r||l.y>a+r;if(u||h){ki(l);continue}let g=l.opacity;const p=.8;if(l.age/l.maxAge>p){const y=(l.age/l.maxAge-p)/(1-p);g=l.opacity*(1-y)}switch(g=Math.max(0,g),e.globalAlpha=g,e.fillStyle=`rgba(10, 10, 20, ${g*.7})`,l.type){case"plane":Li(e,l);break;case"whaleShadow":Bi(e,l);break;default:console.warn(`No drawing function implemented for rare sighting type: ${l.type}`)}}e.globalAlpha=n}function Xi(e,t){if(Re().length>0){console.warn("Attempted to re-initialize water grains. Skipping.");return}for(let a=0;a<Fa;a++){const i=jt+Math.random()*(Ha-jt),n=Math.random()*Math.PI*2,o=20+Math.random()*10,l=Math.random()*e,r=Math.random()*t;yi({x:l,y:r,vx:Math.cos(n)*i,vy:Math.sin(n)*i,size:Kt+Math.random()*(za-Kt),opacity:Ut+Math.random()*(Ya-Ut),color:`hsl(210, ${65+Math.random()*10}%, ${o}%)`,relativeX:e>0?l/e:.5,relativeY:t>0?r/t:.5})}console.log(`Initialized ${Re().length} water grains.`)}function Fi(e,t,a){const i=Re();if(i.length===0)return;const n=e.globalAlpha;for(const o of i)o.x+=o.vx,o.y+=o.vy,o.x<-o.size?o.x=t+o.size:o.x>t+o.size&&(o.x=-o.size),o.y<-o.size?o.y=a+o.size:o.y>a+o.size&&(o.y=-o.size),e.beginPath(),e.arc(o.x,o.y,o.size,0,Math.PI*2),e.fillStyle=o.color,e.globalAlpha=Math.max(0,o.opacity*n),e.fill();e.globalAlpha=n}function Hi(e,t){const a=Re();if(a.length!==0)for(const i of a)i.relativeX!==void 0&&i.relativeY!==void 0?(i.x=i.relativeX*e,i.y=i.relativeY*t):(console.warn("WaterGrain missing relative coordinates during resize. Re-randomizing position."),i.x=Math.random()*e,i.y=Math.random()*t,i.relativeX=e>0?i.x/e:.5,i.relativeY=t>0?i.y/t:.5)}function zi(e,t){if(He().length>=Rn)return;const a=Math.floor(Math.random()*3);let i,n,o,l,r;a===0?(i=Math.random()*e,n=-he,o=(Math.random()-.5)*ot*.5,l=en+Math.random()*(rt-en),r=Math.PI/2+(Math.random()-.5)*(Math.PI/6)):a===1?(i=-he,n=Math.random()*t,o=Ee+Math.random()*(ot-Ee),l=(Math.random()-.5)*rt*.4,r=(Math.random()-.5)*(Math.PI/4)):(i=e+he,n=Math.random()*t,o=-(Ee+Math.random()*(ot-Ee)),l=(Math.random()-.5)*rt*.4,r=Math.PI+(Math.random()-.5)*(Math.PI/4));let u=0;const h=(d,c,M,_,w,v)=>{let X=c,C=M,A=_;for(let D=0;D<w;D++){const L=Jt+Math.random()*(Za-Jt);if(A+=(Math.random()-.5)*2*st,v){const T=(A-_+Math.PI*3)%(Math.PI*2)-Math.PI;Math.abs(T)>st*1.5&&(A=_+Math.sign(T)*st*1.5)}else a===0?A=Math.max(Math.PI/4,Math.min(3*Math.PI/4,A)):a===1?A=Math.max(-Math.PI/3,Math.min(Math.PI/3,A)):A=Math.max(2*Math.PI/3,Math.min(4*Math.PI/3,A));const x=X+Math.cos(A)*L,P=C+Math.sin(A)*L;for(let T=0;T<ii;T++){const Y=Zt+Math.random()*(Ua-Zt),te=A+Math.PI/2,m=(Math.random()-.5)*he*.8,V=X+Math.cos(te)*m,G=C+Math.sin(te)*m;Mi(d,{x:V,y:G,initialRelativeX:V,initialRelativeY:G,size:Y,opacity:0,appearAtAge:u++*ei,maxOpacity:.5+Math.random()*.4,particleAge:0,particleMaxAge:on+Math.random()*(oi-on)})}if(X=x,C=P,!v&&Math.random()<ni&&D<w-an/2&&D>2){const T=(Math.random()<.5?-1:1)*ai*(.7+Math.random()*.6),Y=Math.floor(an*(.5+Math.random()*.5));h(d,X,C,A+T,Y,!0)}}},g=nn+Math.floor(Math.random()*(ti-nn+1));h(0,0,r,g,!1);const p={anchorX:i,anchorY:n,particles:[],vx:o,vy:l,opacity:0,age:0,maxAge:Qt+Math.random()*(Ja-Qt),color:Math.random()<.6?ja:Ka};Si(p);const y=He().find(d=>d.anchorX===i&&d.anchorY===n&&d.age===0);if(y){if(h(y,0,0,r,g,!1),y.particles.length<5){dt(y);return}}else console.warn("Could not find newly added streak to generate particles into.")}function Yi(e,t,a){const i=He();if(i.length===0)return;const n=e.globalAlpha,o=e.globalCompositeOperation;e.globalCompositeOperation="lighter";for(let l=i.length-1;l>=0;l--){const r=i[l];r.age++,r.anchorX+=r.vx,r.anchorY+=r.vy;const u=r.maxAge*Qa;if(r.age<u?r.opacity=r.age/u:r.age>r.maxAge-u?r.opacity=1-(r.age-(r.maxAge-u))/u:r.opacity=1,r.opacity=Math.max(0,Math.min(1,r.opacity)),r.opacity<=0&&r.age>u){dt(r);continue}let h=!0;const g=he*5,p=he*5;if(r.anchorX>-g&&r.anchorX<t+g&&r.anchorY>-p&&r.anchorY<a+p)h=!1;else{h=!0;for(const y of r.particles){const d=r.anchorX+y.x,c=r.anchorY+y.y;if(d>-y.size&&d<t+y.size&&c>-y.size&&c<a+y.size){h=!1;break}}}if(h&&r.age>u*2){dt(r);continue}e.fillStyle=r.color;for(let y=r.particles.length-1;y>=0;y--){const d=r.particles[y];if(r.age<d.appearAtAge)continue;if(d.particleAge++,d.particleAge>d.particleMaxAge){d.opacity=0,Bn(d),r.particles.splice(y,1);continue}else{const A=d.particleMaxAge*ri;d.particleAge<A?d.opacity=d.particleAge/A*d.maxOpacity:d.particleAge>d.particleMaxAge-A?d.opacity=(1-(d.particleAge-(d.particleMaxAge-A))/A)*d.maxOpacity:d.opacity=d.maxOpacity,d.opacity=Math.max(0,Math.min(d.maxOpacity,d.opacity))}if(d.opacity<=.001)continue;d.x+=(Math.random()-.5)*tn,d.y+=(Math.random()-.5)*tn;const c=d.x-d.initialRelativeX,M=d.y-d.initialRelativeY,_=c*c+M*M,w=he*.5;if(_>w*w){const A=Math.sqrt(_);d.x=d.initialRelativeX+c/A*w,d.y=d.initialRelativeY+M/A*w}const v=r.anchorX+d.x,X=r.anchorY+d.y,C=r.opacity*d.opacity;C<=.001||(e.globalAlpha=C*n,e.beginPath(),e.arc(v,X,d.size,0,Math.PI*2),e.fill())}}e.globalCompositeOperation=o,e.globalAlpha=n}var Wi=J('<canvas class="pointer-events-none fixed top-0 left-0 -z-10 h-full w-full svelte-1mnusik"></canvas>');function qi(e,t){me(t,!1);let a=Ot(t,"gradientColor1",8,"hsl(210, 70%, 50%)"),i=Ot(t,"gradientColor2",8,"hsl(200, 68%, 50%)"),n=F(),o,l=0,r=0,u=0,h=1,g=0,p={...ye[0]},y=0;gt(()=>{const c=s(n);if(!c){console.error("Canvas not available onMount");return}const M=c.getContext("2d");if(!M){console.error("Context not available onMount");return}Y(),console.log(`[onMount after initial resize] Canvas: ${c.width}x${c.height}`);let _=0,w=0,v=null,X,C=!1,A=0;function D(){const m=Date.now();if(g===0&&(g=m,y=m,u=(r+1)%ye.length,h=0),m-g>=Wa&&h>=1&&(r=u,u=(r+1)%ye.length,h=0,g=m,y=m),h<1){const V=m-y;h=Math.min(1,V/qa);const G=si(h),O=ye[r],z=ye[u];p.x1=O.x1+(z.x1-O.x1)*G,p.y1=O.y1+(z.y1-O.y1)*G,p.x2=O.x2+(z.x2-O.x2)*G,p.y2=O.y2+(z.y2-O.y2)*G}else p={...ye[u]},r=u}const L=m=>{if(v){if(!C){const G=m.pageX-v.x,O=m.pageY-v.y;Math.sqrt(G*G+O*O)>Oa&&(C=!0)}const V=Date.now();V-_>Ea&&(we(m.pageX,m.pageY,"mouseMove"),_=V)}},x=m=>{w=Date.now(),v={x:m.pageX,y:m.pageY},C=!1},P=m=>{if(!v||w===0)return;const V=Date.now()-w;C||(V>=Ta?we(m.pageX,m.pageY,"longPress"):we(m.pageX,m.pageY,"mouseMove")),v=null,w=0,C=!1},T=()=>{c&&we(Math.random()*c.width,Math.random()*c.height,"ambient")};function Y(){c&&(c.width=window.innerWidth,c.height=window.innerHeight,console.log(`[resizeCanvas] Canvas: ${c.width}x${c.height}`),Ci(c.width,c.height),Di(c.width,c.height),Hi(c.width,c.height))}if(window.addEventListener("resize",Y),window.addEventListener("mousemove",L),window.addEventListener("mousedown",x),window.addEventListener("mouseup",P),typeof window<"u"&&(X=window.setInterval(T,Ia)),c){for(let m=0;m<An-zt;m++)gn(c.width,c.height,!1);for(let m=0;m<zt;m++)gn(c.width,c.height,!0);Ei(c.width,c.height),Xi(c.width,c.height)}console.log(`[onMount End] Canvas: ${c.width}x${c.height}, ShimmerSpots: ${We().length}, Grains: ${Re().length}, SunGlows: ${ft().length}`);function te(){if(!M||!c){o=requestAnimationFrame(te);return}l+=.002,D();const m=p.x1*c.width,V=p.y1*c.height,G=p.x2*c.width,O=p.y2*c.height,z=M.createLinearGradient(m,V,G,O),ne=typeof a()=="string"&&a().includes("hsl")?a():"hsl(210, 70%, 50%)",ae=typeof i()=="string"&&i().includes("hsl")?i():"hsl(200, 68%, 50%)";if(z.addColorStop(0,ne),z.addColorStop(1,ae),M.fillStyle=z,M.fillRect(0,0,c.width,c.height),Ri(M),Ii(M,c.width,c.height,l),Fi(M,c.width,c.height),Oi(M),Ti(M),A+=16.67,A>=La){for(const ue in ct){const Me=ue,Ce=ct[Me];typeof Ce.chancePerInterval=="number"&&Math.random()<Ce.chancePerInterval&&vt().length<kn&&$i(c.width,c.height,Me)}A=0}Ni(M,c.width,c.height),Math.random()<xa&&Pi(c.width,c.height),Gi(M).forEach(ue=>we(ue.x,ue.y,"glintExpire")),Math.random()<Va&&He().length<Rn&&zi(c.width,c.height),Yi(M,c.width,c.height),o=requestAnimationFrame(te)}return te(),()=>{window.removeEventListener("resize",Y),window.removeEventListener("mousemove",L),window.removeEventListener("mousedown",x),window.removeEventListener("mouseup",P),X&&clearInterval(X),o&&cancelAnimationFrame(o)}}),fe();var d=Wi();ke(d,c=>E(n,c),()=>s(n)),Z(e,d),ve()}var Vi=J('<div class="professional-hsl-picker svelte-1bvbq9v"><div class="picker-header svelte-1bvbq9v"><div class="control-buttons svelte-1bvbq9v"><button title="Sync both gradients">ð</button> <button title="Lock current selection">ð</button> <button class="control-btn reset-btn svelte-1bvbq9v" title="Reset to defaults">âº</button></div></div> <div class="slider-section svelte-1bvbq9v"><div class="slider-label svelte-1bvbq9v">Hue (0Â° - 360Â°)</div> <div class="slider-container svelte-1bvbq9v"><canvas class="color-slider svelte-1bvbq9v"></canvas></div></div> <div class="slider-section svelte-1bvbq9v"><div class="slider-label svelte-1bvbq9v">Saturation (0% - 100%)</div> <div class="slider-container svelte-1bvbq9v"><canvas class="color-slider svelte-1bvbq9v"></canvas></div></div> <div class="slider-section svelte-1bvbq9v"><div class="slider-label svelte-1bvbq9v">Lightness (0% - 100%)</div> <div class="slider-container svelte-1bvbq9v"><canvas class="color-slider svelte-1bvbq9v"></canvas></div></div> <div class="color-preview svelte-1bvbq9v"><div class="preview-item svelte-1bvbq9v"><div class="preview-swatch svelte-1bvbq9v"></div> <span class="preview-label svelte-1bvbq9v"> </span></div> <div class="preview-item svelte-1bvbq9v"><div class="preview-swatch svelte-1bvbq9v"></div> <span class="preview-label svelte-1bvbq9v"> </span></div></div> <div class="instructions svelte-1bvbq9v"><p>Click: Set Gradient 1 â¢ Drag indicators to move</p></div></div>');function ji(e,t){me(t,!1);const a=F(),i=F();let n=F(),o=F(),l=F(),r,u=F(null),h=F(null),g=F(null),p=F(!1),y=F(!1),d=!1,c=null,M=null;const _=320,w=40,v=16;let X=0,C={x:0,targetX:0,scale:1,opacity:.9},A={x:0,targetX:0,scale:1,opacity:.9},D={x:0,targetX:0,scale:1,opacity:.9},L={x:0,targetX:0,scale:1,opacity:.9},x={x:0,targetX:0,scale:1,opacity:.9},P={x:0,targetX:0,scale:1,opacity:.9},T;function Y(){C.targetX=v+s(a).h/360*(_-2*v),A.targetX=v+s(i).h/360*(_-2*v),C.x=C.targetX,A.x=A.targetX,D.targetX=v+s(a).s/100*(_-2*v),L.targetX=v+s(i).s/100*(_-2*v),D.x=D.targetX,L.x=L.targetX,x.targetX=v+s(a).l/100*(_-2*v),P.targetX=v+s(i).l/100*(_-2*v),x.x=x.targetX,P.x=P.targetX}function te(f,S){const b=Math.max(0,Math.min(1,(f-v)/(_-2*v)));switch(S){case"hue":return b*360;case"saturation":return b*100;case"lightness":return b*100}}function m(){if(!s(u)||!s(h)||!s(g)){r=requestAnimationFrame(m);return}X+=.016;const f=d?1:.15;C.x+=(C.targetX-C.x)*f,A.x+=(A.targetX-A.x)*f,D.x+=(D.targetX-D.x)*f,L.x+=(L.targetX-L.x)*f,x.x+=(x.targetX-x.x)*f,P.x+=(P.targetX-P.x)*f,[C,A,D,L,x,P].forEach((b,B)=>{const $=B%2+1;c===$&&(M==="hue"&&B<2||M==="saturation"&&B>=2&&B<4||M==="lightness"&&B>=4)?(b.scale=1+.2*Math.sin(X*8),b.opacity=.95):(b.scale+=(1-b.scale)*.1,b.opacity+=(.9-b.opacity)*.1)}),V(),r=requestAnimationFrame(m)}function V(){G(),O(),z()}function G(){if(!s(u))return;s(u).clearRect(0,0,_,w);const f=s(u).createLinearGradient(v,0,_-v,0);for(let S=0;S<=12;S++){const b=S/12*360;f.addColorStop(S/12,`hsl(${b}, 70%, 50%)`)}K(u,s(u).fillStyle=f),ae(s(u),v,8,_-2*v,w-16,8),s(u).fill(),K(u,s(u).strokeStyle="rgba(255, 255, 255, 0.2)"),K(u,s(u).lineWidth=1),ae(s(u),v,8,_-2*v,w-16,8),s(u).stroke(),ne(s(u),C,"#3B82F6","1"),ne(s(u),A,"#EC4899","2")}function O(){if(!s(h))return;s(h).clearRect(0,0,_,w);const f=(s(a).h+s(i).h)/2,S=s(h).createLinearGradient(v,0,_-v,0);S.addColorStop(0,`hsl(${f}, 0%, 50%)`),S.addColorStop(1,`hsl(${f}, 100%, 50%)`),K(h,s(h).fillStyle=S),ae(s(h),v,8,_-2*v,w-16,8),s(h).fill(),K(h,s(h).strokeStyle="rgba(255, 255, 255, 0.2)"),K(h,s(h).lineWidth=1),ae(s(h),v,8,_-2*v,w-16,8),s(h).stroke(),ne(s(h),D,"#3B82F6","1"),ne(s(h),L,"#EC4899","2")}function z(){if(!s(g))return;s(g).clearRect(0,0,_,w);const f=(s(a).h+s(i).h)/2,S=(s(a).s+s(i).s)/2,b=s(g).createLinearGradient(v,0,_-v,0);b.addColorStop(0,`hsl(${f}, ${S}%, 0%)`),b.addColorStop(.25,`hsl(${f}, ${S}%, 25%)`),b.addColorStop(.5,`hsl(${f}, ${S}%, 50%)`),b.addColorStop(.75,`hsl(${f}, ${S}%, 75%)`),b.addColorStop(1,`hsl(${f}, ${S}%, 100%)`),K(g,s(g).fillStyle=b),ae(s(g),v,8,_-2*v,w-16,8),s(g).fill(),K(g,s(g).strokeStyle="rgba(255, 255, 255, 0.2)"),K(g,s(g).lineWidth=1),ae(s(g),v,8,_-2*v,w-16,8),s(g).stroke(),ne(s(g),x,"#3B82F6","1"),ne(s(g),P,"#EC4899","2")}function ne(f,S,b,B){const $=S.x,N=w/2,W=S.scale,be=S.opacity;f.save(),f.globalAlpha=be;const _e=f.createRadialGradient($,N,0,$,N,20*W);_e.addColorStop(0,b+"40"),_e.addColorStop(1,b+"00"),f.fillStyle=_e,f.fillRect($-20*W,N-20*W,40*W,40*W),f.beginPath(),f.arc($,N,10*W,0,Math.PI*2),f.fillStyle=b,f.fill(),f.strokeStyle="rgba(255, 255, 255, 0.9)",f.lineWidth=2,f.stroke(),f.beginPath(),f.arc($,N,6*W,0,Math.PI*2),f.fillStyle="rgba(255, 255, 255, 0.3)",f.fill(),f.fillStyle="white",f.font=`bold ${8*W}px system-ui`,f.textAlign="center",f.textBaseline="middle",f.fillText(B,$,N),f.restore()}function ae(f,S,b,B,$,N){f.beginPath(),f.moveTo(S+N,b),f.lineTo(S+B-N,b),f.quadraticCurveTo(S+B,b,S+B,b+N),f.lineTo(S+B,b+$-N),f.quadraticCurveTo(S+B,b+$,S+B-N,b+$),f.lineTo(S+N,b+$),f.quadraticCurveTo(S,b+$,S,b+$-N),f.lineTo(S,b+N),f.quadraticCurveTo(S,b,S+N,b),f.closePath()}function Ie(f,S){let b,B,$;switch(S){case"hue":b=s(n),B=C,$=A;break;case"saturation":b=s(o),B=D,$=L;break;case"lightness":b=s(l),B=x,$=P;break;default:return}if(!b)return;const N=b.getBoundingClientRect(),W=f.clientX-N.left,be=Math.abs(W-B.x),_e=Math.abs(W-$.x);if(be<20)d=!0,c=1,M=S,f.preventDefault();else if(_e<20)d=!0,c=2,M=S,f.preventDefault();else{const Yn=te(W,S);Me(S,Yn,1)}}function qe(f){if(!d||!M||!c)return;let S;switch(M){case"hue":S=s(n);break;case"saturation":S=s(o);break;case"lightness":S=s(l);break;default:return}if(!S)return;const b=S.getBoundingClientRect(),B=f.clientX-b.left,$=Math.max(v,Math.min(_-v,B)),N=te($,M);Me(M,N,c)}function ue(){d=!1,c=null,M=null}function Me(f,S,b){const B=b===1?s(a):s(i);if(!B)return;let $=B.h,N=B.s,W=B.l;switch(f){case"hue":$=S;break;case"saturation":N=S;break;case"lightness":W=S;break}b===1?Xt($,N,W):Ft($,N,W)}function Ce(){E(y,!s(y))}function Nn(){E(p,!s(p))}function Xn(){Xt(210,70,50),Ft(200,68,50)}gt(()=>{if(!(!s(n)||!s(o)||!s(l))&&(E(u,s(n).getContext("2d")),E(h,s(o).getContext("2d")),E(g,s(l).getContext("2d")),!(!s(u)||!s(h)||!s(g))))return K(n,s(n).width=_),K(n,s(n).height=w),K(o,s(o).width=_),K(o,s(o).height=w),K(l,s(l).width=_),K(l,s(l).height=w),Y(),m(),document.addEventListener("mousemove",qe),document.addEventListener("mouseup",ue),T=ee.subscribe(f=>{}),()=>{r&&cancelAnimationFrame(r),document.removeEventListener("mousemove",qe),document.removeEventListener("mouseup",ue),T&&T()}}),na(()=>{r&&cancelAnimationFrame(r)}),le(()=>$t,()=>{E(a,$t()||{h:210,s:70,l:50})}),le(()=>Nt,()=>{E(i,Nt()||{h:200,s:68,l:50})}),le(()=>(s(a),s(i),s(u),s(h),s(g)),()=>{s(a)&&s(i)&&typeof s(a).h=="number"&&typeof s(i).h=="number"&&(Y(),s(u)&&s(h)&&s(g)&&V())}),ze(),fe();var Ve=Vi(),je=k(Ve),pt=k(je),Ke=k(pt);let yt;var Ue=I(Ke,2);let St;var Fn=I(Ue,2);R(pt),R(je);var Ze=I(je,2),Mt=I(k(Ze),2),bt=k(Mt);ke(bt,f=>E(n,f),()=>s(n)),R(Mt),R(Ze);var Je=I(Ze,2),_t=I(k(Je),2),At=k(_t);ke(At,f=>E(o,f),()=>s(o)),R(_t),R(Je);var Qe=I(Je,2),wt=I(k(Qe),2),kt=k(wt);ke(kt,f=>E(l,f),()=>s(l)),R(wt),R(Qe);var Rt=I(Qe,2),et=k(Rt),It=k(et),Ct=I(It,2),Hn=k(Ct);R(Ct),R(et);var xt=I(et,2),Et=k(xt),Tt=I(Et,2),zn=k(Tt);R(Tt),R(xt),R(Rt),mn(2),R(Ve),re((f,S,b,B,$,N,W,be)=>{yt=ge(Ke,1,"control-btn svelte-1bvbq9v",null,yt,f),St=ge(Ue,1,"control-btn svelte-1bvbq9v",null,St,S),lt(It,`background-color: hsl(${s(a),H(()=>s(a).h)??""}, ${s(a),H(()=>s(a).s)??""}%, ${s(a),H(()=>s(a).l)??""}%)`),ce(Hn,`Gradient 1: ${b??""}Â°, ${B??""}%, ${$??""}%`),lt(Et,`background-color: hsl(${s(i),H(()=>s(i).h)??""}, ${s(i),H(()=>s(i).s)??""}%, ${s(i),H(()=>s(i).l)??""}%)`),ce(zn,`Gradient 2: ${N??""}Â°, ${W??""}%, ${be??""}%`)},[()=>({active:s(y)}),()=>({active:s(p)}),()=>(s(a),H(()=>Math.round(s(a).h))),()=>(s(a),H(()=>Math.round(s(a).s))),()=>(s(a),H(()=>Math.round(s(a).l))),()=>(s(i),H(()=>Math.round(s(i).h))),()=>(s(i),H(()=>Math.round(s(i).s))),()=>(s(i),H(()=>Math.round(s(i).l)))]),q("click",Ke,Ce),q("click",Ue,Nn),q("click",Fn,Xn),q("mousedown",bt,f=>Ie(f,"hue")),q("mousedown",At,f=>Ie(f,"saturation")),q("mousedown",kt,f=>Ie(f,"lightness")),Z(e,Ve),ve()}var Ki=J('<div class="timer-settings-panel svelte-1m1yjnh"><h3 class="panel-title svelte-1m1yjnh">Timer Settings</h3> <div class="settings-grid svelte-1m1yjnh"><div class="setting-item svelte-1m1yjnh"><label for="work-duration" class="setting-label svelte-1m1yjnh">Work (min)</label> <input id="work-duration" type="number" min="1" max="120" class="setting-input svelte-1m1yjnh"/></div> <div class="setting-item svelte-1m1yjnh"><label for="short-break-duration" class="setting-label svelte-1m1yjnh">Short Break (min)</label> <input id="short-break-duration" type="number" min="1" max="60" class="setting-input svelte-1m1yjnh"/></div> <div class="setting-item svelte-1m1yjnh"><label for="long-break-duration" class="setting-label svelte-1m1yjnh">Long Break (min)</label> <input id="long-break-duration" type="number" min="1" max="120" class="setting-input svelte-1m1yjnh"/></div> <div class="setting-item svelte-1m1yjnh"><label for="sessions-before-long-break" class="setting-label svelte-1m1yjnh">Sessions Before Long Break</label> <input id="sessions-before-long-break" type="number" min="1" max="10" class="setting-input svelte-1m1yjnh"/></div></div> <div class="toggles-section svelte-1m1yjnh"><div class="toggle-item svelte-1m1yjnh"><label for="auto-cycle" class="toggle-label svelte-1m1yjnh">Auto-cycle sessions</label> <input id="auto-cycle" type="checkbox" class="toggle-input svelte-1m1yjnh"/></div> <div class="toggle-item svelte-1m1yjnh"><label for="floating-enabled" class="toggle-label svelte-1m1yjnh">Enable floating effects</label> <input id="floating-enabled" type="checkbox" class="toggle-input svelte-1m1yjnh"/></div></div> <button type="button" class="reset-button svelte-1m1yjnh">Reset to Defaults</button></div>');function Ui(e,t){me(t,!1);const[a,i]=Ye(),n=()=>se(Q,"$timerSettings",a),o=()=>se(ee,"$backgroundSettings",a);let l=F(n().workDuration/60),r=F(n().shortBreakDuration/60),u=F(n().longBreakDuration/60),h=F(n().sessionsBeforeLongBreak),g=F(n().autoCycle),p=F(o().isFloatingEnabled);Q.subscribe(m=>{m.workDuration/60!==s(l)&&E(l,m.workDuration/60),m.shortBreakDuration/60!==s(r)&&E(r,m.shortBreakDuration/60),m.longBreakDuration/60!==s(u)&&E(u,m.longBreakDuration/60),m.sessionsBeforeLongBreak!==s(h)&&E(h,m.sessionsBeforeLongBreak),m.autoCycle!==s(g)&&E(g,m.autoCycle)}),ee.subscribe(m=>{m.isFloatingEnabled!==s(p)&&E(p,m.isFloatingEnabled)});function y(){ka(),Q.set({workDuration:1500,shortBreakDuration:300,longBreakDuration:900,sessionsBeforeLongBreak:4,autoCycle:!1})}le(()=>(s(l),s(r),s(u),s(h),s(g),n(),Q),()=>{const m={workDuration:Math.max(1,s(l))*60,shortBreakDuration:Math.max(1,s(r))*60,longBreakDuration:Math.max(1,s(u))*60,sessionsBeforeLongBreak:Math.max(1,s(h)),autoCycle:s(g)};(n().workDuration!==m.workDuration||n().shortBreakDuration!==m.shortBreakDuration||n().longBreakDuration!==m.longBreakDuration||n().sessionsBeforeLongBreak!==m.sessionsBeforeLongBreak||n().autoCycle!==m.autoCycle)&&Q.set(m)}),le(()=>(o(),s(p),ee),()=>{o().isFloatingEnabled!==s(p)&&ee.update(m=>({...m,isFloatingEnabled:s(p)}))}),ze(),fe();var d=Ki(),c=I(k(d),2),M=k(c),_=I(k(M),2);pe(_),R(M);var w=I(M,2),v=I(k(w),2);pe(v),R(w);var X=I(w,2),C=I(k(X),2);pe(C),R(X);var A=I(X,2),D=I(k(A),2);pe(D),R(A),R(c);var L=I(c,2),x=k(L),P=I(k(x),2);pe(P),R(x);var T=I(x,2),Y=I(k(T),2);pe(Y),R(T),R(L);var te=I(L,2);R(d),xe(_,()=>s(l),m=>E(l,m)),xe(v,()=>s(r),m=>E(r,m)),xe(C,()=>s(u),m=>E(u,m)),xe(D,()=>s(h),m=>E(h,m)),Gt(P,()=>s(g),m=>E(g,m)),Gt(Y,()=>s(p),m=>E(p,m)),q("click",te,y),Z(e,d),ve(),i()}var Zi=J("<div><!></div>"),Ji=J("<div><!></div>"),Qi=J('<div role="toolbar" aria-label="Background Effects Dock"><div class="dock-container svelte-up6kvm"><div title="Professional HSL Color Picker"><div class="dock-icon svelte-up6kvm">ð¨</div></div> <div class="dock-item svelte-up6kvm" title="Water Effects"><div class="dock-icon svelte-up6kvm">ð</div></div> <div class="dock-item svelte-up6kvm" title="Light Effects"><div class="dock-icon svelte-up6kvm">â¨</div></div> <div class="dock-item svelte-up6kvm" title="Particle Effects"><div class="dock-icon svelte-up6kvm">ð«</div></div> <div title="Timer Settings"><div class="dock-icon svelte-up6kvm">â±ï¸</div></div> <div class="dock-item svelte-up6kvm" title="Settings"><div class="dock-icon svelte-up6kvm">âï¸</div></div></div> <!> <!></div>');function eo(e,t){me(t,!1);let a=F(),i=F(!1),n,o=0,l=0,r=F(!1),u=F(!1);const h=100,g=3e3;gt(()=>{const G=z=>{o=z.clientY,p()},O=()=>{l=window.innerHeight};return window.addEventListener("mousemove",G),window.addEventListener("resize",O),O(),()=>{window.removeEventListener("mousemove",G),window.removeEventListener("resize",O),n&&clearTimeout(n)}});function p(){const O=l-o<=h;O&&!s(i)?y():!O&&s(i)&&c()}function y(){E(i,!0),n&&(clearTimeout(n),n=0)}function d(){E(i,!1)}function c(){n&&clearTimeout(n),n=setTimeout(d,g)}function M(){y()}function _(){c()}function w(){E(r,!s(r)),E(u,!1),s(r)&&y()}function v(){E(u,!s(u)),E(r,!1),s(u)&&y()}function X(G){switch(G){case"colors":w();break;case"timer":v();break}}fe();var C=Qi();let A;var D=k(C),L=k(D);let x;var P=I(L,8);let T;mn(2),R(D);var Y=I(D,2);{var te=G=>{var O=Zi();let z;var ne=k(O);ji(ne,{}),R(O),re(ae=>z=ge(O,1,"panel-container color-grid-panel svelte-up6kvm",null,z,ae),[()=>({visible:s(r)})]),Z(G,O)};Se(Y,G=>{s(r)&&G(te)})}var m=I(Y,2);{var V=G=>{var O=Ji();let z;var ne=k(O);Ui(ne,{}),R(O),re(ae=>z=ge(O,1,"panel-container timer-settings-panel svelte-up6kvm",null,z,ae),[()=>({visible:s(u)})]),Z(G,O)};Se(m,G=>{s(u)&&G(V)})}R(C),ke(C,G=>E(a,G),()=>s(a)),re((G,O,z)=>{A=ge(C,1,"floating-dock svelte-up6kvm",null,A,G),x=ge(L,1,"dock-item svelte-up6kvm",null,x,O),T=ge(P,1,"dock-item svelte-up6kvm",null,T,z)},[()=>({visible:s(i)}),()=>({active:s(r)}),()=>({active:s(u)})]),q("click",L,()=>X("colors")),q("click",P,()=>X("timer")),q("mouseenter",C,M),q("mouseleave",C,_),Z(e,C),ve()}var to=J('<meta name="description" content="A beautiful Pomodoro timer with interactive background effects"/>'),no=J('<span class="text-sm text-white/60 block mt-1"> </span>'),ao=J('<div class="text-lg font-medium text-white/80"> <!></div>'),io=J('<!> <!> <main class="relative z-10 flex min-h-screen flex-col items-center justify-center px-4 py-8 transition-all duration-1000 ease-in-out"><div class="w-full max-w-md space-y-8 text-center"><!> <!> <!></div></main>',1);function uo(e,t){me(t,!1);const[a,i]=Ye(),n=()=>se(ee,"$backgroundSettings",a),o=()=>se(j,"$timerState",a),l=()=>se(Q,"$timerSettings",a);function r(w){switch(w){case"work":return"Focus Session";case"shortBreak":return"Short Break";case"longBreak":return"Long Break";default:return"Session"}}fe();var u=io();aa(w=>{var v=to();Qn.title="Locked-In Pomodoro Timer",Z(w,v)});var h=Jn(u);qi(h,{get gradientColor1(){return n().gradientColor1},get gradientColor2(){return n().gradientColor2}});var g=I(h,2);eo(g,{});var p=I(g,2),y=k(p),d=k(y);ya(d,{});var c=I(d,2);{var M=w=>{var v=ao(),X=k(v),C=I(X);{var A=D=>{var L=no(),x=k(L);R(L),re(()=>ce(x,`Session ${o().completedSessions+1} of ${l().sessionsBeforeLongBreak??""}`)),Z(D,L)};Se(C,D=>{o().currentSession.type==="work"&&D(A)})}R(v),re(D=>ce(X,`${D??""} `),[()=>r(o().currentSession.type)]),Z(w,v)};Se(c,w=>{o().currentSession&&w(M)})}var _=I(c,2);_a(_,{}),R(y),R(p),Z(e,u),ve(),i()}export{uo as component};
