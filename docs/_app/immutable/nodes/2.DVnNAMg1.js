import"../chunks/DsnmJJEf.js";import{i as ze}from"../chunks/BhtY715V.js";import{w as Ne,aE as ja,aF as Wa,aG as qa,aH as Va,aI as Ka,aJ as Ua,F as Ke,e as re,M as ma,aK as Za,p as Be,aL as $e,aM as ht,l as ee,t as pe,a as Q,m as Fe,T as y,R as E,n as u,o as g,q as p,h as n,aN as ye,aO as Je,f as Ja,aP as Qa}from"../chunks/BGg158e2.js";import{b as ei,l as ya,w as Rt,d as ti,g as Ie,s as ne,e as D,o as Ct,c as ai,f as ba,i as ii}from"../chunks/B19_yFmH.js";import{i as we,s as pt,a as Pe,p as $t,b as Ze}from"../chunks/Cv05pqdj.js";const zt=[...` 	
\r\fÂ \v\uFEFF`];function ni(e,t,i){var o=e==null?"":""+e;if(i){for(var a in i)if(i[a])o=o?o+" "+a:a;else if(o.length)for(var s=a.length,l=0;(l=o.indexOf(a,l))>=0;){var r=l+s;(l===0||zt.includes(o[l-1]))&&(r===o.length||zt.includes(o[r]))?o=(l===0?"":o.substring(0,l))+o.substring(r+1):l=r}}return o===""?null:o}function oi(e,t){return e==null?null:String(e)}function be(e,t,i,o,a,s){var l=e.__className;if(Ne||l!==i||l===void 0){var r=ni(i,o,s);(!Ne||r!==e.getAttribute("class"))&&(r==null?e.removeAttribute("class"):e.className=r),e.__className=i}else if(s&&a!==s)for(var h in s){var f=!!s[h];(a==null||f!==!!a[h])&&e.classList.toggle(h,f)}return s}function wt(e,t,i,o){var a=e.__style;if(Ne||a!==t){var s=oi(t);(!Ne||s!==e.getAttribute("style"))&&(s==null?e.removeAttribute("style"):e.style.cssText=s),e.__style=t}return o}const si=Symbol("is custom element"),ri=Symbol("is html");function J(e){if(Ne){var t=!1,i=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var o=e.value;nt(e,"value",null),e.value=o}if(e.hasAttribute("checked")){var a=e.checked;nt(e,"checked",null),e.checked=a}}};e.__on_r=i,Va(i),ei()}}function nt(e,t,i,o){var a=li(e);Ne&&(a[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||a[t]!==(a[t]=i)&&(t==="loading"&&(e[Ka]=i),i==null?e.removeAttribute(t):typeof i!="string"&&ci(e).includes(t)?e[t]=i:e.setAttribute(t,i))}function li(e){return e.__attributes??={[si]:e.nodeName.includes("-"),[ri]:e.namespaceURI===ja}}var Bt=new Map;function ci(e){var t=Bt.get(e.nodeName);if(t)return t;Bt.set(e.nodeName,t=[]);for(var i,o=e,a=Element.prototype;a!==o;){i=qa(o);for(var s in i)i[s].set&&t.push(s);o=Wa(o)}return t}function de(e,t,i=t){var o=Ua(),a=new WeakSet;ya(e,"input",s=>{var l=s?e.defaultValue:e.value;if(l=mt(e)?yt(l):l,i(l),Ke!==null&&a.add(Ke),o&&l!==(l=t())){var r=e.selectionStart,h=e.selectionEnd;e.value=l??"",h!==null&&(e.selectionStart=r,e.selectionEnd=Math.min(h,e.value.length))}}),(Ne&&e.defaultValue!==e.value||re(t)==null&&e.value)&&(i(mt(e)?yt(e.value):e.value),Ke!==null&&a.add(Ke)),ma(()=>{var s=t();if(e===document.activeElement){var l=Za??Ke;if(a.has(l))return}mt(e)&&s===yt(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function We(e,t,i=t){ya(e,"change",o=>{var a=o?e.defaultChecked:e.checked;i(a)}),(Ne&&e.defaultChecked!==e.checked||re(t)==null)&&i(e.checked),ma(()=>{var o=t();e.checked=!!o})}function mt(e){var t=e.type;return t==="number"||t==="range"}function yt(e){return e===""?null:+e}const Sa="zenZoneTimerSettings",It={workDuration:Math.max(1,25)*60,shortBreakDuration:Math.max(1,5)*60,longBreakDuration:Math.max(1,15)*60,sessionsBeforeLongBreak:Math.max(1,4),autoCycle:!1};function bt(e){const t={...It,...e};return t.workDuration=Math.max(1,Math.floor(t.workDuration/60))*60,t.shortBreakDuration=Math.max(1,Math.floor(t.shortBreakDuration/60))*60,t.longBreakDuration=Math.max(1,Math.floor(t.longBreakDuration/60))*60,t.sessionsBeforeLongBreak=Math.max(1,Math.floor(t.sessionsBeforeLongBreak)),t}function _a(){if(typeof window<"u"&&window.localStorage){const e=localStorage.getItem(Sa);if(e)try{const t=JSON.parse(e);if(t&&typeof t.workDuration=="number"&&typeof t.shortBreakDuration=="number"&&typeof t.longBreakDuration=="number"&&typeof t.sessionsBeforeLongBreak=="number"&&typeof t.autoCycle=="boolean")return bt(t);if(t)return console.warn("Partially invalid settings found in localStorage, attempting to sanitize."),bt(t)}catch(t){console.error("Error parsing timer settings from localStorage:",t)}}return bt(It)}const di=_a(),vi={currentSession:"Work",timeRemaining:di.workDuration,isRunning:!1,currentCycleCount:0},ke=Rt(_a()),me=Rt(vi);typeof window<"u"&&window.localStorage&&ke.subscribe(e=>{try{localStorage.setItem(Sa,JSON.stringify(e))}catch(t){console.error("Error saving timer settings to localStorage:",t)}});const ui=ti(me,e=>{const t=Math.floor(e.timeRemaining/60),i=e.timeRemaining%60;return`${String(t).padStart(2,"0")}:${String(i).padStart(2,"0")}`});let Se;function Ma(){const e=Ie(me);if(e.isRunning&&e.timeRemaining>0)return;let t=e.timeRemaining;if(t<=0){const i=Ie(ke);switch(e.currentSession){case"Work":t=i.workDuration;break;case"Short Break":t=i.shortBreakDuration;break;case"Long Break":t=i.longBreakDuration;break}}me.update(i=>({...i,isRunning:!0,timeRemaining:t})),Se&&clearInterval(Se),Se=setInterval(()=>{const i=Ie(me);i.isRunning&&i.timeRemaining>0?me.update(o=>({...o,timeRemaining:o.timeRemaining-1})):i.isRunning&&i.timeRemaining<=0&&(Se&&clearInterval(Se),Se=void 0,pi())},1e3)}function gi(){Se&&(clearInterval(Se),Se=void 0),me.update(e=>({...e,isRunning:!1}))}function hi(){Se&&(clearInterval(Se),Se=void 0),me.update(e=>{let t,i,o=e.currentCycleCount,a=It;return ke.subscribe(l=>{a=l})(),e.currentSession==="Work"?(o++,o>=a.sessionsBeforeLongBreak?(t="Long Break",i=a.longBreakDuration,o=0):(t="Short Break",i=a.shortBreakDuration)):(t="Work",i=a.workDuration),{...e,currentSession:t,timeRemaining:i,isRunning:!1,currentCycleCount:o}})}function Aa(e){Se&&(clearInterval(Se),Se=void 0);const t=Ie(ke),i=e||Ie(me).currentSession;let o=t.workDuration,a=Ie(me).currentCycleCount;switch(i){case"Work":o=t.workDuration,e==="Work"&&(a=0);break;case"Short Break":o=t.shortBreakDuration;break;case"Long Break":o=t.longBreakDuration;break}me.update(s=>({...s,currentSession:i,timeRemaining:o,isRunning:!1,currentCycleCount:a}))}function Ft(e){me.update(t=>{if(t.isRunning)return t;const i=Math.max(60,e);return ke.update(o=>{const a={...o};switch(t.currentSession){case"Work":a.workDuration=i;break;case"Short Break":a.shortBreakDuration=i;break;case"Long Break":a.longBreakDuration=i;break}return a}),{...t,timeRemaining:i}})}function pi(){const e=Ie(me),t=Ie(ke);let i,o=e.currentCycleCount;e.currentSession==="Work"?(o++,o>=t.sessionsBeforeLongBreak?(i="Long Break",o=0):i="Short Break"):i="Work",me.update(a=>({...a,currentSession:i,isRunning:!1,currentCycleCount:o})),Aa(i),t.autoCycle&&Ma()}var fi=ee('<div class="mx-2 flex scale-75 flex-col items-center justify-center opacity-60 transition-opacity hover:opacity-100"><button title="Increase minutes" aria-label="Increase minutes" class="p-1 text-gray-300 hover:text-teal-300 disabled:opacity-30"><svg class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg></button> <button title="Decrease minutes" aria-label="Decrease minutes" class="p-1 text-gray-300 hover:text-teal-300 disabled:opacity-30"><svg class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div>'),mi=ee('<div class="mt-2 mb-8 text-center"><p class="mb-2 text-xl font-semibold text-teal-400" id="current-session-label"> </p> <div class="relative flex items-center justify-center font-mono text-8xl tracking-tighter text-gray-100 tabular-nums select-none svelte-1sjqirj" aria-live="polite" aria-atomic="true"><!> <span class="w-32 text-center"> </span> <span class="w-8 text-center">:</span> <span class="w-32 text-center"> </span></div> <div class="mt-6 h-2.5 w-full overflow-hidden rounded-full bg-slate-700 shadow-inner"><div class="h-2.5 rounded-full bg-teal-500 transition-all duration-1000 ease-linear" aria-valuemin="0" aria-valuemax="100" aria-labelledby="current-session-label" role="progressbar"></div></div></div>');function yi(e,t){Be(t,!1);const[i,o]=pt(),a=()=>Pe(me,"$timerState",i),s=()=>Pe(ke,"$timerSettings",i),l=()=>Pe(ui,"$formattedTime",i),r=E(),h=E();let f=E(0);function v(){if(a().isRunning)return;const O=Math.floor(a().timeRemaining/60),$=a().timeRemaining%60,P=(O+1)*60+$;Ft(P)}function b(){if(a().isRunning)return;const O=Math.floor(a().timeRemaining/60),$=a().timeRemaining%60,P=Math.max(0,O-1)*60+$;Ft(P)}$e(()=>(a(),s()),()=>{const O=a(),$=s();let P=$.workDuration;O.currentSession==="Short Break"?P=$.shortBreakDuration:O.currentSession==="Long Break"&&(P=$.longBreakDuration),P=Math.max(1,P),P>0?y(f,Math.max(0,100-O.timeRemaining/P*100)):y(f,O.timeRemaining>0?0:100)}),$e(()=>l(),()=>{y(r,l().substring(0,2))}),$e(()=>l(),()=>{y(h,l().substring(3,5))}),ht(),ze();var M=mi(),d=u(M),c=u(d,!0);g(d);var k=p(d,2),A=u(k);{var C=O=>{var $=fi(),P=u($),N=p(P,2);g($),pe(()=>{P.disabled=(a(),re(()=>a().isRunning)),N.disabled=(a(),re(()=>a().isRunning||a().timeRemaining<120&&a().timeRemaining%60===0&&a().timeRemaining/60<=1||a().timeRemaining<60))}),D("click",P,v),D("click",N,b),Q(O,$)};we(A,O=>{a(),re(()=>!a().isRunning)&&O(C)})}var _=p(A,2),j=u(_,!0);g(_);var T=p(_,4),x=u(T,!0);g(T),g(k);var z=p(k,2),L=u(z);g(z),g(M),pe(()=>{ne(c,(a(),re(()=>a().currentSession))),ne(j,n(r)),ne(x,n(h)),wt(L,`width: ${n(f)??""}%;`),nt(L,"aria-valuenow",n(f))}),Q(e,M),Fe(),o()}var bi=ee(`<button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
             text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-teal-300
             focus:ring-2 focus:ring-teal-400
             focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50"> </button>`),Si=ee(`<button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
             text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-amber-300
             focus:ring-2 focus:ring-amber-300
             focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50" aria-label="Pause timer">Pause</button>`),_i=ee(`<div class="mt-6 flex justify-center space-x-2"><!> <button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
           text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-sky-300
           focus:ring-2 focus:ring-sky-400
           focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50" aria-label="Skip to next session" title="Skip to next session">Skip <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="ml-1 inline h-5 w-5 align-text-bottom"><path fill-rule="evenodd" d="M2 10a.75.75 0 0 1 .75-.75h12.59l-2.1-1.95a.75.75 0 1 1 1.02-1.1l3.5 3.25a.75.75 0 0 1 0 1.1l-3.5 3.25a.75.75 0 1 1-1.02-1.1l2.1-1.95H2.75A.75.75 0 0 1 2 10Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M18 10a.75.75 0 0 1-.75.75h-.008a.75.75 0 0 1 0-1.5h.008A.75.75 0 0 1 18 10Z" clip-rule="evenodd"></path></svg></button> <button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
           text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-rose-300
           focus:ring-2 focus:ring-rose-400
           focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50" aria-label="Reset current session timer" title="Reset current session">Reset <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="ml-1 inline h-5 w-5 align-text-bottom"><path fill-rule="evenodd" d="M15.323 3.407a.75.75 0 0 1 0 1.06l-2.096 2.096A6.5 6.5 0 0 1 10 16.5a6.501 6.501 0 0 1-6.414-5.523.75.75 0 0 1 1.482-.236A5.001 5.001 0 0 0 10 15a5 5 0 0 0 4.19-2.402l-1.618 1.617a.75.75 0 1 1-1.06 1.061l3.25-3.25a.75.75 0 0 1 0-1.06l-3.25-3.25a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M4.677 12.593a.75.75 0 0 1 0-1.06l2.096-2.096A6.5 6.5 0 0 1 10 3.5a6.501 6.501 0 0 1 6.414 5.523.75.75 0 0 1-1.482.236A5.001 5.001 0 0 0 10 5a5 5 0 0 0-4.19 2.402l1.618-1.617a.75.75 0 1 1 1.06-1.061L5.238 8.075a.75.75 0 0 1 0 1.06l3.25 3.25a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd"></path></svg></button></div>`);function Mi(e,t){Be(t,!1);const[i,o]=pt(),a=()=>Pe(me,"$timerState",i),s=()=>Pe(ke,"$timerSettings",i);let l=E();$e(()=>(a(),s()),()=>{const d=a(),c=s();y(l,!d.timeRemaining||d.currentSession==="Work"&&d.timeRemaining===c.workDuration||d.currentSession==="Short Break"&&d.timeRemaining===c.shortBreakDuration||d.currentSession==="Long Break"&&d.timeRemaining===c.longBreakDuration)}),ht(),ze();var r=_i(),h=u(r);{var f=d=>{var c=bi(),k=u(c,!0);g(c),pe(()=>{nt(c,"aria-label",n(l)?"Start timer":"Resume timer"),ne(k,n(l)?"Start":"Resume")}),D("click",c,function(...A){Ma?.apply(this,A)}),Q(d,c)},v=d=>{var c=Si();D("click",c,function(...k){gi?.apply(this,k)}),Q(d,c)};we(h,d=>{a(),re(()=>!a().isRunning)?d(f):d(v,!1)})}var b=p(h,2),M=p(b,2);g(r),pe(()=>{b.disabled=(a(),re(()=>a().isRunning)),M.disabled=(a(),n(l),re(()=>a().isRunning&&n(l)))}),D("click",b,function(...d){hi?.apply(this,d)}),D("click",M,function(...d){Aa?.apply(this,d)}),Q(e,r),Fe(),o()}const Nt=20,Te={gradientColor1:"hsl(210, 70%, 50%)",gradientColor2:"hsl(200, 68%, 50%)",isFloatingEnabled:!0,gradientColor1History:["hsl(210, 70%, 50%)"],gradientColor1HistoryIndex:0,gradientColor2History:["hsl(200, 68%, 50%)"],gradientColor2HistoryIndex:0,isAutoCyclingColor1:!1,isAutoCyclingColor2:!1};function wa(e){if(!e)return null;const t=e.match(/hsl\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)/);return t?{h:parseInt(t[1]),s:parseInt(t[2]),l:parseInt(t[3])}:null}function Xt(){const e=Ie(xe);return wa(e.gradientColor1)||{h:210,s:70,l:50}}function Ht(){const e=Ie(xe);return wa(e.gradientColor2)||{h:200,s:68,l:50}}function Ai(){let e={...Te,gradientColor1History:[...Te.gradientColor1History],gradientColor2History:[...Te.gradientColor2History]};if(typeof localStorage<"u"){const t=localStorage.getItem("backgroundSettings");if(t)try{const i=JSON.parse(t);e={...e,...i,isAutoCyclingColor1:i.isAutoCyclingColor1??Te.isAutoCyclingColor1,isAutoCyclingColor2:i.isAutoCyclingColor2??Te.isAutoCyclingColor2},!i.gradientColor1History||i.gradientColor1History.length===0?(e.gradientColor1History=[e.gradientColor1],e.gradientColor1HistoryIndex=0):(e.gradientColor1HistoryIndex=Math.max(0,Math.min(i.gradientColor1HistoryIndex??0,i.gradientColor1History.length-1)),e.gradientColor1=i.gradientColor1History[e.gradientColor1HistoryIndex]),!i.gradientColor2History||i.gradientColor2History.length===0?(e.gradientColor2History=[e.gradientColor2],e.gradientColor2HistoryIndex=0):(e.gradientColor2HistoryIndex=Math.max(0,Math.min(i.gradientColor2HistoryIndex??0,i.gradientColor2History.length-1)),e.gradientColor2=i.gradientColor2History[e.gradientColor2HistoryIndex])}catch(i){return console.error("Failed to parse background settings from localStorage",i),{...Te,gradientColor1History:[...Te.gradientColor1History],gradientColor2History:[...Te.gradientColor2History]}}}return e}const wi=Ai(),xe=Rt(wi);typeof localStorage<"u"&&xe.subscribe(e=>{localStorage.setItem("backgroundSettings",JSON.stringify(e))});function ka(e,t,i){let o=[...t];i<o.length-1&&(o=o.slice(0,i+1)),o.push(e),o.length>Nt&&(o=o.slice(o.length-Nt));const a=o.length-1;return{history:o,index:a}}function Yt(e,t,i){let o;typeof e=="string"?o=e:o=`hsl(${Math.round(e)}, ${Math.round(t)}%, ${Math.round(i)}%)`;const a=Ie(xe);if(a.gradientColor1===o)return;const{history:s,index:l}=ka(o,a.gradientColor1History,a.gradientColor1HistoryIndex);xe.update(r=>({...r,gradientColor1:o,gradientColor1History:s,gradientColor1HistoryIndex:l}))}function jt(e,t,i){let o;typeof e=="string"?o=e:o=`hsl(${Math.round(e)}, ${Math.round(t)}%, ${Math.round(i)}%)`;const a=Ie(xe);if(a.gradientColor2===o)return;const{history:s,index:l}=ka(o,a.gradientColor2History,a.gradientColor2HistoryIndex);xe.update(r=>({...r,gradientColor2:o,gradientColor2History:s,gradientColor2HistoryIndex:l}))}function ki(){xe.set({...Te,gradientColor1History:[...Te.gradientColor1History],gradientColor2History:[...Te.gradientColor2History]})}const xi={mouseMove:{maxRadius:50,speed:.35,lineWidth:1,initialOpacity:.35,color:"rgb(100, 180, 255)",decayRate:.005},click:{maxRadius:85,speed:.9,lineWidth:2.2,initialOpacity:.95,color:"rgb(190, 230, 255)",decayRate:.008},ambient:{maxRadius:30,speed:.2,lineWidth:1,initialOpacity:.15,color:"rgb(150, 200, 255)",decayRate:.008},longPress:{maxRadius:150,speed:.3,lineWidth:3.5,initialOpacity:.85,color:"rgb(70, 140, 220)",decayRate:.006},glintExpire:{maxRadius:40,speed:.9,lineWidth:1,initialOpacity:.6,color:"rgba(255, 255, 230, 0.7)",decayRate:.02}},Ri=2e3,xa=128,Ci=16,Ii=.05,Ei=30,Ti=400,Oi=10,Wt=.0011,Di=.003,Ra=3e3,St=2,Pi=15,Gi="rgba(255, 255, 234, 0.95)",Ca=4,Li=1e3,qt=3,Vt=.15,$i=.3,Kt=.2,zi=.5,Ut=45,Bi=60,ot=.6,st=.6,Zt=1,Fi=2.25,Ni=600,Jt=.05,Xi=.25,Qt=.5,Hi=1.25,ea=.25,Yi=.55,ji=6e4,Wi=5e3,je=[{x1:0,y1:0,x2:1,y2:1},{x1:.5,y1:0,x2:.5,y2:1},{x1:1,y1:0,x2:0,y2:1},{x1:1,y1:.5,x2:0,y2:.5},{x1:1,y1:1,x2:0,y2:0},{x1:.5,y1:1,x2:.5,y2:0},{x1:0,y1:1,x2:1,y2:0},{x1:0,y1:.5,x2:1,y2:.5}],Ia=25e3,qi=.55,Vi="rgba(235, 245, 255, 0.7)",Ki="rgba(210, 230, 245, 0.5)",ta=.5,Ui=1.5,Ye=15,aa=5,Zi=12,ia=500,Ji=1e3,Qi=.2,tt=.02,_t=.12,na=.005,Mt=.05,oa=.02,en=.3,At=Math.PI/4,sa=25,tn=100,an=.25,ra=10,nn=Math.PI/3,on=2,la=30,sn=70,rn=.25,kt={plane:{minSpeed:.25,maxSpeed:.5,minSize:25,maxSize:45,baseOpacity:.4,minDuration:1e4,maxDuration:2e4,chancePerInterval:.01},whaleShadow:{minSpeed:.18,maxSpeed:.32,minSize:40,maxSize:70,baseOpacity:.5,minDuration:1200,maxDuration:2500,chancePerInterval:.09}};function ln(e){const t=Math.max(0,Math.min(1,e));return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}const at=15,it=.04;function cn(e,t,i){const o=(e*it+t*it*.3+i*.8)*Math.PI*2,a=(e*it*.7-t*it+i*.5)*Math.PI*2,s=Math.sin(o)*at*.6+Math.sin(a)*at*.4,l=Math.cos(o)*at*.4+Math.cos(a)*at*.6;return{dx:s,dy:l}}let ca=0,da=0,va=0,dn=0,ua=0,ga=0,vn=0,ha=0;const rt=[],lt=[],ct=[],Ea=[],dt=[],vt=[],Ta=[],ut=[],Oa=[],Da=[],Pa=[],Ga=[],La=[],$a=[],za=[],un=()=>rt,ft=()=>lt,Ba=()=>ct,Et=()=>Ea,Tt=()=>dt,Ot=()=>vt,Qe=()=>Ta,gt=()=>ut;function gn(e){let t=Oa.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.maxRadius=e.maxRadius,t.opacity=e.opacity,t.speed=e.speed,t.lineWidth=e.lineWidth,t.color=e.color,t.isAmbient=e.isAmbient,t.decayRate=e.decayRate,t.id=ca++):t={...e,id:ca++},rt.push(t)}function hn(e){let t=$a.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.currentMaxRadius=e.currentMaxRadius,t.opacity=e.opacity,t.growthSpeed=e.growthSpeed,t.opacitySpeed=e.opacitySpeed,t.color=e.color,t.vx=e.vx,t.vy=e.vy,t.isWave=e.isWave,t.relativeXInSpawn=e.relativeXInSpawn,t.relativeYInSpawn=e.relativeYInSpawn,t.baseVx=e.baseVx,t.baseVy=e.baseVy,t.id=da++):t={...e,id:da++},lt.push(t)}function pn(e){let t=Da.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.opacity=e.opacity,t.decay=e.decay,t.color=e.color,t.id=va++):t={...e,id:va++},ct.push(t)}const fn=e=>{Ea.push({...e,id:dn++})};function mn(e){let t=Pa.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.opacity=e.opacity,t.decay=e.decay,t.color=e.color,t.id=ua++):t={...e,id:ua++},dt.push(t)}function yn(e){let t=Ga.pop();t?(t.type=e.type,t.x=e.x,t.y=e.y,t.vx=e.vx,t.vy=e.vy,t.size=e.size,t.opacity=e.opacity,t.age=0,t.maxAge=e.maxAge,e.type==="whaleShadow"?(t.bodyAngle=e.bodyAngle??0,t.bodyAngleSpeed=e.bodyAngleSpeed,t.bodyAngleAmplitude=e.bodyAngleAmplitude,t.tailAngleOffset=e.tailAngleOffset??0,t.tailOscillationSpeed=e.tailOscillationSpeed,t.tailOscillationAmplitude=e.tailOscillationAmplitude):(delete t.bodyAngle,delete t.bodyAngleSpeed,delete t.bodyAngleAmplitude,delete t.tailAngleOffset,delete t.tailOscillationSpeed,delete t.tailOscillationAmplitude),t.id=ga++):t={...e,age:0,id:ga++},vt.push(t)}const bn=e=>{Ta.push({...e,id:vn++})};function Sn(e){let t=La.pop();t?(t.anchorX=e.anchorX,t.anchorY=e.anchorY,t.particles=[],t.vx=e.vx,t.vy=e.vy,t.opacity=0,t.age=0,t.maxAge=e.maxAge,t.color=e.color,t.id=ha++):t={...e,particles:[],opacity:0,age:0,id:ha++},ut.push(t)}function _n(e,t){let i=za.pop();i?(i.x=t.x,i.y=t.y,i.size=t.size,i.opacity=0,i.initialRelativeX=t.initialRelativeX,i.initialRelativeY=t.initialRelativeY,i.appearAtAge=t.appearAtAge,i.maxOpacity=t.maxOpacity,i.particleAge=0,i.particleMaxAge=t.particleMaxAge):i={...t,opacity:0,particleAge:0},e.particles.push(i)}function Mn(e){const t=rt.findIndex(i=>i.id===e.id);if(t!==-1){const i=rt.splice(t,1)[0];i&&Oa.push(i)}else console.warn(`Attempted to release ripple with ID ${e.id} not found in active list.`)}function An(){if(lt.length>0){const e=lt.shift();if(e)return $a.push(e),e}return null}function wn(e){const t=ct.findIndex(i=>i.id===e.id);if(t!==-1){const i=ct.splice(t,1)[0];i&&Da.push(i)}else console.warn(`Attempted to release glint with ID ${e.id} not found in active list.`)}function kn(e){const t=dt.findIndex(i=>i.id===e.id);if(t!==-1){const i=dt.splice(t,1)[0];i&&Pa.push(i)}else console.warn(`Attempted to release sunGlint with ID ${e.id} not found in active list.`)}function xn(e){const t=vt.findIndex(i=>i.id===e.id);if(t!==-1){const i=vt.splice(t,1)[0];i&&Ga.push(i)}else console.warn(`Attempted to release rareSighting with ID ${e.id} not found in active list.`)}function Fa(e){za.push(e)}function xt(e){const t=ut.findIndex(i=>i.id===e.id);if(t!==-1){const i=ut.splice(t,1)[0];if(i){for(const o of i.particles)Fa(o);i.particles=[],La.push(i)}}else console.warn(`Attempted to release foamStreak with ID ${e.id} not found in active list.`)}function Ue(e,t,i){const o=xi[i];if(!o)throw console.error(`Unknown ripple type: ${i}. Ensure it is defined in RIPPLE_CONFIG.`),new Error(`Unknown ripple type: ${i}`);let a=o.speed,s=o.maxRadius;(i==="mouseMove"||i==="click")&&(a=o.speed*(.9+Math.random()*.2),s=o.maxRadius*(.9+Math.random()*.2)),gn({x:e,y:t,radius:0,maxRadius:s,opacity:o.initialOpacity,speed:a,lineWidth:o.lineWidth,color:o.color,isAmbient:i==="ambient",decayRate:o.decayRate})}function Rn(e){const t=e.globalAlpha,i=un();for(let o=i.length-1;o>=0;o--){const a=i[o];if(a.radius+=a.speed,a.opacity-=a.decayRate,a.opacity<=0||a.radius>=a.maxRadius){Mn(a);continue}e.beginPath(),e.arc(a.x,a.y,a.radius,0,Math.PI*2),e.lineWidth=a.lineWidth,e.strokeStyle=a.color,e.globalAlpha=Math.max(0,a.opacity),e.stroke()}e.globalAlpha=t}function pa(e,t,i){ft().length>=xa&&An();let o,a,s,l,r,h,f,v=1;const b=e*(1-ot)/2,M=e*ot,d=t*(1-st)/2,c=t*st,k=b+Math.random()*M,A=d+Math.random()*c;i?(o=Math.min(e,t)/2*(.8+Math.random()*.4),v=Kt+Math.random()*(zi-Kt),a=(Math.random()-.5)*.2*v,s=(Math.random()-.5)*.2*v,l=Vt+Math.random()*($i-Vt),r=(Math.random()*.015+.005)*(Math.random()<.5?1:-1)*v,h=(Math.random()*15e-5+5e-5)*(Math.random()<.5?1:-1)*v,f=`hsl(210, ${68+Math.random()*10}%, ${Ut+Math.random()*(Bi-Ut)}%)`):(o=Math.random()*80+40,a=(Math.random()-.5)*.12,s=(Math.random()-.5)*.12,l=Math.random()*.03+.01,r=(Math.random()*.02+.01)*(Math.random()<.5?1:-1),h=(Math.random()*2e-4+1e-4)*(Math.random()<.5?1:-1),f=`hsl(${200+Math.random()*20}, ${65+Math.random()*20}%, ${35+Math.random()*30}%)`),hn({x:k,y:A,radius:Math.random()*o*.3+o*.2,currentMaxRadius:o,opacity:l,growthSpeed:r,opacitySpeed:h,color:f,vx:a,vy:s,isWave:i,relativeXInSpawn:M>0?(k-b)/M:.5,relativeYInSpawn:c>0?(A-d)/c:.5,baseVx:a,baseVy:s})}function Cn(e,t,i,o){const a=ft();if(a.length===0)return;const s=e.globalCompositeOperation;e.globalCompositeOperation="screen";for(let l=a.length-1;l>=0;l--){const r=a[l];r.x+=r.vx,r.y+=r.vy,r.radius+=r.growthSpeed,r.opacity+=r.opacitySpeed,(r.opacity>.06||r.opacity<.005)&&(r.opacitySpeed*=-1,r.opacity=Math.max(.005,Math.min(.06,r.opacity))),(r.radius>r.currentMaxRadius||r.radius<r.currentMaxRadius*.2)&&(r.growthSpeed*=-1,r.radius=Math.max(10,Math.min(r.currentMaxRadius,r.radius))),(r.x-r.radius<0||r.x+r.radius>t)&&(r.vx*=-1,r.x=Math.max(r.radius,Math.min(t-r.radius,r.x))),(r.y-r.radius<0||r.y+r.radius>i)&&(r.vy*=-1,r.y=Math.max(r.radius,Math.min(i-r.radius,r.y)));const h=cn(r.x,r.y,o),f=r.x+h.dx,v=r.y+h.dy,b=e.createRadialGradient(f,v,0,f,v,r.radius),M=r.color.substring(0,r.color.lastIndexOf(")"));b.addColorStop(0,`${M}, ${r.opacity})`),b.addColorStop(.7,`${M}, ${r.opacity*.5})`),b.addColorStop(1,`${M}, 0)`),e.fillStyle=b,e.beginPath(),e.arc(f,v,r.radius,0,Math.PI*2),e.fill()}e.globalCompositeOperation=s}function In(e,t){const i=ft();if(i.length===0)return;const o=e*(1-ot)/2,a=e*ot,s=t*(1-st)/2,l=t*st,r=o+a/2,h=s+l/2,f=Math.sqrt(Math.pow(a/2,2)+Math.pow(l/2,2))+.001;for(const v of i){const b=v.relativeXInSpawn!==void 0?v.relativeXInSpawn:Math.random(),M=v.relativeYInSpawn!==void 0?v.relativeYInSpawn:Math.random();if(v.x=o+b*a,v.y=s+M*l,v.baseVx!==void 0&&v.baseVy!==void 0){const d=Math.sqrt(Math.pow(v.x-r,2)+Math.pow(v.y-h,2)),c=Math.min(1,d/f),k=Zt+c*(Fi-Zt);v.vx=v.baseVx*k,v.vy=v.baseVy*k}if(v.isWave){const d=Math.min(e,t)/2*(.8+Math.random()*.4);v.currentMaxRadius=d,v.radius=Math.random()*d*.3+d*.2}}}const fa=[[0,0],[0,1],[0,2],[1,0],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[1,2],[2,0],[2,1],[2,2]];function Na(e,t){const i=fa[Math.floor(Math.random()*fa.length)],o=i[0],a=i[1],s=e/3,l=t/3,r=a*s+Math.random()*s,h=o*l+Math.random()*l;return{x:r,y:h}}function En(e,t,i){if(Tt().length>=Ra)return;const o=Math.random()*Math.PI*2,a=Math.random()*i*.5;mn({x:e+Math.cos(o)*a,y:t+Math.sin(o)*a,radius:Math.random()*.6+.4,opacity:Math.random()*.3+.7,decay:Math.random()*.008+.002,color:Gi})}function Tn(e,t){const i=Math.min(e,t),{x:o,y:a}=Na(e,t);fn({x:o,y:a,baseRadius:i*.45,radiusAmplitude:i*.12,currentRadius:i*.45,baseOpacity:.35,opacityAmplitude:.3,currentOpacity:.35,pulseAngle:Math.random()*Math.PI*2,pulseSpeed:Wt+Math.random()*(Di-Wt),vx:0,vy:0,relativeX:o/e,relativeY:a/t})}function On(e){const t=Tt();if(t.length===0)return;const i=e.globalAlpha;for(let o=t.length-1;o>=0;o--){const a=t[o];a.x+=(Math.random()-.5)*.5,a.y+=(Math.random()-.5)*.5,a.opacity-=a.decay,a.radius+=.005,a.opacity<=0?kn(a):(e.beginPath(),e.arc(a.x,a.y,a.radius,0,Math.PI*2),e.fillStyle=a.color,e.globalAlpha=Math.max(0,a.opacity),e.fill())}e.globalAlpha=i}function Dn(e){const t=Et();if(t.length===0)return;const i=e.globalCompositeOperation;e.globalCompositeOperation="lighter";const o=e.globalAlpha;for(let a=0;a<t.length;a++){const s=t[a];s.pulseAngle+=s.pulseSpeed,s.currentRadius=s.baseRadius+Math.sin(s.pulseAngle)*s.radiusAmplitude,s.currentOpacity=s.baseOpacity+(Math.sin(s.pulseAngle*.7+Math.PI/3)*.5+.5)*s.opacityAmplitude,s.currentOpacity=Math.max(0,Math.min(1,s.currentOpacity));const l=s.baseOpacity+s.opacityAmplitude,r=l>0?Math.max(0,s.currentOpacity/l):0,h=l>0?s.baseOpacity/l:0;let f=0;if(r>0)if(r<=h){const b=h>0?r/h:0;f=Math.round(b*St)}else{const b=1-h,M=b>0?(r-h)/b:1;f=Math.round(St+M*(Pi-St))}f=Math.max(0,f);for(let b=0;b<f&&(En(s.x,s.y,s.currentRadius),!(Tt().length>=Ra));b++);const v=e.createRadialGradient(s.x,s.y,0,s.x,s.y,s.currentRadius);v.addColorStop(0,`rgba(255, 250, 220, ${s.currentOpacity})`),v.addColorStop(.25,`rgba(255, 235, 180, ${s.currentOpacity*.8})`),v.addColorStop(.6,`rgba(255, 220, 150, ${s.currentOpacity*.4})`),v.addColorStop(1,"rgba(255, 210, 130, 0)"),e.fillStyle=v,e.globalAlpha=1,e.beginPath(),e.arc(s.x,s.y,s.currentRadius,0,Math.PI*2),e.fill()}e.globalCompositeOperation=i,e.globalAlpha=o}function Pn(e,t){const i=Et();if(i.length===0)return;const o=Math.min(e,t);for(const a of i){if(a.relativeX!==void 0&&a.relativeY!==void 0)a.x=a.relativeX*e,a.y=a.relativeY*t;else{console.warn("SunGlow missing relative coordinates during resize. Recalculating position.");const{x:s,y:l}=Na(e,t);a.x=s,a.y=l,a.relativeX=s/e,a.relativeY=l/t}a.baseRadius=o*.45,a.radiusAmplitude=o*.12}}function Gn(e,t){Ba().length>=Ci||pn({x:Math.random()*e,y:Math.random()*t,radius:Math.random()*.25+.2,opacity:Math.random()*.4+.2,decay:Math.random()*.005+.005,color:"rgba(255, 255, 230, 0.85)"})}function Ln(e){const t=Ba();if(t.length===0)return[];const i=[],o=e.globalAlpha;for(let a=t.length-1;a>=0;a--){const s=t[a];s.opacity-=s.decay,s.opacity<=0?(i.push({x:s.x,y:s.y}),wn(s)):(e.beginPath(),e.arc(s.x,s.y,s.radius,0,Math.PI*2),e.fillStyle=s.color,e.globalAlpha=Math.max(0,s.opacity),e.fill())}return e.globalAlpha=o,i}function $n(e,t){e.fillRect(t.x-t.size/2,t.y-t.size/8,t.size,t.size/4),e.fillRect(t.x-t.size/6,t.y-t.size/3,t.size/3,t.size*.8)}function zn(e,t){t.bodyAngleSpeed&&t.bodyAngleAmplitude&&(t.bodyAngle=Math.sin(t.age*t.bodyAngleSpeed)*t.bodyAngleAmplitude),t.tailOscillationSpeed&&t.tailOscillationAmplitude&&(t.tailAngleOffset=Math.sin(t.age*t.tailOscillationSpeed)*t.tailOscillationAmplitude);const a=t.size*(1+Math.sin(t.age*.02)*.05),s=a/3.5,l=s*.9,r=a*.3;e.save(),e.translate(t.x,t.y),e.rotate(t.bodyAngle||0),e.beginPath(),e.ellipse(0,0,a/2,s/2,0,0,Math.PI*2),e.fill();const h=-a/2*.85,f=0;e.save(),e.translate(h,f),e.rotate(t.tailAngleOffset||0),e.beginPath(),e.ellipse(0,0,r/2,l/2,0,0,Math.PI*2),e.fill(),e.restore(),e.restore()}function Bn(e,t,i){if(Ot().length>=Ca)return;const o=i,a=kt[o];if(!a){console.warn(`Configuration not found for rare sighting type: ${o}`);return}let s,l,r,h;const f=a.minSpeed+Math.random()*(a.maxSpeed-a.minSpeed);switch(o){case"plane":s=Math.random()<.5?-a.maxSize:e+a.maxSize,l=Math.random()*t*.3,r=(s<0?1:-1)*f,h=(Math.random()-.5)*f*.3;break;case"whaleShadow":s=Math.random()<.5?-a.maxSize*1.5:e+a.maxSize*1.5,l=t*(.5+Math.random()*.4),r=(s<0?1:-1)*f,h=(Math.random()-.5)*f*.1;break;default:console.warn(`Unhandled rare sighting type for creation: ${o}`);return}const v={type:o,x:s,y:l,vx:r,vy:h,size:a.minSize+Math.random()*(a.maxSize-a.minSize),opacity:a.baseOpacity,age:0,maxAge:a.minDuration+Math.random()*(a.maxDuration-a.minDuration),...o==="whaleShadow"?{bodyAngle:0,bodyAngleSpeed:(Math.random()*.003+.002)*(Math.random()<.5?1:-1),bodyAngleAmplitude:Math.PI/36,tailAngleOffset:0,tailOscillationSpeed:Math.random()*.04+.03,tailOscillationAmplitude:Math.PI/10}:{}};yn(v)}function Fn(e,t,i){const o=Ot();if(o.length===0)return;const a=e.globalAlpha;for(let s=o.length-1;s>=0;s--){const l=o[s];l.age++,l.x+=l.vx,l.y+=l.vy;const r=l.size*2,h=l.age>l.maxAge,f=l.x<-r||l.x>t+r||l.y<-r||l.y>i+r;if(h||f){xn(l);continue}let v=l.opacity;const b=.8;if(l.age/l.maxAge>b){const M=(l.age/l.maxAge-b)/(1-b);v=l.opacity*(1-M)}switch(v=Math.max(0,v),e.globalAlpha=v,e.fillStyle=`rgba(10, 10, 20, ${v*.7})`,l.type){case"plane":$n(e,l);break;case"whaleShadow":zn(e,l);break;default:console.warn(`No drawing function implemented for rare sighting type: ${l.type}`)}}e.globalAlpha=a}function Nn(e,t){if(Qe().length>0){console.warn("Attempted to re-initialize water grains. Skipping.");return}for(let i=0;i<Ni;i++){const o=Jt+Math.random()*(Xi-Jt),a=Math.random()*Math.PI*2,s=20+Math.random()*10,l=Math.random()*e,r=Math.random()*t;bn({x:l,y:r,vx:Math.cos(a)*o,vy:Math.sin(a)*o,size:Qt+Math.random()*(Hi-Qt),opacity:ea+Math.random()*(Yi-ea),color:`hsl(210, ${65+Math.random()*10}%, ${s}%)`,relativeX:e>0?l/e:.5,relativeY:t>0?r/t:.5})}console.log(`Initialized ${Qe().length} water grains.`)}function Xn(e,t,i){const o=Qe();if(o.length===0)return;const a=e.globalAlpha;for(const s of o)s.x+=s.vx,s.y+=s.vy,s.x<-s.size?s.x=t+s.size:s.x>t+s.size&&(s.x=-s.size),s.y<-s.size?s.y=i+s.size:s.y>i+s.size&&(s.y=-s.size),e.beginPath(),e.arc(s.x,s.y,s.size,0,Math.PI*2),e.fillStyle=s.color,e.globalAlpha=Math.max(0,s.opacity*a),e.fill();e.globalAlpha=a}function Hn(e,t){const i=Qe();if(i.length!==0)for(const o of i)o.relativeX!==void 0&&o.relativeY!==void 0?(o.x=o.relativeX*e,o.y=o.relativeY*t):(console.warn("WaterGrain missing relative coordinates during resize. Re-randomizing position."),o.x=Math.random()*e,o.y=Math.random()*t,o.relativeX=e>0?o.x/e:.5,o.relativeY=t>0?o.y/t:.5)}function Yn(e,t){if(gt().length>=Ia)return;const i=Math.floor(Math.random()*3);let o,a,s,l,r;i===0?(o=Math.random()*e,a=-Ye,s=(Math.random()-.5)*_t*.5,l=na+Math.random()*(Mt-na),r=Math.PI/2+(Math.random()-.5)*(Math.PI/6)):i===1?(o=-Ye,a=Math.random()*t,s=tt+Math.random()*(_t-tt),l=(Math.random()-.5)*Mt*.4,r=(Math.random()-.5)*(Math.PI/4)):(o=e+Ye,a=Math.random()*t,s=-(tt+Math.random()*(_t-tt)),l=(Math.random()-.5)*Mt*.4,r=Math.PI+(Math.random()-.5)*(Math.PI/4));let h=0;const f=(d,c,k,A,C,_)=>{let j=c,T=k,x=A;for(let z=0;z<C;z++){const L=aa+Math.random()*(Zi-aa);if(x+=(Math.random()-.5)*2*At,_){const P=(x-A+Math.PI*3)%(Math.PI*2)-Math.PI;Math.abs(P)>At*1.5&&(x=A+Math.sign(P)*At*1.5)}else i===0?x=Math.max(Math.PI/4,Math.min(3*Math.PI/4,x)):i===1?x=Math.max(-Math.PI/3,Math.min(Math.PI/3,x)):x=Math.max(2*Math.PI/3,Math.min(4*Math.PI/3,x));const O=j+Math.cos(x)*L,$=T+Math.sin(x)*L;for(let P=0;P<on;P++){const N=ta+Math.random()*(Ui-ta),W=x+Math.PI/2,m=(Math.random()-.5)*Ye*.8,F=j+Math.cos(W)*m,B=T+Math.sin(W)*m;_n(d,{x:F,y:B,initialRelativeX:F,initialRelativeY:B,size:N,opacity:0,appearAtAge:h++*en,maxOpacity:.5+Math.random()*.4,particleAge:0,particleMaxAge:la+Math.random()*(sn-la)})}if(j=O,T=$,!_&&Math.random()<an&&z<C-ra/2&&z>2){const P=(Math.random()<.5?-1:1)*nn*(.7+Math.random()*.6),N=Math.floor(ra*(.5+Math.random()*.5));f(d,j,T,x+P,N,!0)}}},v=sa+Math.floor(Math.random()*(tn-sa+1));f(0,0,r,v,!1);const b={anchorX:o,anchorY:a,particles:[],vx:s,vy:l,opacity:0,age:0,maxAge:ia+Math.random()*(Ji-ia),color:Math.random()<.6?Vi:Ki};Sn(b);const M=gt().find(d=>d.anchorX===o&&d.anchorY===a&&d.age===0);if(M){if(f(M,0,0,r,v,!1),M.particles.length<5){xt(M);return}}else console.warn("Could not find newly added streak to generate particles into.")}function jn(e,t,i){const o=gt();if(o.length===0)return;const a=e.globalAlpha,s=e.globalCompositeOperation;e.globalCompositeOperation="lighter";for(let l=o.length-1;l>=0;l--){const r=o[l];r.age++,r.anchorX+=r.vx,r.anchorY+=r.vy;const h=r.maxAge*Qi;if(r.age<h?r.opacity=r.age/h:r.age>r.maxAge-h?r.opacity=1-(r.age-(r.maxAge-h))/h:r.opacity=1,r.opacity=Math.max(0,Math.min(1,r.opacity)),r.opacity<=0&&r.age>h){xt(r);continue}let f=!0;const v=Ye*5,b=Ye*5;if(r.anchorX>-v&&r.anchorX<t+v&&r.anchorY>-b&&r.anchorY<i+b)f=!1;else{f=!0;for(const M of r.particles){const d=r.anchorX+M.x,c=r.anchorY+M.y;if(d>-M.size&&d<t+M.size&&c>-M.size&&c<i+M.size){f=!1;break}}}if(f&&r.age>h*2){xt(r);continue}e.fillStyle=r.color;for(let M=r.particles.length-1;M>=0;M--){const d=r.particles[M];if(r.age<d.appearAtAge)continue;if(d.particleAge++,d.particleAge>d.particleMaxAge){d.opacity=0,Fa(d),r.particles.splice(M,1);continue}else{const x=d.particleMaxAge*rn;d.particleAge<x?d.opacity=d.particleAge/x*d.maxOpacity:d.particleAge>d.particleMaxAge-x?d.opacity=(1-(d.particleAge-(d.particleMaxAge-x))/x)*d.maxOpacity:d.opacity=d.maxOpacity,d.opacity=Math.max(0,Math.min(d.maxOpacity,d.opacity))}if(d.opacity<=.001)continue;d.x+=(Math.random()-.5)*oa,d.y+=(Math.random()-.5)*oa;const c=d.x-d.initialRelativeX,k=d.y-d.initialRelativeY,A=c*c+k*k,C=Ye*.5;if(A>C*C){const x=Math.sqrt(A);d.x=d.initialRelativeX+c/x*C,d.y=d.initialRelativeY+k/x*C}const _=r.anchorX+d.x,j=r.anchorY+d.y,T=r.opacity*d.opacity;T<=.001||(e.globalAlpha=T*a,e.beginPath(),e.arc(_,j,d.size,0,Math.PI*2),e.fill())}}e.globalCompositeOperation=s,e.globalAlpha=a}var Wn=ee('<canvas class="pointer-events-none fixed top-0 left-0 -z-10 h-full w-full svelte-1mnusik"></canvas>');function qn(e,t){Be(t,!1);let i=$t(t,"gradientColor1",8,"hsl(210, 70%, 50%)"),o=$t(t,"gradientColor2",8,"hsl(200, 68%, 50%)"),a=E(),s,l=0,r=0,h=0,f=1,v=0,b={...je[0]},M=0;Ct(()=>{const c=n(a);if(!c){console.error("Canvas not available onMount");return}const k=c.getContext("2d");if(!k){console.error("Context not available onMount");return}N(),console.log(`[onMount after initial resize] Canvas: ${c.width}x${c.height}`);let A=0,C=0,_=null,j,T=!1,x=0;function z(){const m=Date.now();if(v===0&&(v=m,M=m,h=(r+1)%je.length,f=0),m-v>=ji&&f>=1&&(r=h,h=(r+1)%je.length,f=0,v=m,M=m),f<1){const F=m-M;f=Math.min(1,F/Wi);const B=ln(f),X=je[r],ae=je[h];b.x1=X.x1+(ae.x1-X.x1)*B,b.y1=X.y1+(ae.y1-X.y1)*B,b.x2=X.x2+(ae.x2-X.x2)*B,b.y2=X.y2+(ae.y2-X.y2)*B}else b={...je[h]},r=h}const L=m=>{if(_){if(!T){const B=m.pageX-_.x,X=m.pageY-_.y;Math.sqrt(B*B+X*X)>Oi&&(T=!0)}const F=Date.now();F-A>Ei&&(Ue(m.pageX,m.pageY,"mouseMove"),A=F)}},O=m=>{C=Date.now(),_={x:m.pageX,y:m.pageY},T=!1},$=m=>{if(!_||C===0)return;const F=Date.now()-C;T||(F>=Ti?Ue(m.pageX,m.pageY,"longPress"):Ue(m.pageX,m.pageY,"mouseMove")),_=null,C=0,T=!1},P=()=>{c&&Ue(Math.random()*c.width,Math.random()*c.height,"ambient")};function N(){c&&(c.width=window.innerWidth,c.height=window.innerHeight,console.log(`[resizeCanvas] Canvas: ${c.width}x${c.height}`),In(c.width,c.height),Pn(c.width,c.height),Hn(c.width,c.height))}if(window.addEventListener("resize",N),window.addEventListener("mousemove",L),window.addEventListener("mousedown",O),window.addEventListener("mouseup",$),typeof window<"u"&&(j=window.setInterval(P,Ri)),c){for(let m=0;m<xa-qt;m++)pa(c.width,c.height,!1);for(let m=0;m<qt;m++)pa(c.width,c.height,!0);Tn(c.width,c.height),Nn(c.width,c.height)}console.log(`[onMount End] Canvas: ${c.width}x${c.height}, ShimmerSpots: ${ft().length}, Grains: ${Qe().length}, SunGlows: ${Et().length}`);function W(){if(!k||!c){s=requestAnimationFrame(W);return}l+=.002,z();const m=b.x1*c.width,F=b.y1*c.height,B=b.x2*c.width,X=b.y2*c.height,ae=k.createLinearGradient(m,F,B,X),Y=typeof i()=="string"&&i().includes("hsl")?i():"hsl(210, 70%, 50%)",ie=typeof o()=="string"&&o().includes("hsl")?o():"hsl(200, 68%, 50%)";if(ae.addColorStop(0,Y),ae.addColorStop(1,ie),k.fillStyle=ae,k.fillRect(0,0,c.width,c.height),Rn(k),Cn(k,c.width,c.height,l),Xn(k,c.width,c.height),Dn(k),On(k),x+=16.67,x>=Li){for(const se in kt){const te=se,ce=kt[te];typeof ce.chancePerInterval=="number"&&Math.random()<ce.chancePerInterval&&Ot().length<Ca&&Bn(c.width,c.height,te)}x=0}Fn(k,c.width,c.height),Math.random()<Ii&&Gn(c.width,c.height),Ln(k).forEach(se=>Ue(se.x,se.y,"glintExpire")),Math.random()<qi&&gt().length<Ia&&Yn(c.width,c.height),jn(k,c.width,c.height),s=requestAnimationFrame(W)}return W(),()=>{window.removeEventListener("resize",N),window.removeEventListener("mousemove",L),window.removeEventListener("mousedown",O),window.removeEventListener("mouseup",$),j&&clearInterval(j),s&&cancelAnimationFrame(s)}}),ze();var d=Wn();Ze(d,c=>y(a,c),()=>n(a)),Q(e,d),Fe()}var Vn=ee('<div class="professional-hsl-picker svelte-1bvbq9v"><div class="picker-header svelte-1bvbq9v"><div class="control-buttons svelte-1bvbq9v"><button title="Sync both gradients">ð</button> <button title="Lock current selection">ð</button> <button class="control-btn reset-btn svelte-1bvbq9v" title="Reset to defaults">âº</button></div></div> <div class="slider-section svelte-1bvbq9v"><div class="slider-label svelte-1bvbq9v">Hue (0Â° - 360Â°)</div> <div class="slider-container svelte-1bvbq9v"><canvas class="color-slider svelte-1bvbq9v"></canvas></div></div> <div class="slider-section svelte-1bvbq9v"><div class="slider-label svelte-1bvbq9v">Saturation (0% - 100%)</div> <div class="slider-container svelte-1bvbq9v"><canvas class="color-slider svelte-1bvbq9v"></canvas></div></div> <div class="slider-section svelte-1bvbq9v"><div class="slider-label svelte-1bvbq9v">Lightness (0% - 100%)</div> <div class="slider-container svelte-1bvbq9v"><canvas class="color-slider svelte-1bvbq9v"></canvas></div></div> <div class="color-preview svelte-1bvbq9v"><div class="preview-item svelte-1bvbq9v"><div class="preview-swatch svelte-1bvbq9v"></div> <span class="preview-label svelte-1bvbq9v"> </span></div> <div class="preview-item svelte-1bvbq9v"><div class="preview-swatch svelte-1bvbq9v"></div> <span class="preview-label svelte-1bvbq9v"> </span></div></div> <div class="instructions svelte-1bvbq9v"><p>Click: Set Gradient 1 â¢ Drag indicators to move</p></div></div>');function Kn(e,t){Be(t,!1);const i=E(),o=E();let a=E(),s=E(),l=E(),r,h=E(null),f=E(null),v=E(null),b=E(!1),M=E(!1),d=!1,c=null,k=null;const A=320,C=40,_=16;let j=0,T={x:0,targetX:0,scale:1,opacity:.9},x={x:0,targetX:0,scale:1,opacity:.9},z={x:0,targetX:0,scale:1,opacity:.9},L={x:0,targetX:0,scale:1,opacity:.9},O={x:0,targetX:0,scale:1,opacity:.9},$={x:0,targetX:0,scale:1,opacity:.9},P;function N(){T.targetX=_+n(i).h/360*(A-2*_),x.targetX=_+n(o).h/360*(A-2*_),T.x=T.targetX,x.x=x.targetX,z.targetX=_+n(i).s/100*(A-2*_),L.targetX=_+n(o).s/100*(A-2*_),z.x=z.targetX,L.x=L.targetX,O.targetX=_+n(i).l/100*(A-2*_),$.targetX=_+n(o).l/100*(A-2*_),O.x=O.targetX,$.x=$.targetX}function W(S,w){const R=Math.max(0,Math.min(1,(S-_)/(A-2*_)));switch(w){case"hue":return R*360;case"saturation":return R*100;case"lightness":return R*100}}function m(){if(!n(h)||!n(f)||!n(v)){r=requestAnimationFrame(m);return}j+=.016,d||(T.x+=(T.targetX-T.x)*.15,x.x+=(x.targetX-x.x)*.15,z.x+=(z.targetX-z.x)*.15,L.x+=(L.targetX-L.x)*.15,O.x+=(O.targetX-O.x)*.15,$.x+=($.targetX-$.x)*.15),[T,x,z,L,O,$].forEach((w,R)=>{const q=R%2+1;c===q&&(k==="hue"&&R<2||k==="saturation"&&R>=2&&R<4||k==="lightness"&&R>=4)?(w.scale=1+.2*Math.sin(j*8),w.opacity=.95):(w.scale+=(1-w.scale)*.1,w.opacity+=(.9-w.opacity)*.1)}),F(),r=requestAnimationFrame(m)}function F(){B(),X(),ae()}function B(){if(!n(h))return;n(h).clearRect(0,0,A,C);const S=n(h).createLinearGradient(_,0,A-_,0);for(let w=0;w<=12;w++){const R=w/12*360;S.addColorStop(w/12,`hsl(${R}, 70%, 50%)`)}ye(h,n(h).fillStyle=S),ie(n(h),_,8,A-2*_,C-16,8),n(h).fill(),ye(h,n(h).strokeStyle="rgba(255, 255, 255, 0.2)"),ye(h,n(h).lineWidth=1),ie(n(h),_,8,A-2*_,C-16,8),n(h).stroke(),Y(n(h),T,"#3B82F6","1"),Y(n(h),x,"#EC4899","2")}function X(){if(!n(f))return;n(f).clearRect(0,0,A,C);const S=(n(i).h+n(o).h)/2,w=n(f).createLinearGradient(_,0,A-_,0);w.addColorStop(0,`hsl(${S}, 0%, 50%)`),w.addColorStop(1,`hsl(${S}, 100%, 50%)`),ye(f,n(f).fillStyle=w),ie(n(f),_,8,A-2*_,C-16,8),n(f).fill(),ye(f,n(f).strokeStyle="rgba(255, 255, 255, 0.2)"),ye(f,n(f).lineWidth=1),ie(n(f),_,8,A-2*_,C-16,8),n(f).stroke(),Y(n(f),z,"#3B82F6","1"),Y(n(f),L,"#EC4899","2")}function ae(){if(!n(v))return;n(v).clearRect(0,0,A,C);const S=(n(i).h+n(o).h)/2,w=(n(i).s+n(o).s)/2,R=n(v).createLinearGradient(_,0,A-_,0);R.addColorStop(0,`hsl(${S}, ${w}%, 0%)`),R.addColorStop(.25,`hsl(${S}, ${w}%, 25%)`),R.addColorStop(.5,`hsl(${S}, ${w}%, 50%)`),R.addColorStop(.75,`hsl(${S}, ${w}%, 75%)`),R.addColorStop(1,`hsl(${S}, ${w}%, 100%)`),ye(v,n(v).fillStyle=R),ie(n(v),_,8,A-2*_,C-16,8),n(v).fill(),ye(v,n(v).strokeStyle="rgba(255, 255, 255, 0.2)"),ye(v,n(v).lineWidth=1),ie(n(v),_,8,A-2*_,C-16,8),n(v).stroke(),Y(n(v),O,"#3B82F6","1"),Y(n(v),$,"#EC4899","2")}function Y(S,w,R,q){const V=w.x,K=C/2,Z=w.scale,He=w.opacity;S.save(),S.globalAlpha=He;const Ve=S.createRadialGradient(V,K,0,V,K,20*Z);Ve.addColorStop(0,R+"40"),Ve.addColorStop(1,R+"00"),S.fillStyle=Ve,S.fillRect(V-20*Z,K-20*Z,40*Z,40*Z),S.beginPath(),S.arc(V,K,10*Z,0,Math.PI*2),S.fillStyle=R,S.fill(),S.strokeStyle="rgba(255, 255, 255, 0.9)",S.lineWidth=2,S.stroke(),S.beginPath(),S.arc(V,K,6*Z,0,Math.PI*2),S.fillStyle="rgba(255, 255, 255, 0.3)",S.fill(),S.fillStyle="white",S.font=`bold ${8*Z}px system-ui`,S.textAlign="center",S.textBaseline="middle",S.fillText(q,V,K),S.restore()}function ie(S,w,R,q,V,K){S.beginPath(),S.moveTo(w+K,R),S.lineTo(w+q-K,R),S.quadraticCurveTo(w+q,R,w+q,R+K),S.lineTo(w+q,R+V-K),S.quadraticCurveTo(w+q,R+V,w+q-K,R+V),S.lineTo(w+K,R+V),S.quadraticCurveTo(w,R+V,w,R+V-K),S.lineTo(w,R+K),S.quadraticCurveTo(w,R,w+K,R),S.closePath()}function oe(S,w){let R,q,V;switch(w){case"hue":R=n(a),q=T,V=x;break;case"saturation":R=n(s),q=z,V=L;break;case"lightness":R=n(l),q=O,V=$;break;default:return}if(!R)return;const K=R.getBoundingClientRect(),Z=S.clientX-K.left,He=Math.abs(Z-q.x),Ve=Math.abs(Z-V.x);if(He<20)d=!0,c=1,k=w,S.preventDefault();else if(Ve<20)d=!0,c=2,k=w,S.preventDefault();else{const Ya=W(Z,w);te(w,Ya,1)}}function le(S){if(!d||!k||!c)return;let w,R,q;switch(k){case"hue":w=n(a),R=T,q=x;break;case"saturation":w=n(s),R=z,q=L;break;case"lightness":w=n(l),R=O,q=$;break;default:return}if(!w)return;const V=w.getBoundingClientRect(),K=S.clientX-V.left,Z=Math.max(_,Math.min(A-_,K));c===1?(R.targetX=Z,R.x=Z):(q.targetX=Z,q.x=Z);const He=W(Z,k);te(k,He,c)}function se(){d=!1,c=null,k=null}function te(S,w,R){const q=R===1?n(i):n(o);if(!q)return;let V=q.h,K=q.s,Z=q.l;switch(S){case"hue":V=w;break;case"saturation":K=w;break;case"lightness":Z=w;break}R===1?(Yt(V,K,Z),y(i,{h:V,s:K,l:Z})):(jt(V,K,Z),y(o,{h:V,s:K,l:Z}))}function ce(){y(M,!n(M))}function ve(){y(b,!n(b))}function ue(){Yt(210,70,50),jt(200,68,50)}Ct(()=>{if(!(!n(a)||!n(s)||!n(l))&&(y(h,n(a).getContext("2d")),y(f,n(s).getContext("2d")),y(v,n(l).getContext("2d")),!(!n(h)||!n(f)||!n(v))))return ye(a,n(a).width=A),ye(a,n(a).height=C),ye(s,n(s).width=A),ye(s,n(s).height=C),ye(l,n(l).width=A),ye(l,n(l).height=C),N(),m(),document.addEventListener("mousemove",le),document.addEventListener("mouseup",se),P=xe.subscribe(S=>{(S.gradientColor1||S.gradientColor2)&&N()}),()=>{r&&cancelAnimationFrame(r),document.removeEventListener("mousemove",le),document.removeEventListener("mouseup",se),P&&P()}}),ai(()=>{r&&cancelAnimationFrame(r)}),$e(()=>Xt,()=>{y(i,Xt()||{h:210,s:70,l:50})}),$e(()=>Ht,()=>{y(o,Ht()||{h:200,s:68,l:50})}),$e(()=>(n(i),n(o),n(h),n(f),n(v)),()=>{n(i)&&n(o)&&typeof n(i).h=="number"&&typeof n(o).h=="number"&&(N(),n(h)&&n(f)&&n(v)&&F())}),ht(),ze();var fe=Vn(),H=u(fe),_e=u(H),Oe=u(_e);let Ee;var Re=p(Oe,2);let Me;var De=p(Re,2);g(_e),g(H);var Ge=p(H,2),ge=p(u(Ge),2),Le=u(ge);Ze(Le,S=>y(a,S),()=>n(a)),g(ge),g(Ge);var Ce=p(Ge,2),Xe=p(u(Ce),2),G=u(Xe);Ze(G,S=>y(s,S),()=>n(s)),g(Xe),g(Ce);var I=p(Ce,2),U=p(u(I),2),he=u(U);Ze(he,S=>y(l,S),()=>n(l)),g(U),g(I);var Ae=p(I,2),qe=u(Ae),et=u(qe),Dt=p(et,2),Xa=u(Dt);g(Dt),g(qe);var Pt=p(qe,2),Gt=u(Pt),Lt=p(Gt,2),Ha=u(Lt);g(Lt),g(Pt),g(Ae),Je(2),g(fe),pe((S,w,R,q,V,K,Z,He)=>{Ee=be(Oe,1,"control-btn svelte-1bvbq9v",null,Ee,S),Me=be(Re,1,"control-btn svelte-1bvbq9v",null,Me,w),wt(et,`background-color: hsl(${n(i),re(()=>n(i).h)??""}, ${n(i),re(()=>n(i).s)??""}%, ${n(i),re(()=>n(i).l)??""}%)`),ne(Xa,`Gradient 1: ${R??""}Â°, ${q??""}%, ${V??""}%`),wt(Gt,`background-color: hsl(${n(o),re(()=>n(o).h)??""}, ${n(o),re(()=>n(o).s)??""}%, ${n(o),re(()=>n(o).l)??""}%)`),ne(Ha,`Gradient 2: ${K??""}Â°, ${Z??""}%, ${He??""}%`)},[()=>({active:n(M)}),()=>({active:n(b)}),()=>(n(i),re(()=>Math.round(n(i).h))),()=>(n(i),re(()=>Math.round(n(i).s))),()=>(n(i),re(()=>Math.round(n(i).l))),()=>(n(o),re(()=>Math.round(n(o).h))),()=>(n(o),re(()=>Math.round(n(o).s))),()=>(n(o),re(()=>Math.round(n(o).l)))]),D("click",Oe,ce),D("click",Re,ve),D("click",De,ue),D("mousedown",Le,S=>oe(S,"hue")),D("mousedown",G,S=>oe(S,"saturation")),D("mousedown",he,S=>oe(S,"lightness")),Q(e,fe),Fe()}var Un=ee('<div class="timer-settings-panel svelte-1m1yjnh"><h3 class="panel-title svelte-1m1yjnh">Timer Settings</h3> <div class="settings-grid svelte-1m1yjnh"><div class="setting-item svelte-1m1yjnh"><label for="work-duration" class="setting-label svelte-1m1yjnh">Work (min)</label> <input id="work-duration" type="number" min="1" max="120" class="setting-input svelte-1m1yjnh"/></div> <div class="setting-item svelte-1m1yjnh"><label for="short-break-duration" class="setting-label svelte-1m1yjnh">Short Break (min)</label> <input id="short-break-duration" type="number" min="1" max="60" class="setting-input svelte-1m1yjnh"/></div> <div class="setting-item svelte-1m1yjnh"><label for="long-break-duration" class="setting-label svelte-1m1yjnh">Long Break (min)</label> <input id="long-break-duration" type="number" min="1" max="120" class="setting-input svelte-1m1yjnh"/></div> <div class="setting-item svelte-1m1yjnh"><label for="sessions-before-long-break" class="setting-label svelte-1m1yjnh">Sessions Before Long Break</label> <input id="sessions-before-long-break" type="number" min="1" max="10" class="setting-input svelte-1m1yjnh"/></div></div> <div class="toggles-section svelte-1m1yjnh"><div class="toggle-item svelte-1m1yjnh"><label for="auto-cycle" class="toggle-label svelte-1m1yjnh">Auto-cycle sessions</label> <input id="auto-cycle" type="checkbox" class="toggle-input svelte-1m1yjnh"/></div> <div class="toggle-item svelte-1m1yjnh"><label for="floating-enabled" class="toggle-label svelte-1m1yjnh">Enable floating effects</label> <input id="floating-enabled" type="checkbox" class="toggle-input svelte-1m1yjnh"/></div></div> <button type="button" class="reset-button svelte-1m1yjnh">Reset to Defaults</button></div>');function Zn(e,t){Be(t,!1);const[i,o]=pt(),a=()=>Pe(ke,"$timerSettings",i),s=()=>Pe(xe,"$backgroundSettings",i);let l=E(a().workDuration/60),r=E(a().shortBreakDuration/60),h=E(a().longBreakDuration/60),f=E(a().sessionsBeforeLongBreak),v=E(a().autoCycle),b=E(s().isFloatingEnabled);ke.subscribe(m=>{m.workDuration/60!==n(l)&&y(l,m.workDuration/60),m.shortBreakDuration/60!==n(r)&&y(r,m.shortBreakDuration/60),m.longBreakDuration/60!==n(h)&&y(h,m.longBreakDuration/60),m.sessionsBeforeLongBreak!==n(f)&&y(f,m.sessionsBeforeLongBreak),m.autoCycle!==n(v)&&y(v,m.autoCycle)}),xe.subscribe(m=>{m.isFloatingEnabled!==n(b)&&y(b,m.isFloatingEnabled)});function M(){ki(),ke.set({workDuration:1500,shortBreakDuration:300,longBreakDuration:900,sessionsBeforeLongBreak:4,autoCycle:!1})}$e(()=>(n(l),n(r),n(h),n(f),n(v),a(),ke),()=>{const m={workDuration:Math.max(1,n(l))*60,shortBreakDuration:Math.max(1,n(r))*60,longBreakDuration:Math.max(1,n(h))*60,sessionsBeforeLongBreak:Math.max(1,n(f)),autoCycle:n(v)};(a().workDuration!==m.workDuration||a().shortBreakDuration!==m.shortBreakDuration||a().longBreakDuration!==m.longBreakDuration||a().sessionsBeforeLongBreak!==m.sessionsBeforeLongBreak||a().autoCycle!==m.autoCycle)&&ke.set(m)}),$e(()=>(s(),n(b),xe),()=>{s().isFloatingEnabled!==n(b)&&xe.update(m=>({...m,isFloatingEnabled:n(b)}))}),ht(),ze();var d=Un(),c=p(u(d),2),k=u(c),A=p(u(k),2);J(A),g(k);var C=p(k,2),_=p(u(C),2);J(_),g(C);var j=p(C,2),T=p(u(j),2);J(T),g(j);var x=p(j,2),z=p(u(x),2);J(z),g(x),g(c);var L=p(c,2),O=u(L),$=p(u(O),2);J($),g(O);var P=p(O,2),N=p(u(P),2);J(N),g(P),g(L);var W=p(L,2);g(d),de(A,()=>n(l),m=>y(l,m)),de(_,()=>n(r),m=>y(r,m)),de(T,()=>n(h),m=>y(h,m)),de(z,()=>n(f),m=>y(f,m)),We($,()=>n(v),m=>y(v,m)),We(N,()=>n(b),m=>y(b,m)),D("click",W,M),Q(e,d),Fe(),o()}var Jn=ee('<div class="controls-grid svelte-6z4cat"><div class="control-item svelte-6z4cat"><label class="control-label svelte-6z4cat">Size</label> <div class="slider-container svelte-6z4cat"><input type="range" min="20" max="150" class="slider svelte-6z4cat"/> <span class="value-display svelte-6z4cat"> </span></div></div> <div class="control-item svelte-6z4cat"><label class="control-label svelte-6z4cat">Speed</label> <div class="slider-container svelte-6z4cat"><input type="range" min="0.1" max="1.0" step="0.05" class="slider svelte-6z4cat"/> <span class="value-display svelte-6z4cat"> </span></div></div> <div class="control-item svelte-6z4cat"><label class="control-label svelte-6z4cat">Ambient Frequency</label> <div class="slider-container svelte-6z4cat"><input type="range" min="1000" max="10000" step="500" class="slider svelte-6z4cat"/> <span class="value-display svelte-6z4cat"> </span></div></div></div>'),Qn=ee('<div class="controls-grid svelte-6z4cat"><div class="control-item svelte-6z4cat"><label class="control-label svelte-6z4cat">Intensity</label> <div class="slider-container svelte-6z4cat"><input type="range" min="0.1" max="1.0" step="0.05" class="slider svelte-6z4cat"/> <span class="value-display svelte-6z4cat"> </span></div></div> <div class="control-item svelte-6z4cat"><label class="control-label svelte-6z4cat">Speed</label> <div class="slider-container svelte-6z4cat"><input type="range" min="0.5" max="2.0" step="0.1" class="slider svelte-6z4cat"/> <span class="value-display svelte-6z4cat"> </span></div></div> <div class="control-item svelte-6z4cat"><label class="control-label svelte-6z4cat">Count</label> <div class="slider-container svelte-6z4cat"><input type="range" min="1" max="10" class="slider svelte-6z4cat"/> <span class="value-display svelte-6z4cat"> </span></div></div></div>'),eo=ee('<div class="effects-panel svelte-6z4cat"><h3 class="panel-title svelte-6z4cat">Water Effects</h3> <div class="effect-section svelte-6z4cat"><div class="section-header svelte-6z4cat"><h4 class="section-title svelte-6z4cat">Ripples</h4> <label class="toggle-wrapper svelte-6z4cat"><input type="checkbox" class="toggle-input svelte-6z4cat"/> <span class="toggle-label svelte-6z4cat">Enable</span></label></div> <!></div> <div class="effect-section svelte-6z4cat"><div class="section-header svelte-6z4cat"><h4 class="section-title svelte-6z4cat">Wave Shimmer</h4> <label class="toggle-wrapper svelte-6z4cat"><input type="checkbox" class="toggle-input svelte-6z4cat"/> <span class="toggle-label svelte-6z4cat">Enable</span></label></div> <!></div> <button type="button" class="reset-button svelte-6z4cat">Reset to Defaults</button></div>');function to(e,t){Be(t,!1);const i=ba();let o=E(!0),a=E(50),s=E(.35),l=E(3e3),r=E(!0),h=E(.5),f=E(1),v=E(5);function b(){i("update",{ripples:{enabled:n(o),size:n(a),speed:n(s),frequency:n(l)},shimmer:{enabled:n(r),intensity:n(h),speed:n(f),count:n(v)}})}function M(){y(o,!0),y(a,50),y(s,.35),y(l,3e3),y(r,!0),y(h,.5),y(f,1),y(v,5),b()}ze();var d=eo(),c=p(u(d),2),k=u(c),A=p(u(k),2),C=u(A);J(C),Je(2),g(A),g(k);var _=p(k,2);{var j=N=>{var W=Jn(),m=u(W),F=p(u(m),2),B=u(F);J(B);var X=p(B,2),ae=u(X,!0);g(X),g(F),g(m);var Y=p(m,2),ie=p(u(Y),2),oe=u(ie);J(oe);var le=p(oe,2),se=u(le,!0);g(le),g(ie),g(Y);var te=p(Y,2),ce=p(u(te),2),ve=u(ce);J(ve);var ue=p(ve,2),fe=u(ue);g(ue),g(ce),g(te),g(W),pe((H,_e)=>{ne(ae,n(a)),ne(se,H),ne(fe,`${_e??""}s`)},[()=>n(s).toFixed(2),()=>(n(l)/1e3).toFixed(1)]),de(B,()=>n(a),H=>y(a,H)),D("input",B,b),de(oe,()=>n(s),H=>y(s,H)),D("input",oe,b),de(ve,()=>n(l),H=>y(l,H)),D("input",ve,b),Q(N,W)};we(_,N=>{n(o)&&N(j)})}g(c);var T=p(c,2),x=u(T),z=p(u(x),2),L=u(z);J(L),Je(2),g(z),g(x);var O=p(x,2);{var $=N=>{var W=Qn(),m=u(W),F=p(u(m),2),B=u(F);J(B);var X=p(B,2),ae=u(X);g(X),g(F),g(m);var Y=p(m,2),ie=p(u(Y),2),oe=u(ie);J(oe);var le=p(oe,2),se=u(le);g(le),g(ie),g(Y);var te=p(Y,2),ce=p(u(te),2),ve=u(ce);J(ve);var ue=p(ve,2),fe=u(ue,!0);g(ue),g(ce),g(te),g(W),pe((H,_e)=>{ne(ae,`${H??""}%`),ne(se,`${_e??""}x`),ne(fe,n(v))},[()=>Math.round(n(h)*100),()=>n(f).toFixed(1)]),de(B,()=>n(h),H=>y(h,H)),D("input",B,b),de(oe,()=>n(f),H=>y(f,H)),D("input",oe,b),de(ve,()=>n(v),H=>y(v,H)),D("input",ve,b),Q(N,W)};we(O,N=>{n(r)&&N($)})}g(T);var P=p(T,2);g(d),We(C,()=>n(o),N=>y(o,N)),D("change",C,b),We(L,()=>n(r),N=>y(r,N)),D("change",L,b),D("click",P,M),Q(e,d),Fe()}var ao=ee('<div class="controls-grid svelte-av21hg"><div class="control-item svelte-av21hg"><label for="grain-density" class="control-label svelte-av21hg">Density</label> <div class="slider-container svelte-av21hg"><input id="grain-density" type="range" min="100" max="1200" step="50" class="slider svelte-av21hg"/> <span class="value-display svelte-av21hg"> </span></div></div> <div class="control-item svelte-av21hg"><label for="grain-speed" class="control-label svelte-av21hg">Speed</label> <div class="slider-container svelte-av21hg"><input id="grain-speed" type="range" min="0.05" max="0.25" step="0.01" class="slider svelte-av21hg"/> <span class="value-display svelte-av21hg"> </span></div></div> <div class="control-item svelte-av21hg"><label for="grain-size" class="control-label svelte-av21hg">Size</label> <div class="slider-container svelte-av21hg"><input id="grain-size" type="range" min="0.5" max="1.25" step="0.05" class="slider svelte-av21hg"/> <span class="value-display svelte-av21hg"> </span></div></div> <div class="control-item svelte-av21hg"><label for="grain-opacity" class="control-label svelte-av21hg">Opacity</label> <div class="slider-container svelte-av21hg"><input id="grain-opacity" type="range" min="0.1" max="0.8" step="0.05" class="slider svelte-av21hg"/> <span class="value-display svelte-av21hg"> </span></div></div></div>'),io=ee('<div class="controls-grid svelte-av21hg"><div class="control-item svelte-av21hg"><label for="foam-frequency" class="control-label svelte-av21hg">Frequency</label> <div class="slider-container svelte-av21hg"><input id="foam-frequency" type="range" min="0.005" max="0.05" step="0.005" class="slider svelte-av21hg"/> <span class="value-display svelte-av21hg"> </span></div></div> <div class="control-item svelte-av21hg"><label for="foam-lifetime" class="control-label svelte-av21hg">Lifetime</label> <div class="slider-container svelte-av21hg"><input id="foam-lifetime" type="range" min="60" max="200" step="10" class="slider svelte-av21hg"/> <span class="value-display svelte-av21hg"> </span></div></div> <div class="control-item svelte-av21hg"><label for="foam-complexity" class="control-label svelte-av21hg">Complexity</label> <div class="slider-container svelte-av21hg"><input id="foam-complexity" type="range" min="25" max="100" step="5" class="slider svelte-av21hg"/> <span class="value-display svelte-av21hg"> </span></div></div> <div class="control-item svelte-av21hg"><label for="foam-branchiness" class="control-label svelte-av21hg">Branchiness</label> <div class="slider-container svelte-av21hg"><input id="foam-branchiness" type="range" min="0" max="0.5" step="0.05" class="slider svelte-av21hg"/> <span class="value-display svelte-av21hg"> </span></div></div> <div class="control-item svelte-av21hg"><label for="foam-opacity" class="control-label svelte-av21hg">Opacity</label> <div class="slider-container svelte-av21hg"><input id="foam-opacity" type="range" min="0.3" max="1.0" step="0.05" class="slider svelte-av21hg"/> <span class="value-display svelte-av21hg"> </span></div></div></div>'),no=ee('<div class="effects-panel svelte-av21hg"><h3 class="panel-title svelte-av21hg">Particle Effects</h3> <div class="effect-section svelte-av21hg"><div class="section-header svelte-av21hg"><h4 class="section-title svelte-av21hg">Water Grains</h4> <label class="toggle-wrapper svelte-av21hg"><input type="checkbox" class="toggle-input svelte-av21hg"/> <span class="toggle-label svelte-av21hg">Enable</span></label></div> <!></div> <div class="effect-section svelte-av21hg"><div class="section-header svelte-av21hg"><h4 class="section-title svelte-av21hg">Foam Streaks</h4> <label class="toggle-wrapper svelte-av21hg"><input type="checkbox" class="toggle-input svelte-av21hg"/> <span class="toggle-label svelte-av21hg">Enable</span></label></div> <!></div> <button type="button" class="reset-button svelte-av21hg">Reset to Defaults</button></div>');function oo(e,t){Be(t,!1);const i=ba();let o=E(!0),a=E(600),s=E(.15),l=E(.875),r=E(.4),h=E(!0),f=E(.02),v=E(120),b=E(50),M=E(.25),d=E(.7);function c(){i("update",{waterGrains:{enabled:n(o),density:n(a),speed:n(s),size:n(l),opacity:n(r)},foam:{enabled:n(h),frequency:n(f),lifetime:n(v),complexity:n(b),branchiness:n(M),opacity:n(d)}})}function k(){y(o,!0),y(a,600),y(s,.15),y(l,.875),y(r,.4),y(h,!0),y(f,.02),y(v,120),y(b,50),y(M,.25),y(d,.7),c()}ze();var A=no(),C=p(u(A),2),_=u(C),j=p(u(_),2),T=u(j);J(T),Je(2),g(j),g(_);var x=p(_,2);{var z=F=>{var B=ao(),X=u(B),ae=p(u(X),2),Y=u(ae);J(Y);var ie=p(Y,2),oe=u(ie,!0);g(ie),g(ae),g(X);var le=p(X,2),se=p(u(le),2),te=u(se);J(te);var ce=p(te,2),ve=u(ce,!0);g(ce),g(se),g(le);var ue=p(le,2),fe=p(u(ue),2),H=u(fe);J(H);var _e=p(H,2),Oe=u(_e,!0);g(_e),g(fe),g(ue);var Ee=p(ue,2),Re=p(u(Ee),2),Me=u(Re);J(Me);var De=p(Me,2),Ge=u(De);g(De),g(Re),g(Ee),g(B),pe((ge,Le,Ce)=>{ne(oe,n(a)),ne(ve,ge),ne(Oe,Le),ne(Ge,`${Ce??""}%`)},[()=>n(s).toFixed(2),()=>n(l).toFixed(2),()=>Math.round(n(r)*100)]),de(Y,()=>n(a),ge=>y(a,ge)),D("input",Y,c),de(te,()=>n(s),ge=>y(s,ge)),D("input",te,c),de(H,()=>n(l),ge=>y(l,ge)),D("input",H,c),de(Me,()=>n(r),ge=>y(r,ge)),D("input",Me,c),Q(F,B)};we(x,F=>{n(o)&&F(z)})}g(C);var L=p(C,2),O=u(L),$=p(u(O),2),P=u($);J(P),Je(2),g($),g(O);var N=p(O,2);{var W=F=>{var B=io(),X=u(B),ae=p(u(X),2),Y=u(ae);J(Y);var ie=p(Y,2),oe=u(ie);g(ie),g(ae),g(X);var le=p(X,2),se=p(u(le),2),te=u(se);J(te);var ce=p(te,2),ve=u(ce);g(ce),g(se),g(le);var ue=p(le,2),fe=p(u(ue),2),H=u(fe);J(H);var _e=p(H,2),Oe=u(_e,!0);g(_e),g(fe),g(ue);var Ee=p(ue,2),Re=p(u(Ee),2),Me=u(Re);J(Me);var De=p(Me,2),Ge=u(De);g(De),g(Re),g(Ee);var ge=p(Ee,2),Le=p(u(ge),2),Ce=u(Le);J(Ce);var Xe=p(Ce,2),G=u(Xe);g(Xe),g(Le),g(ge),g(B),pe((I,U,he,Ae)=>{ne(oe,`${I??""}%`),ne(ve,`${U??""}s`),ne(Oe,n(b)),ne(Ge,`${he??""}%`),ne(G,`${Ae??""}%`)},[()=>(n(f)*100).toFixed(1),()=>(n(v)/60).toFixed(1),()=>Math.round(n(M)*100),()=>Math.round(n(d)*100)]),de(Y,()=>n(f),I=>y(f,I)),D("input",Y,c),de(te,()=>n(v),I=>y(v,I)),D("input",te,c),de(H,()=>n(b),I=>y(b,I)),D("input",H,c),de(Me,()=>n(M),I=>y(M,I)),D("input",Me,c),de(Ce,()=>n(d),I=>y(d,I)),D("input",Ce,c),Q(F,B)};we(N,F=>{n(h)&&F(W)})}g(L);var m=p(L,2);g(A),We(T,()=>n(o),F=>y(o,F)),D("change",T,c),We(P,()=>n(h),F=>y(h,F)),D("change",P,c),D("click",m,k),Q(e,A),Fe()}var so=ee("<div><!></div>"),ro=ee("<div><!></div>"),lo=ee("<div><!></div>"),co=ee('<div><div class="placeholder-panel svelte-g0rkpj"><h3 class="svelte-g0rkpj">Light Effects</h3> <p class="svelte-g0rkpj">Coming soon...</p></div></div>'),vo=ee("<div><!></div>"),uo=ee('<div><div class="placeholder-panel svelte-g0rkpj"><h3 class="svelte-g0rkpj">Master Settings</h3> <p class="svelte-g0rkpj">Coming soon...</p></div></div>'),go=ee('<div role="toolbar" aria-label="Background Effects Dock"><div class="dock-container svelte-g0rkpj"><div title="Professional HSL Color Picker"><div class="dock-icon svelte-g0rkpj">ð¨</div></div> <div title="Water Effects"><div class="dock-icon svelte-g0rkpj">ð</div></div> <div title="Light Effects"><div class="dock-icon svelte-g0rkpj">â¨</div></div> <div title="Particle Effects"><div class="dock-icon svelte-g0rkpj">ð«</div></div> <div title="Timer Settings"><div class="dock-icon svelte-g0rkpj">â±ï¸</div></div> <div title="Master Settings"><div class="dock-icon svelte-g0rkpj">âï¸</div></div></div> <!> <!> <!> <!> <!> <!></div>');function ho(e,t){Be(t,!1);let i=E(),o=E(!1),a,s=0,l=0,r=E(!1),h=E(!1),f=E(!1),v=E(!1),b=E(!1),M=E(!1);const d=100,c=3e3;Ct(()=>{const G=U=>{s=U.clientY,k()},I=()=>{l=window.innerHeight};return window.addEventListener("mousemove",G),window.addEventListener("resize",I),I(),()=>{window.removeEventListener("mousemove",G),window.removeEventListener("resize",I),a&&clearTimeout(a)}});function k(){const I=l-s<=d;I&&!n(o)?A():!I&&n(o)&&_()}function A(){y(o,!0),a&&(clearTimeout(a),a=0)}function C(){y(o,!1)}function _(){a&&clearTimeout(a),a=setTimeout(C,c)}function j(){A()}function T(){_()}function x(){y(r,!1),y(h,!1),y(f,!1),y(v,!1),y(b,!1),y(M,!1)}function z(){x(),y(r,!0),A()}function L(){x(),y(h,!0),A()}function O(){x(),y(f,!0),A()}function $(){x(),y(v,!0),A()}function P(){x(),y(b,!0),A()}function N(){x(),y(M,!0),A()}function W(G){switch(G){case"colors":z();break;case"timer":L();break;case"water":O();break;case"light":$();break;case"particles":P();break;case"settings":N();break}}ze();var m=go();let F;var B=u(m),X=u(B);let ae;var Y=p(X,2);let ie;var oe=p(Y,2);let le;var se=p(oe,2);let te;var ce=p(se,2);let ve;var ue=p(ce,2);let fe;g(B);var H=p(B,2);{var _e=G=>{var I=so();let U;var he=u(I);Kn(he,{}),g(I),pe(Ae=>U=be(I,1,"panel-container color-grid-panel svelte-g0rkpj",null,U,Ae),[()=>({visible:n(r)})]),Q(G,I)};we(H,G=>{n(r)&&G(_e)})}var Oe=p(H,2);{var Ee=G=>{var I=ro();let U;var he=u(I);Zn(he,{}),g(I),pe(Ae=>U=be(I,1,"panel-container timer-settings-panel svelte-g0rkpj",null,U,Ae),[()=>({visible:n(h)})]),Q(G,I)};we(Oe,G=>{n(h)&&G(Ee)})}var Re=p(Oe,2);{var Me=G=>{var I=lo();let U;var he=u(I);to(he,{}),g(I),pe(Ae=>U=be(I,1,"panel-container water-effects-panel svelte-g0rkpj",null,U,Ae),[()=>({visible:n(f)})]),Q(G,I)};we(Re,G=>{n(f)&&G(Me)})}var De=p(Re,2);{var Ge=G=>{var I=co();let U;pe(he=>U=be(I,1,"panel-container light-effects-panel svelte-g0rkpj",null,U,he),[()=>({visible:n(v)})]),Q(G,I)};we(De,G=>{n(v)&&G(Ge)})}var ge=p(De,2);{var Le=G=>{var I=vo();let U;var he=u(I);oo(he,{}),g(I),pe(Ae=>U=be(I,1,"panel-container particle-effects-panel svelte-g0rkpj",null,U,Ae),[()=>({visible:n(b)})]),Q(G,I)};we(ge,G=>{n(b)&&G(Le)})}var Ce=p(ge,2);{var Xe=G=>{var I=uo();let U;pe(he=>U=be(I,1,"panel-container master-settings-panel svelte-g0rkpj",null,U,he),[()=>({visible:n(M)})]),Q(G,I)};we(Ce,G=>{n(M)&&G(Xe)})}g(m),Ze(m,G=>y(i,G),()=>n(i)),pe((G,I,U,he,Ae,qe,et)=>{F=be(m,1,"floating-dock svelte-g0rkpj",null,F,G),ae=be(X,1,"dock-item svelte-g0rkpj",null,ae,I),ie=be(Y,1,"dock-item svelte-g0rkpj",null,ie,U),le=be(oe,1,"dock-item svelte-g0rkpj",null,le,he),te=be(se,1,"dock-item svelte-g0rkpj",null,te,Ae),ve=be(ce,1,"dock-item svelte-g0rkpj",null,ve,qe),fe=be(ue,1,"dock-item svelte-g0rkpj",null,fe,et)},[()=>({visible:n(o)}),()=>({active:n(r)}),()=>({active:n(f)}),()=>({active:n(v)}),()=>({active:n(b)}),()=>({active:n(h)}),()=>({active:n(M)})]),D("click",X,()=>W("colors")),D("click",Y,()=>W("water")),D("click",oe,()=>W("light")),D("click",se,()=>W("particles")),D("click",ce,()=>W("timer")),D("click",ue,()=>W("settings")),D("mouseenter",m,j),D("mouseleave",m,T),Q(e,m),Fe()}var po=ee('<meta name="description" content="A beautiful Pomodoro timer with interactive background effects"/>'),fo=ee('<span class="text-sm text-white/60 block mt-1"> </span>'),mo=ee('<div class="text-lg font-medium text-white/80"> <!></div>'),yo=ee('<!> <!> <main class="relative z-10 flex min-h-screen flex-col items-center justify-center px-4 py-8 transition-all duration-1000 ease-in-out"><div class="w-full max-w-md space-y-8 text-center"><!> <!> <!></div></main>',1);function wo(e,t){Be(t,!1);const[i,o]=pt(),a=()=>Pe(xe,"$backgroundSettings",i),s=()=>Pe(me,"$timerState",i),l=()=>Pe(ke,"$timerSettings",i);function r(C){switch(C){case"work":return"Focus Session";case"shortBreak":return"Short Break";case"longBreak":return"Long Break";default:return"Session"}}ze();var h=yo();ii(C=>{var _=po();Qa.title="Locked-In Pomodoro Timer",Q(C,_)});var f=Ja(h);qn(f,{get gradientColor1(){return a().gradientColor1},get gradientColor2(){return a().gradientColor2}});var v=p(f,2);ho(v,{});var b=p(v,2),M=u(b),d=u(M);yi(d,{});var c=p(d,2);{var k=C=>{var _=mo(),j=u(_),T=p(j);{var x=z=>{var L=fo(),O=u(L);g(L),pe(()=>ne(O,`Session ${s().completedSessions+1} of ${l().sessionsBeforeLongBreak??""}`)),Q(z,L)};we(T,z=>{s().currentSession.type==="work"&&z(x)})}g(_),pe(z=>ne(j,`${z??""} `),[()=>r(s().currentSession.type)]),Q(C,_)};we(c,C=>{s().currentSession&&C(k)})}var A=p(c,2);Mi(A,{}),g(M),g(b),Q(e,h),Fe(),o()}export{wo as component};
