import"../chunks/DsnmJJEf.js";import{i as we}from"../chunks/CDUjkjLN.js";import{b as Ya,l as ma,w as mt,d as Wa,g as ie,s as ue,e as V,o as je,c as qa,f as Va}from"../chunks/B2iRUoxs.js";import{w as ge,aE as Ka,aF as Ua,aG as Za,aH as ja,aI as Ja,aJ as Qa,e as L,M as va,F as Ce,aK as en,p as Ae,aL as le,aM as Je,l as te,t as ce,a as Q,m as _e,T as E,P as $,n as I,o as C,q as R,h as s,aN as U,aO as pa,f as tn,aP as an}from"../chunks/BFB6pIza.js";import{i as De,s as vt,a as he,p as Pt,b as Te}from"../chunks/BjJBHLk7.js";const Gt=[...` 	
\r\fÂ \v\uFEFF`];function nn(e,t,n){var i=e==null?"":""+e;if(n){for(var a in n)if(n[a])i=i?i+" "+a:a;else if(i.length)for(var o=a.length,l=0;(l=i.indexOf(a,l))>=0;){var r=l+o;(l===0||Gt.includes(i[l-1]))&&(r===i.length||Gt.includes(i[r]))?i=(l===0?"":i.substring(0,l))+i.substring(r+1):l=r}}return i===""?null:i}function on(e,t){return e==null?null:String(e)}function Oe(e,t,n,i,a,o){var l=e.__className;if(ge||l!==n||l===void 0){var r=nn(n,i,o);(!ge||r!==e.getAttribute("class"))&&(r==null?e.removeAttribute("class"):e.className=r),e.__className=n}else if(o&&a!==o)for(var h in o){var g=!!o[h];(a==null||g!==!!a[h])&&e.classList.toggle(h,g)}return o}function ht(e,t,n,i){var a=e.__style;if(ge||a!==t){var o=on(t);(!ge||o!==e.getAttribute("style"))&&(o==null?e.removeAttribute("style"):e.style.cssText=o),e.__style=t}return i}const rn=Symbol("is custom element"),sn=Symbol("is html");function Se(e){if(ge){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var i=e.value;Fe(e,"value",null),e.value=i}if(e.hasAttribute("checked")){var a=e.checked;Fe(e,"checked",null),e.checked=a}}};e.__on_r=n,Za(n),Ya()}}function Fe(e,t,n,i){var a=ln(e);ge&&(a[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||a[t]!==(a[t]=n)&&(t==="loading"&&(e[ja]=n),n==null?e.removeAttribute(t):typeof n!="string"&&cn(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function ln(e){return e.__attributes??={[rn]:e.nodeName.includes("-"),[sn]:e.namespaceURI===Ka}}var Lt=new Map;function cn(e){var t=Lt.get(e.nodeName);if(t)return t;Lt.set(e.nodeName,t=[]);for(var n,i=e,a=Element.prototype;a!==i;){n=Ja(i);for(var o in n)n[o].set&&t.push(o);i=Ua(i)}return t}function Be(e,t,n=t){var i=Qa(),a=new WeakSet;ma(e,"input",o=>{var l=o?e.defaultValue:e.value;if(l=ot(e)?rt(l):l,n(l),Ce!==null&&a.add(Ce),i&&l!==(l=t())){var r=e.selectionStart,h=e.selectionEnd;e.value=l??"",h!==null&&(e.selectionStart=r,e.selectionEnd=Math.min(h,e.value.length))}}),(ge&&e.defaultValue!==e.value||L(t)==null&&e.value)&&(n(ot(e)?rt(e.value):e.value),Ce!==null&&a.add(Ce)),va(()=>{var o=t();if(e===document.activeElement){var l=en??Ce;if(a.has(l))return}ot(e)&&o===rt(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function Bt(e,t,n=t){ma(e,"change",i=>{var a=i?e.defaultChecked:e.checked;n(a)}),(ge&&e.defaultChecked!==e.checked||L(t)==null)&&n(e.checked),va(()=>{var i=t();e.checked=!!i})}function ot(e){var t=e.type;return t==="number"||t==="range"}function rt(e){return e===""?null:+e}const ba="zenZoneTimerSettings",pt={workDuration:Math.max(1,25)*60,shortBreakDuration:Math.max(1,5)*60,longBreakDuration:Math.max(1,15)*60,sessionsBeforeLongBreak:Math.max(1,4),autoCycle:!1};function st(e){const t={...pt,...e};return t.workDuration=Math.max(1,Math.floor(t.workDuration/60))*60,t.shortBreakDuration=Math.max(1,Math.floor(t.shortBreakDuration/60))*60,t.longBreakDuration=Math.max(1,Math.floor(t.longBreakDuration/60))*60,t.sessionsBeforeLongBreak=Math.max(1,Math.floor(t.sessionsBeforeLongBreak)),t}function ya(){if(typeof window<"u"&&window.localStorage){const e=localStorage.getItem(ba);if(e)try{const t=JSON.parse(e);if(t&&typeof t.workDuration=="number"&&typeof t.shortBreakDuration=="number"&&typeof t.longBreakDuration=="number"&&typeof t.sessionsBeforeLongBreak=="number"&&typeof t.autoCycle=="boolean")return st(t);if(t)return console.warn("Partially invalid settings found in localStorage, attempting to sanitize."),st(t)}catch(t){console.error("Error parsing timer settings from localStorage:",t)}}return st(pt)}const dn=ya(),un={currentSession:"Work",timeRemaining:dn.workDuration,isRunning:!1,currentCycleCount:0},ne=mt(ya()),K=mt(un);typeof window<"u"&&window.localStorage&&ne.subscribe(e=>{try{localStorage.setItem(ba,JSON.stringify(e))}catch(t){console.error("Error saving timer settings to localStorage:",t)}});const hn=Wa(K,e=>{const t=Math.floor(e.timeRemaining/60),n=e.timeRemaining%60;return`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}`});let Z;function Sa(){const e=ie(K);if(e.isRunning&&e.timeRemaining>0)return;let t=e.timeRemaining;if(t<=0){const n=ie(ne);switch(e.currentSession){case"Work":t=n.workDuration;break;case"Short Break":t=n.shortBreakDuration;break;case"Long Break":t=n.longBreakDuration;break}}K.update(n=>({...n,isRunning:!0,timeRemaining:t})),Z&&clearInterval(Z),Z=setInterval(()=>{const n=ie(K);n.isRunning&&n.timeRemaining>0?K.update(i=>({...i,timeRemaining:i.timeRemaining-1})):n.isRunning&&n.timeRemaining<=0&&(Z&&clearInterval(Z),Z=void 0,mn())},1e3)}function gn(){Z&&(clearInterval(Z),Z=void 0),K.update(e=>({...e,isRunning:!1}))}function fn(){Z&&(clearInterval(Z),Z=void 0),K.update(e=>{let t,n,i=e.currentCycleCount,a=pt;return ne.subscribe(l=>{a=l})(),e.currentSession==="Work"?(i++,i>=a.sessionsBeforeLongBreak?(t="Long Break",n=a.longBreakDuration,i=0):(t="Short Break",n=a.shortBreakDuration)):(t="Work",n=a.workDuration),{...e,currentSession:t,timeRemaining:n,isRunning:!1,currentCycleCount:i}})}function Ma(e){Z&&(clearInterval(Z),Z=void 0);const t=ie(ne),n=e||ie(K).currentSession;let i=t.workDuration,a=ie(K).currentCycleCount;switch(n){case"Work":i=t.workDuration,e==="Work"&&(a=0);break;case"Short Break":i=t.shortBreakDuration;break;case"Long Break":i=t.longBreakDuration;break}K.update(o=>({...o,currentSession:n,timeRemaining:i,isRunning:!1,currentCycleCount:a}))}function Nt(e){K.update(t=>{if(t.isRunning)return t;const n=Math.max(60,e);return ne.update(i=>{const a={...i};switch(t.currentSession){case"Work":a.workDuration=n;break;case"Short Break":a.shortBreakDuration=n;break;case"Long Break":a.longBreakDuration=n;break}return a}),{...t,timeRemaining:n}})}function mn(){const e=ie(K),t=ie(ne);let n,i=e.currentCycleCount;e.currentSession==="Work"?(i++,i>=t.sessionsBeforeLongBreak?(n="Long Break",i=0):n="Short Break"):n="Work",K.update(a=>({...a,currentSession:n,isRunning:!1,currentCycleCount:i})),Ma(n),t.autoCycle&&Sa()}var vn=te('<div class="mx-2 flex scale-75 flex-col items-center justify-center opacity-60 transition-opacity hover:opacity-100"><button title="Increase minutes" aria-label="Increase minutes" class="p-1 text-gray-300 hover:text-teal-300 disabled:opacity-30"><svg class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg></button> <button title="Decrease minutes" aria-label="Decrease minutes" class="p-1 text-gray-300 hover:text-teal-300 disabled:opacity-30"><svg class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div>'),pn=te('<div class="mt-2 mb-8 text-center"><p class="mb-2 text-xl font-semibold text-teal-400" id="current-session-label"> </p> <div class="relative flex items-center justify-center font-mono text-8xl tracking-tighter text-gray-100 tabular-nums select-none svelte-1sjqirj" aria-live="polite" aria-atomic="true"><!> <span class="w-32 text-center"> </span> <span class="w-8 text-center">:</span> <span class="w-32 text-center"> </span></div> <div class="mt-6 h-2.5 w-full overflow-hidden rounded-full bg-slate-700 shadow-inner"><div class="h-2.5 rounded-full bg-teal-500 transition-all duration-1000 ease-linear" aria-valuemin="0" aria-valuemax="100" aria-labelledby="current-session-label" role="progressbar"></div></div></div>');function bn(e,t){Ae(t,!1);const[n,i]=vt(),a=()=>he(K,"$timerState",n),o=()=>he(ne,"$timerSettings",n),l=()=>he(hn,"$formattedTime",n),r=$(),h=$();let g=$(0);function u(){if(a().isRunning)return;const D=Math.floor(a().timeRemaining/60),x=a().timeRemaining%60,A=(D+1)*60+x;Nt(A)}function v(){if(a().isRunning)return;const D=Math.floor(a().timeRemaining/60),x=a().timeRemaining%60,A=Math.max(0,D-1)*60+x;Nt(A)}le(()=>(a(),o()),()=>{const D=a(),x=o();let A=x.workDuration;D.currentSession==="Short Break"?A=x.shortBreakDuration:D.currentSession==="Long Break"&&(A=x.longBreakDuration),A=Math.max(1,A),A>0?E(g,Math.max(0,100-D.timeRemaining/A*100)):E(g,D.timeRemaining>0?0:100)}),le(()=>l(),()=>{E(r,l().substring(0,2))}),le(()=>l(),()=>{E(h,l().substring(3,5))}),Je(),we();var p=pn(),c=I(p),d=I(c,!0);C(c);var S=R(c,2),w=I(S);{var T=D=>{var x=vn(),A=I(x),F=R(A,2);C(x),ce(()=>{A.disabled=(a(),L(()=>a().isRunning)),F.disabled=(a(),L(()=>a().isRunning||a().timeRemaining<120&&a().timeRemaining%60===0&&a().timeRemaining/60<=1||a().timeRemaining<60))}),V("click",A,u),V("click",F,v),Q(D,x)};De(w,D=>{a(),L(()=>!a().isRunning)&&D(T)})}var m=R(w,2),H=I(m,!0);C(m);var O=R(m,4),_=I(O,!0);C(O),C(S);var N=R(S,2),X=I(N);C(N),C(p),ce(()=>{ue(d,(a(),L(()=>a().currentSession))),ue(H,s(r)),ue(_,s(h)),ht(X,`width: ${s(g)??""}%;`),Fe(X,"aria-valuenow",s(g))}),Q(e,p),_e(),i()}var yn=te(`<button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
             text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-teal-300
             focus:ring-2 focus:ring-teal-400
             focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50"> </button>`),Sn=te(`<button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
             text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-amber-300
             focus:ring-2 focus:ring-amber-300
             focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50" aria-label="Pause timer">Pause</button>`),Mn=te(`<div class="mt-6 flex justify-center space-x-2"><!> <button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
           text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-sky-300
           focus:ring-2 focus:ring-sky-400
           focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50" aria-label="Skip to next session" title="Skip to next session">Skip <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="ml-1 inline h-5 w-5 align-text-bottom"><path fill-rule="evenodd" d="M2 10a.75.75 0 0 1 .75-.75h12.59l-2.1-1.95a.75.75 0 1 1 1.02-1.1l3.5 3.25a.75.75 0 0 1 0 1.1l-3.5 3.25a.75.75 0 1 1-1.02-1.1l2.1-1.95H2.75A.75.75 0 0 1 2 10Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M18 10a.75.75 0 0 1-.75.75h-.008a.75.75 0 0 1 0-1.5h.008A.75.75 0 0 1 18 10Z" clip-rule="evenodd"></path></svg></button> <button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
           text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-rose-300
           focus:ring-2 focus:ring-rose-400
           focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50" aria-label="Reset current session timer" title="Reset current session">Reset <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="ml-1 inline h-5 w-5 align-text-bottom"><path fill-rule="evenodd" d="M15.323 3.407a.75.75 0 0 1 0 1.06l-2.096 2.096A6.5 6.5 0 0 1 10 16.5a6.501 6.501 0 0 1-6.414-5.523.75.75 0 0 1 1.482-.236A5.001 5.001 0 0 0 10 15a5 5 0 0 0 4.19-2.402l-1.618 1.617a.75.75 0 1 1-1.06 1.061l3.25-3.25a.75.75 0 0 1 0-1.06l-3.25-3.25a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M4.677 12.593a.75.75 0 0 1 0-1.06l2.096-2.096A6.5 6.5 0 0 1 10 3.5a6.501 6.501 0 0 1 6.414 5.523.75.75 0 0 1-1.482.236A5.001 5.001 0 0 0 10 5a5 5 0 0 0-4.19 2.402l1.618-1.617a.75.75 0 1 1 1.06-1.061L5.238 8.075a.75.75 0 0 1 0 1.06l3.25 3.25a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd"></path></svg></button></div>`);function wn(e,t){Ae(t,!1);const[n,i]=vt(),a=()=>he(K,"$timerState",n),o=()=>he(ne,"$timerSettings",n);let l=$();le(()=>(a(),o()),()=>{const c=a(),d=o();E(l,!c.timeRemaining||c.currentSession==="Work"&&c.timeRemaining===d.workDuration||c.currentSession==="Short Break"&&c.timeRemaining===d.shortBreakDuration||c.currentSession==="Long Break"&&c.timeRemaining===d.longBreakDuration)}),Je(),we();var r=Mn(),h=I(r);{var g=c=>{var d=yn(),S=I(d,!0);C(d),ce(()=>{Fe(d,"aria-label",s(l)?"Start timer":"Resume timer"),ue(S,s(l)?"Start":"Resume")}),V("click",d,function(...w){Sa?.apply(this,w)}),Q(c,d)},u=c=>{var d=Sn();V("click",d,function(...S){gn?.apply(this,S)}),Q(c,d)};De(h,c=>{a(),L(()=>!a().isRunning)?c(g):c(u,!1)})}var v=R(h,2),p=R(v,2);C(r),ce(()=>{v.disabled=(a(),L(()=>a().isRunning)),p.disabled=(a(),s(l),L(()=>a().isRunning&&s(l)))}),V("click",v,function(...c){fn?.apply(this,c)}),V("click",p,function(...c){Ma?.apply(this,c)}),Q(e,r),_e(),i()}const $t=20,re={gradientColor1:"hsl(210, 70%, 50%)",gradientColor2:"hsl(200, 68%, 50%)",isFloatingEnabled:!0,gradientColor1History:["hsl(210, 70%, 50%)"],gradientColor1HistoryIndex:0,gradientColor2History:["hsl(200, 68%, 50%)"],gradientColor2HistoryIndex:0,isAutoCyclingColor1:!1,isAutoCyclingColor2:!1};function wa(e){if(!e)return null;const t=e.match(/hsl\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)/);return t?{h:parseInt(t[1]),s:parseInt(t[2]),l:parseInt(t[3])}:null}function Xt(){const e=ie(ee);return wa(e.gradientColor1)||{h:210,s:70,l:50}}function Ft(){const e=ie(ee);return wa(e.gradientColor2)||{h:200,s:68,l:50}}function An(){let e={...re,gradientColor1History:[...re.gradientColor1History],gradientColor2History:[...re.gradientColor2History]};if(typeof localStorage<"u"){const t=localStorage.getItem("backgroundSettings");if(t)try{const n=JSON.parse(t);e={...e,...n,isAutoCyclingColor1:n.isAutoCyclingColor1??re.isAutoCyclingColor1,isAutoCyclingColor2:n.isAutoCyclingColor2??re.isAutoCyclingColor2},!n.gradientColor1History||n.gradientColor1History.length===0?(e.gradientColor1History=[e.gradientColor1],e.gradientColor1HistoryIndex=0):(e.gradientColor1HistoryIndex=Math.max(0,Math.min(n.gradientColor1HistoryIndex??0,n.gradientColor1History.length-1)),e.gradientColor1=n.gradientColor1History[e.gradientColor1HistoryIndex]),!n.gradientColor2History||n.gradientColor2History.length===0?(e.gradientColor2History=[e.gradientColor2],e.gradientColor2HistoryIndex=0):(e.gradientColor2HistoryIndex=Math.max(0,Math.min(n.gradientColor2HistoryIndex??0,n.gradientColor2History.length-1)),e.gradientColor2=n.gradientColor2History[e.gradientColor2HistoryIndex])}catch(n){return console.error("Failed to parse background settings from localStorage",n),{...re,gradientColor1History:[...re.gradientColor1History],gradientColor2History:[...re.gradientColor2History]}}}return e}const _n=An(),ee=mt(_n);typeof localStorage<"u"&&ee.subscribe(e=>{localStorage.setItem("backgroundSettings",JSON.stringify(e))});function Aa(e,t,n){let i=[...t];n<i.length-1&&(i=i.slice(0,n+1)),i.push(e),i.length>$t&&(i=i.slice(i.length-$t));const a=i.length-1;return{history:i,index:a}}function Ht(e,t,n){let i;typeof e=="string"?i=e:i=`hsl(${Math.round(e)}, ${Math.round(t)}%, ${Math.round(n)}%)`;const a=ie(ee);if(a.gradientColor1===i)return;const{history:o,index:l}=Aa(i,a.gradientColor1History,a.gradientColor1HistoryIndex);ee.update(r=>({...r,gradientColor1:i,gradientColor1History:o,gradientColor1HistoryIndex:l}))}function zt(e,t,n){let i;typeof e=="string"?i=e:i=`hsl(${Math.round(e)}, ${Math.round(t)}%, ${Math.round(n)}%)`;const a=ie(ee);if(a.gradientColor2===i)return;const{history:o,index:l}=Aa(i,a.gradientColor2History,a.gradientColor2HistoryIndex);ee.update(r=>({...r,gradientColor2:i,gradientColor2History:o,gradientColor2HistoryIndex:l}))}function xn(){ee.set({...re,gradientColor1History:[...re.gradientColor1History],gradientColor2History:[...re.gradientColor2History]})}const kn={mouseMove:{maxRadius:50,speed:.35,lineWidth:1,initialOpacity:.35,color:"rgb(100, 180, 255)",decayRate:.005},click:{maxRadius:85,speed:.9,lineWidth:2.2,initialOpacity:.95,color:"rgb(190, 230, 255)",decayRate:.008},ambient:{maxRadius:30,speed:.2,lineWidth:1,initialOpacity:.15,color:"rgb(150, 200, 255)",decayRate:.008},longPress:{maxRadius:150,speed:.3,lineWidth:3.5,initialOpacity:.85,color:"rgb(70, 140, 220)",decayRate:.006},glintExpire:{maxRadius:40,speed:.9,lineWidth:1,initialOpacity:.6,color:"rgba(255, 255, 230, 0.7)",decayRate:.02}},Rn=2e3,_a=128,In=16,Cn=.05,En=30,Tn=400,On=10,Yt=.0011,Dn=.003,xa=3e3,lt=2,Pn=15,Gn="rgba(255, 255, 234, 0.95)",ka=4,Ln=1e3,Wt=3,qt=.15,Bn=.3,Vt=.2,Nn=.5,Kt=45,$n=60,He=.6,ze=.6,Ut=1,Xn=2.25,Fn=600,Zt=.05,Hn=.25,jt=.5,zn=1.25,Jt=.25,Yn=.55,Wn=6e4,qn=5e3,Me=[{x1:0,y1:0,x2:1,y2:1},{x1:.5,y1:0,x2:.5,y2:1},{x1:1,y1:0,x2:0,y2:1},{x1:1,y1:.5,x2:0,y2:.5},{x1:1,y1:1,x2:0,y2:0},{x1:.5,y1:1,x2:.5,y2:0},{x1:0,y1:1,x2:1,y2:0},{x1:0,y1:.5,x2:1,y2:.5}],Ra=25e3,Vn=.55,Kn="rgba(235, 245, 255, 0.7)",Un="rgba(210, 230, 245, 0.5)",Qt=.5,Zn=1.5,ye=15,ea=5,jn=12,ta=500,Jn=1e3,Qn=.2,Ne=.02,ct=.12,aa=.005,dt=.05,na=.02,ei=.3,ut=Math.PI/4,ia=25,ti=100,ai=.25,oa=10,ni=Math.PI/3,ii=2,ra=30,oi=70,ri=.25,gt={plane:{minSpeed:.25,maxSpeed:.5,minSize:25,maxSize:45,baseOpacity:.4,minDuration:1e4,maxDuration:2e4,chancePerInterval:.01},whaleShadow:{minSpeed:.18,maxSpeed:.32,minSize:40,maxSize:70,baseOpacity:.5,minDuration:1200,maxDuration:2500,chancePerInterval:.09}};function si(e){const t=Math.max(0,Math.min(1,e));return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}const $e=15,Xe=.04;function li(e,t,n){const i=(e*Xe+t*Xe*.3+n*.8)*Math.PI*2,a=(e*Xe*.7-t*Xe+n*.5)*Math.PI*2,o=Math.sin(i)*$e*.6+Math.sin(a)*$e*.4,l=Math.cos(i)*$e*.4+Math.cos(a)*$e*.6;return{dx:o,dy:l}}let sa=0,la=0,ca=0,ci=0,da=0,ua=0,di=0,ha=0;const Ye=[],We=[],qe=[],Ia=[],Ve=[],Ke=[],Ca=[],Ue=[],Ea=[],Ta=[],Oa=[],Da=[],Pa=[],Ga=[],La=[],ui=()=>Ye,Qe=()=>We,Ba=()=>qe,bt=()=>Ia,yt=()=>Ve,St=()=>Ke,Pe=()=>Ca,Ze=()=>Ue;function hi(e){let t=Ea.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.maxRadius=e.maxRadius,t.opacity=e.opacity,t.speed=e.speed,t.lineWidth=e.lineWidth,t.color=e.color,t.isAmbient=e.isAmbient,t.decayRate=e.decayRate,t.id=sa++):t={...e,id:sa++},Ye.push(t)}function gi(e){let t=Ga.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.currentMaxRadius=e.currentMaxRadius,t.opacity=e.opacity,t.growthSpeed=e.growthSpeed,t.opacitySpeed=e.opacitySpeed,t.color=e.color,t.vx=e.vx,t.vy=e.vy,t.isWave=e.isWave,t.relativeXInSpawn=e.relativeXInSpawn,t.relativeYInSpawn=e.relativeYInSpawn,t.baseVx=e.baseVx,t.baseVy=e.baseVy,t.id=la++):t={...e,id:la++},We.push(t)}function fi(e){let t=Ta.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.opacity=e.opacity,t.decay=e.decay,t.color=e.color,t.id=ca++):t={...e,id:ca++},qe.push(t)}const mi=e=>{Ia.push({...e,id:ci++})};function vi(e){let t=Oa.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.opacity=e.opacity,t.decay=e.decay,t.color=e.color,t.id=da++):t={...e,id:da++},Ve.push(t)}function pi(e){let t=Da.pop();t?(t.type=e.type,t.x=e.x,t.y=e.y,t.vx=e.vx,t.vy=e.vy,t.size=e.size,t.opacity=e.opacity,t.age=0,t.maxAge=e.maxAge,e.type==="whaleShadow"?(t.bodyAngle=e.bodyAngle??0,t.bodyAngleSpeed=e.bodyAngleSpeed,t.bodyAngleAmplitude=e.bodyAngleAmplitude,t.tailAngleOffset=e.tailAngleOffset??0,t.tailOscillationSpeed=e.tailOscillationSpeed,t.tailOscillationAmplitude=e.tailOscillationAmplitude):(delete t.bodyAngle,delete t.bodyAngleSpeed,delete t.bodyAngleAmplitude,delete t.tailAngleOffset,delete t.tailOscillationSpeed,delete t.tailOscillationAmplitude),t.id=ua++):t={...e,age:0,id:ua++},Ke.push(t)}const bi=e=>{Ca.push({...e,id:di++})};function yi(e){let t=Pa.pop();t?(t.anchorX=e.anchorX,t.anchorY=e.anchorY,t.particles=[],t.vx=e.vx,t.vy=e.vy,t.opacity=0,t.age=0,t.maxAge=e.maxAge,t.color=e.color,t.id=ha++):t={...e,particles:[],opacity:0,age:0,id:ha++},Ue.push(t)}function Si(e,t){let n=La.pop();n?(n.x=t.x,n.y=t.y,n.size=t.size,n.opacity=0,n.initialRelativeX=t.initialRelativeX,n.initialRelativeY=t.initialRelativeY,n.appearAtAge=t.appearAtAge,n.maxOpacity=t.maxOpacity,n.particleAge=0,n.particleMaxAge=t.particleMaxAge):n={...t,opacity:0,particleAge:0},e.particles.push(n)}function Mi(e){const t=Ye.findIndex(n=>n.id===e.id);if(t!==-1){const n=Ye.splice(t,1)[0];n&&Ea.push(n)}else console.warn(`Attempted to release ripple with ID ${e.id} not found in active list.`)}function wi(){if(We.length>0){const e=We.shift();if(e)return Ga.push(e),e}return null}function Ai(e){const t=qe.findIndex(n=>n.id===e.id);if(t!==-1){const n=qe.splice(t,1)[0];n&&Ta.push(n)}else console.warn(`Attempted to release glint with ID ${e.id} not found in active list.`)}function _i(e){const t=Ve.findIndex(n=>n.id===e.id);if(t!==-1){const n=Ve.splice(t,1)[0];n&&Oa.push(n)}else console.warn(`Attempted to release sunGlint with ID ${e.id} not found in active list.`)}function xi(e){const t=Ke.findIndex(n=>n.id===e.id);if(t!==-1){const n=Ke.splice(t,1)[0];n&&Da.push(n)}else console.warn(`Attempted to release rareSighting with ID ${e.id} not found in active list.`)}function Na(e){La.push(e)}function ft(e){const t=Ue.findIndex(n=>n.id===e.id);if(t!==-1){const n=Ue.splice(t,1)[0];if(n){for(const i of n.particles)Na(i);n.particles=[],Pa.push(n)}}else console.warn(`Attempted to release foamStreak with ID ${e.id} not found in active list.`)}function Ee(e,t,n){const i=kn[n];if(!i)throw console.error(`Unknown ripple type: ${n}. Ensure it is defined in RIPPLE_CONFIG.`),new Error(`Unknown ripple type: ${n}`);let a=i.speed,o=i.maxRadius;(n==="mouseMove"||n==="click")&&(a=i.speed*(.9+Math.random()*.2),o=i.maxRadius*(.9+Math.random()*.2)),hi({x:e,y:t,radius:0,maxRadius:o,opacity:i.initialOpacity,speed:a,lineWidth:i.lineWidth,color:i.color,isAmbient:n==="ambient",decayRate:i.decayRate})}function ki(e){const t=e.globalAlpha,n=ui();for(let i=n.length-1;i>=0;i--){const a=n[i];if(a.radius+=a.speed,a.opacity-=a.decayRate,a.opacity<=0||a.radius>=a.maxRadius){Mi(a);continue}e.beginPath(),e.arc(a.x,a.y,a.radius,0,Math.PI*2),e.lineWidth=a.lineWidth,e.strokeStyle=a.color,e.globalAlpha=Math.max(0,a.opacity),e.stroke()}e.globalAlpha=t}function ga(e,t,n){Qe().length>=_a&&wi();let i,a,o,l,r,h,g,u=1;const v=e*(1-He)/2,p=e*He,c=t*(1-ze)/2,d=t*ze,S=v+Math.random()*p,w=c+Math.random()*d;n?(i=Math.min(e,t)/2*(.8+Math.random()*.4),u=Vt+Math.random()*(Nn-Vt),a=(Math.random()-.5)*.2*u,o=(Math.random()-.5)*.2*u,l=qt+Math.random()*(Bn-qt),r=(Math.random()*.015+.005)*(Math.random()<.5?1:-1)*u,h=(Math.random()*15e-5+5e-5)*(Math.random()<.5?1:-1)*u,g=`hsl(210, ${68+Math.random()*10}%, ${Kt+Math.random()*($n-Kt)}%)`):(i=Math.random()*80+40,a=(Math.random()-.5)*.12,o=(Math.random()-.5)*.12,l=Math.random()*.03+.01,r=(Math.random()*.02+.01)*(Math.random()<.5?1:-1),h=(Math.random()*2e-4+1e-4)*(Math.random()<.5?1:-1),g=`hsl(${200+Math.random()*20}, ${65+Math.random()*20}%, ${35+Math.random()*30}%)`),gi({x:S,y:w,radius:Math.random()*i*.3+i*.2,currentMaxRadius:i,opacity:l,growthSpeed:r,opacitySpeed:h,color:g,vx:a,vy:o,isWave:n,relativeXInSpawn:p>0?(S-v)/p:.5,relativeYInSpawn:d>0?(w-c)/d:.5,baseVx:a,baseVy:o})}function Ri(e,t,n,i){const a=Qe();if(a.length===0)return;const o=e.globalCompositeOperation;e.globalCompositeOperation="screen";for(let l=a.length-1;l>=0;l--){const r=a[l];r.x+=r.vx,r.y+=r.vy,r.radius+=r.growthSpeed,r.opacity+=r.opacitySpeed,(r.opacity>.06||r.opacity<.005)&&(r.opacitySpeed*=-1,r.opacity=Math.max(.005,Math.min(.06,r.opacity))),(r.radius>r.currentMaxRadius||r.radius<r.currentMaxRadius*.2)&&(r.growthSpeed*=-1,r.radius=Math.max(10,Math.min(r.currentMaxRadius,r.radius))),(r.x-r.radius<0||r.x+r.radius>t)&&(r.vx*=-1,r.x=Math.max(r.radius,Math.min(t-r.radius,r.x))),(r.y-r.radius<0||r.y+r.radius>n)&&(r.vy*=-1,r.y=Math.max(r.radius,Math.min(n-r.radius,r.y)));const h=li(r.x,r.y,i),g=r.x+h.dx,u=r.y+h.dy,v=e.createRadialGradient(g,u,0,g,u,r.radius),p=r.color.substring(0,r.color.lastIndexOf(")"));v.addColorStop(0,`${p}, ${r.opacity})`),v.addColorStop(.7,`${p}, ${r.opacity*.5})`),v.addColorStop(1,`${p}, 0)`),e.fillStyle=v,e.beginPath(),e.arc(g,u,r.radius,0,Math.PI*2),e.fill()}e.globalCompositeOperation=o}function Ii(e,t){const n=Qe();if(n.length===0)return;const i=e*(1-He)/2,a=e*He,o=t*(1-ze)/2,l=t*ze,r=i+a/2,h=o+l/2,g=Math.sqrt(Math.pow(a/2,2)+Math.pow(l/2,2))+.001;for(const u of n){const v=u.relativeXInSpawn!==void 0?u.relativeXInSpawn:Math.random(),p=u.relativeYInSpawn!==void 0?u.relativeYInSpawn:Math.random();if(u.x=i+v*a,u.y=o+p*l,u.baseVx!==void 0&&u.baseVy!==void 0){const c=Math.sqrt(Math.pow(u.x-r,2)+Math.pow(u.y-h,2)),d=Math.min(1,c/g),S=Ut+d*(Xn-Ut);u.vx=u.baseVx*S,u.vy=u.baseVy*S}if(u.isWave){const c=Math.min(e,t)/2*(.8+Math.random()*.4);u.currentMaxRadius=c,u.radius=Math.random()*c*.3+c*.2}}}const fa=[[0,0],[0,1],[0,2],[1,0],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[1,2],[2,0],[2,1],[2,2]];function $a(e,t){const n=fa[Math.floor(Math.random()*fa.length)],i=n[0],a=n[1],o=e/3,l=t/3,r=a*o+Math.random()*o,h=i*l+Math.random()*l;return{x:r,y:h}}function Ci(e,t,n){if(yt().length>=xa)return;const i=Math.random()*Math.PI*2,a=Math.random()*n*.5;vi({x:e+Math.cos(i)*a,y:t+Math.sin(i)*a,radius:Math.random()*.6+.4,opacity:Math.random()*.3+.7,decay:Math.random()*.008+.002,color:Gn})}function Ei(e,t){const n=Math.min(e,t),{x:i,y:a}=$a(e,t);mi({x:i,y:a,baseRadius:n*.45,radiusAmplitude:n*.12,currentRadius:n*.45,baseOpacity:.35,opacityAmplitude:.3,currentOpacity:.35,pulseAngle:Math.random()*Math.PI*2,pulseSpeed:Yt+Math.random()*(Dn-Yt),vx:0,vy:0,relativeX:i/e,relativeY:a/t})}function Ti(e){const t=yt();if(t.length===0)return;const n=e.globalAlpha;for(let i=t.length-1;i>=0;i--){const a=t[i];a.x+=(Math.random()-.5)*.5,a.y+=(Math.random()-.5)*.5,a.opacity-=a.decay,a.radius+=.005,a.opacity<=0?_i(a):(e.beginPath(),e.arc(a.x,a.y,a.radius,0,Math.PI*2),e.fillStyle=a.color,e.globalAlpha=Math.max(0,a.opacity),e.fill())}e.globalAlpha=n}function Oi(e){const t=bt();if(t.length===0)return;const n=e.globalCompositeOperation;e.globalCompositeOperation="lighter";const i=e.globalAlpha;for(let a=0;a<t.length;a++){const o=t[a];o.pulseAngle+=o.pulseSpeed,o.currentRadius=o.baseRadius+Math.sin(o.pulseAngle)*o.radiusAmplitude,o.currentOpacity=o.baseOpacity+(Math.sin(o.pulseAngle*.7+Math.PI/3)*.5+.5)*o.opacityAmplitude,o.currentOpacity=Math.max(0,Math.min(1,o.currentOpacity));const l=o.baseOpacity+o.opacityAmplitude,r=l>0?Math.max(0,o.currentOpacity/l):0,h=l>0?o.baseOpacity/l:0;let g=0;if(r>0)if(r<=h){const v=h>0?r/h:0;g=Math.round(v*lt)}else{const v=1-h,p=v>0?(r-h)/v:1;g=Math.round(lt+p*(Pn-lt))}g=Math.max(0,g);for(let v=0;v<g&&(Ci(o.x,o.y,o.currentRadius),!(yt().length>=xa));v++);const u=e.createRadialGradient(o.x,o.y,0,o.x,o.y,o.currentRadius);u.addColorStop(0,`rgba(255, 250, 220, ${o.currentOpacity})`),u.addColorStop(.25,`rgba(255, 235, 180, ${o.currentOpacity*.8})`),u.addColorStop(.6,`rgba(255, 220, 150, ${o.currentOpacity*.4})`),u.addColorStop(1,"rgba(255, 210, 130, 0)"),e.fillStyle=u,e.globalAlpha=1,e.beginPath(),e.arc(o.x,o.y,o.currentRadius,0,Math.PI*2),e.fill()}e.globalCompositeOperation=n,e.globalAlpha=i}function Di(e,t){const n=bt();if(n.length===0)return;const i=Math.min(e,t);for(const a of n){if(a.relativeX!==void 0&&a.relativeY!==void 0)a.x=a.relativeX*e,a.y=a.relativeY*t;else{console.warn("SunGlow missing relative coordinates during resize. Recalculating position.");const{x:o,y:l}=$a(e,t);a.x=o,a.y=l,a.relativeX=o/e,a.relativeY=l/t}a.baseRadius=i*.45,a.radiusAmplitude=i*.12}}function Pi(e,t){Ba().length>=In||fi({x:Math.random()*e,y:Math.random()*t,radius:Math.random()*.25+.2,opacity:Math.random()*.4+.2,decay:Math.random()*.005+.005,color:"rgba(255, 255, 230, 0.85)"})}function Gi(e){const t=Ba();if(t.length===0)return[];const n=[],i=e.globalAlpha;for(let a=t.length-1;a>=0;a--){const o=t[a];o.opacity-=o.decay,o.opacity<=0?(n.push({x:o.x,y:o.y}),Ai(o)):(e.beginPath(),e.arc(o.x,o.y,o.radius,0,Math.PI*2),e.fillStyle=o.color,e.globalAlpha=Math.max(0,o.opacity),e.fill())}return e.globalAlpha=i,n}function Li(e,t){e.fillRect(t.x-t.size/2,t.y-t.size/8,t.size,t.size/4),e.fillRect(t.x-t.size/6,t.y-t.size/3,t.size/3,t.size*.8)}function Bi(e,t){t.bodyAngleSpeed&&t.bodyAngleAmplitude&&(t.bodyAngle=Math.sin(t.age*t.bodyAngleSpeed)*t.bodyAngleAmplitude),t.tailOscillationSpeed&&t.tailOscillationAmplitude&&(t.tailAngleOffset=Math.sin(t.age*t.tailOscillationSpeed)*t.tailOscillationAmplitude);const a=t.size*(1+Math.sin(t.age*.02)*.05),o=a/3.5,l=o*.9,r=a*.3;e.save(),e.translate(t.x,t.y),e.rotate(t.bodyAngle||0),e.beginPath(),e.ellipse(0,0,a/2,o/2,0,0,Math.PI*2),e.fill();const h=-a/2*.85,g=0;e.save(),e.translate(h,g),e.rotate(t.tailAngleOffset||0),e.beginPath(),e.ellipse(0,0,r/2,l/2,0,0,Math.PI*2),e.fill(),e.restore(),e.restore()}function Ni(e,t,n){if(St().length>=ka)return;const i=n,a=gt[i];if(!a){console.warn(`Configuration not found for rare sighting type: ${i}`);return}let o,l,r,h;const g=a.minSpeed+Math.random()*(a.maxSpeed-a.minSpeed);switch(i){case"plane":o=Math.random()<.5?-a.maxSize:e+a.maxSize,l=Math.random()*t*.3,r=(o<0?1:-1)*g,h=(Math.random()-.5)*g*.3;break;case"whaleShadow":o=Math.random()<.5?-a.maxSize*1.5:e+a.maxSize*1.5,l=t*(.5+Math.random()*.4),r=(o<0?1:-1)*g,h=(Math.random()-.5)*g*.1;break;default:console.warn(`Unhandled rare sighting type for creation: ${i}`);return}const u={type:i,x:o,y:l,vx:r,vy:h,size:a.minSize+Math.random()*(a.maxSize-a.minSize),opacity:a.baseOpacity,age:0,maxAge:a.minDuration+Math.random()*(a.maxDuration-a.minDuration),...i==="whaleShadow"?{bodyAngle:0,bodyAngleSpeed:(Math.random()*.003+.002)*(Math.random()<.5?1:-1),bodyAngleAmplitude:Math.PI/36,tailAngleOffset:0,tailOscillationSpeed:Math.random()*.04+.03,tailOscillationAmplitude:Math.PI/10}:{}};pi(u)}function $i(e,t,n){const i=St();if(i.length===0)return;const a=e.globalAlpha;for(let o=i.length-1;o>=0;o--){const l=i[o];l.age++,l.x+=l.vx,l.y+=l.vy;const r=l.size*2,h=l.age>l.maxAge,g=l.x<-r||l.x>t+r||l.y<-r||l.y>n+r;if(h||g){xi(l);continue}let u=l.opacity;const v=.8;if(l.age/l.maxAge>v){const p=(l.age/l.maxAge-v)/(1-v);u=l.opacity*(1-p)}switch(u=Math.max(0,u),e.globalAlpha=u,e.fillStyle=`rgba(10, 10, 20, ${u*.7})`,l.type){case"plane":Li(e,l);break;case"whaleShadow":Bi(e,l);break;default:console.warn(`No drawing function implemented for rare sighting type: ${l.type}`)}}e.globalAlpha=a}function Xi(e,t){if(Pe().length>0){console.warn("Attempted to re-initialize water grains. Skipping.");return}for(let n=0;n<Fn;n++){const i=Zt+Math.random()*(Hn-Zt),a=Math.random()*Math.PI*2,o=20+Math.random()*10,l=Math.random()*e,r=Math.random()*t;bi({x:l,y:r,vx:Math.cos(a)*i,vy:Math.sin(a)*i,size:jt+Math.random()*(zn-jt),opacity:Jt+Math.random()*(Yn-Jt),color:`hsl(210, ${65+Math.random()*10}%, ${o}%)`,relativeX:e>0?l/e:.5,relativeY:t>0?r/t:.5})}console.log(`Initialized ${Pe().length} water grains.`)}function Fi(e,t,n){const i=Pe();if(i.length===0)return;const a=e.globalAlpha;for(const o of i)o.x+=o.vx,o.y+=o.vy,o.x<-o.size?o.x=t+o.size:o.x>t+o.size&&(o.x=-o.size),o.y<-o.size?o.y=n+o.size:o.y>n+o.size&&(o.y=-o.size),e.beginPath(),e.arc(o.x,o.y,o.size,0,Math.PI*2),e.fillStyle=o.color,e.globalAlpha=Math.max(0,o.opacity*a),e.fill();e.globalAlpha=a}function Hi(e,t){const n=Pe();if(n.length!==0)for(const i of n)i.relativeX!==void 0&&i.relativeY!==void 0?(i.x=i.relativeX*e,i.y=i.relativeY*t):(console.warn("WaterGrain missing relative coordinates during resize. Re-randomizing position."),i.x=Math.random()*e,i.y=Math.random()*t,i.relativeX=e>0?i.x/e:.5,i.relativeY=t>0?i.y/t:.5)}function zi(e,t){if(Ze().length>=Ra)return;const n=Math.floor(Math.random()*3);let i,a,o,l,r;n===0?(i=Math.random()*e,a=-ye,o=(Math.random()-.5)*ct*.5,l=aa+Math.random()*(dt-aa),r=Math.PI/2+(Math.random()-.5)*(Math.PI/6)):n===1?(i=-ye,a=Math.random()*t,o=Ne+Math.random()*(ct-Ne),l=(Math.random()-.5)*dt*.4,r=(Math.random()-.5)*(Math.PI/4)):(i=e+ye,a=Math.random()*t,o=-(Ne+Math.random()*(ct-Ne)),l=(Math.random()-.5)*dt*.4,r=Math.PI+(Math.random()-.5)*(Math.PI/4));let h=0;const g=(c,d,S,w,T,m)=>{let H=d,O=S,_=w;for(let N=0;N<T;N++){const X=ea+Math.random()*(jn-ea);if(_+=(Math.random()-.5)*2*ut,m){const A=(_-w+Math.PI*3)%(Math.PI*2)-Math.PI;Math.abs(A)>ut*1.5&&(_=w+Math.sign(A)*ut*1.5)}else n===0?_=Math.max(Math.PI/4,Math.min(3*Math.PI/4,_)):n===1?_=Math.max(-Math.PI/3,Math.min(Math.PI/3,_)):_=Math.max(2*Math.PI/3,Math.min(4*Math.PI/3,_));const D=H+Math.cos(_)*X,x=O+Math.sin(_)*X;for(let A=0;A<ii;A++){const F=Qt+Math.random()*(Zn-Qt),j=_+Math.PI/2,k=(Math.random()-.5)*ye*.8,q=H+Math.cos(j)*k,z=O+Math.sin(j)*k;Si(c,{x:q,y:z,initialRelativeX:q,initialRelativeY:z,size:F,opacity:0,appearAtAge:h++*ei,maxOpacity:.5+Math.random()*.4,particleAge:0,particleMaxAge:ra+Math.random()*(oi-ra)})}if(H=D,O=x,!m&&Math.random()<ai&&N<T-oa/2&&N>2){const A=(Math.random()<.5?-1:1)*ni*(.7+Math.random()*.6),F=Math.floor(oa*(.5+Math.random()*.5));g(c,H,O,_+A,F,!0)}}},u=ia+Math.floor(Math.random()*(ti-ia+1));g(0,0,r,u,!1);const v={anchorX:i,anchorY:a,particles:[],vx:o,vy:l,opacity:0,age:0,maxAge:ta+Math.random()*(Jn-ta),color:Math.random()<.6?Kn:Un};yi(v);const p=Ze().find(c=>c.anchorX===i&&c.anchorY===a&&c.age===0);if(p){if(g(p,0,0,r,u,!1),p.particles.length<5){ft(p);return}}else console.warn("Could not find newly added streak to generate particles into.")}function Yi(e,t,n){const i=Ze();if(i.length===0)return;const a=e.globalAlpha,o=e.globalCompositeOperation;e.globalCompositeOperation="lighter";for(let l=i.length-1;l>=0;l--){const r=i[l];r.age++,r.anchorX+=r.vx,r.anchorY+=r.vy;const h=r.maxAge*Qn;if(r.age<h?r.opacity=r.age/h:r.age>r.maxAge-h?r.opacity=1-(r.age-(r.maxAge-h))/h:r.opacity=1,r.opacity=Math.max(0,Math.min(1,r.opacity)),r.opacity<=0&&r.age>h){ft(r);continue}let g=!0;const u=ye*5,v=ye*5;if(r.anchorX>-u&&r.anchorX<t+u&&r.anchorY>-v&&r.anchorY<n+v)g=!1;else{g=!0;for(const p of r.particles){const c=r.anchorX+p.x,d=r.anchorY+p.y;if(c>-p.size&&c<t+p.size&&d>-p.size&&d<n+p.size){g=!1;break}}}if(g&&r.age>h*2){ft(r);continue}e.fillStyle=r.color;for(let p=r.particles.length-1;p>=0;p--){const c=r.particles[p];if(r.age<c.appearAtAge)continue;if(c.particleAge++,c.particleAge>c.particleMaxAge){c.opacity=0,Na(c),r.particles.splice(p,1);continue}else{const _=c.particleMaxAge*ri;c.particleAge<_?c.opacity=c.particleAge/_*c.maxOpacity:c.particleAge>c.particleMaxAge-_?c.opacity=(1-(c.particleAge-(c.particleMaxAge-_))/_)*c.maxOpacity:c.opacity=c.maxOpacity,c.opacity=Math.max(0,Math.min(c.maxOpacity,c.opacity))}if(c.opacity<=.001)continue;c.x+=(Math.random()-.5)*na,c.y+=(Math.random()-.5)*na;const d=c.x-c.initialRelativeX,S=c.y-c.initialRelativeY,w=d*d+S*S,T=ye*.5;if(w>T*T){const _=Math.sqrt(w);c.x=c.initialRelativeX+d/_*T,c.y=c.initialRelativeY+S/_*T}const m=r.anchorX+c.x,H=r.anchorY+c.y,O=r.opacity*c.opacity;O<=.001||(e.globalAlpha=O*a,e.beginPath(),e.arc(m,H,c.size,0,Math.PI*2),e.fill())}}e.globalCompositeOperation=o,e.globalAlpha=a}var Wi=te('<canvas class="pointer-events-none fixed top-0 left-0 -z-10 h-full w-full svelte-1mnusik"></canvas>');function qi(e,t){Ae(t,!1);let n=Pt(t,"gradientColor1",8,"hsl(210, 70%, 50%)"),i=Pt(t,"gradientColor2",8,"hsl(200, 68%, 50%)"),a=$(),o,l=0,r=0,h=0,g=1,u=0,v={...Me[0]},p=0;je(()=>{const d=s(a);if(!d){console.error("Canvas not available onMount");return}const S=d.getContext("2d");if(!S){console.error("Context not available onMount");return}F(),console.log(`[onMount after initial resize] Canvas: ${d.width}x${d.height}`);let w=0,T=0,m=null,H,O=!1,_=0;function N(){const k=Date.now();if(u===0&&(u=k,p=k,h=(r+1)%Me.length,g=0),k-u>=Wn&&g>=1&&(r=h,h=(r+1)%Me.length,g=0,u=k,p=k),g<1){const q=k-p;g=Math.min(1,q/qn);const z=si(g),Y=Me[r],J=Me[h];v.x1=Y.x1+(J.x1-Y.x1)*z,v.y1=Y.y1+(J.y1-Y.y1)*z,v.x2=Y.x2+(J.x2-Y.x2)*z,v.y2=Y.y2+(J.y2-Y.y2)*z}else v={...Me[h]},r=h}const X=k=>{if(m){if(!O){const z=k.pageX-m.x,Y=k.pageY-m.y;Math.sqrt(z*z+Y*Y)>On&&(O=!0)}const q=Date.now();q-w>En&&(Ee(k.pageX,k.pageY,"mouseMove"),w=q)}},D=k=>{T=Date.now(),m={x:k.pageX,y:k.pageY},O=!1},x=k=>{if(!m||T===0)return;const q=Date.now()-T;O||(q>=Tn?Ee(k.pageX,k.pageY,"longPress"):Ee(k.pageX,k.pageY,"mouseMove")),m=null,T=0,O=!1},A=()=>{d&&Ee(Math.random()*d.width,Math.random()*d.height,"ambient")};function F(){d&&(d.width=window.innerWidth,d.height=window.innerHeight,console.log(`[resizeCanvas] Canvas: ${d.width}x${d.height}`),Ii(d.width,d.height),Di(d.width,d.height),Hi(d.width,d.height))}if(window.addEventListener("resize",F),window.addEventListener("mousemove",X),window.addEventListener("mousedown",D),window.addEventListener("mouseup",x),typeof window<"u"&&(H=window.setInterval(A,Rn)),d){for(let k=0;k<_a-Wt;k++)ga(d.width,d.height,!1);for(let k=0;k<Wt;k++)ga(d.width,d.height,!0);Ei(d.width,d.height),Xi(d.width,d.height)}console.log(`[onMount End] Canvas: ${d.width}x${d.height}, ShimmerSpots: ${Qe().length}, Grains: ${Pe().length}, SunGlows: ${bt().length}`);function j(){if(!S||!d){o=requestAnimationFrame(j);return}l+=.002,N();const k=v.x1*d.width,q=v.y1*d.height,z=v.x2*d.width,Y=v.y2*d.height,J=S.createLinearGradient(k,q,z,Y),oe=typeof n()=="string"&&n().includes("hsl")?n():"hsl(210, 70%, 50%)",ae=typeof i()=="string"&&i().includes("hsl")?i():"hsl(200, 68%, 50%)";if(J.addColorStop(0,oe),J.addColorStop(1,ae),S.fillStyle=J,S.fillRect(0,0,d.width,d.height),ki(S),Ri(S,d.width,d.height,l),Fi(S,d.width,d.height),Oi(S),Ti(S),_+=16.67,_>=Ln){for(const se in gt){const ve=se,M=gt[ve];typeof M.chancePerInterval=="number"&&Math.random()<M.chancePerInterval&&St().length<ka&&Ni(d.width,d.height,ve)}_=0}$i(S,d.width,d.height),Math.random()<Cn&&Pi(d.width,d.height),Gi(S).forEach(se=>Ee(se.x,se.y,"glintExpire")),Math.random()<Vn&&Ze().length<Ra&&zi(d.width,d.height),Yi(S,d.width,d.height),o=requestAnimationFrame(j)}return j(),()=>{window.removeEventListener("resize",F),window.removeEventListener("mousemove",X),window.removeEventListener("mousedown",D),window.removeEventListener("mouseup",x),H&&clearInterval(H),o&&cancelAnimationFrame(o)}}),we();var c=Wi();Te(c,d=>E(a,d),()=>s(a)),Q(e,c),_e()}var Vi=te('<div class="professional-hsl-picker svelte-1bvbq9v"><div class="picker-header svelte-1bvbq9v"><div class="control-buttons svelte-1bvbq9v"><button title="Sync both gradients">ð</button> <button title="Lock current selection">ð</button> <button class="control-btn reset-btn svelte-1bvbq9v" title="Reset to defaults">âº</button></div></div> <div class="slider-section svelte-1bvbq9v"><div class="slider-label svelte-1bvbq9v">Hue (0Â° - 360Â°)</div> <div class="slider-container svelte-1bvbq9v"><canvas class="color-slider svelte-1bvbq9v"></canvas></div></div> <div class="slider-section svelte-1bvbq9v"><div class="slider-label svelte-1bvbq9v">Saturation (0% - 100%)</div> <div class="slider-container svelte-1bvbq9v"><canvas class="color-slider svelte-1bvbq9v"></canvas></div></div> <div class="slider-section svelte-1bvbq9v"><div class="slider-label svelte-1bvbq9v">Lightness (0% - 100%)</div> <div class="slider-container svelte-1bvbq9v"><canvas class="color-slider svelte-1bvbq9v"></canvas></div></div> <div class="color-preview svelte-1bvbq9v"><div class="preview-item svelte-1bvbq9v"><div class="preview-swatch svelte-1bvbq9v"></div> <span class="preview-label svelte-1bvbq9v"> </span></div> <div class="preview-item svelte-1bvbq9v"><div class="preview-swatch svelte-1bvbq9v"></div> <span class="preview-label svelte-1bvbq9v"> </span></div></div> <div class="instructions svelte-1bvbq9v"><p>Click: Set Gradient 1 â¢ Drag indicators to move</p></div></div>');function Ki(e,t){Ae(t,!1);const n=$(),i=$();let a=$(),o=$(),l=$(),r,h=$(null),g=$(null),u=$(null),v=$(!1),p=$(!1),c=!1,d=null,S=null;const w=320,T=40,m=16;let H=0,O={x:0,targetX:0,scale:1,opacity:.9},_={x:0,targetX:0,scale:1,opacity:.9},N={x:0,targetX:0,scale:1,opacity:.9},X={x:0,targetX:0,scale:1,opacity:.9},D={x:0,targetX:0,scale:1,opacity:.9},x={x:0,targetX:0,scale:1,opacity:.9},A;function F(){O.targetX=m+s(n).h/360*(w-2*m),_.targetX=m+s(i).h/360*(w-2*m),O.x=O.targetX,_.x=_.targetX,N.targetX=m+s(n).s/100*(w-2*m),X.targetX=m+s(i).s/100*(w-2*m),N.x=N.targetX,X.x=X.targetX,D.targetX=m+s(n).l/100*(w-2*m),x.targetX=m+s(i).l/100*(w-2*m),D.x=D.targetX,x.x=x.targetX}function j(f,b){const y=Math.max(0,Math.min(1,(f-m)/(w-2*m)));switch(b){case"hue":return y*360;case"saturation":return y*100;case"lightness":return y*100}}function k(){if(!s(h)||!s(g)||!s(u)){r=requestAnimationFrame(k);return}H+=.016;const f=c?1:.15;O.x+=(O.targetX-O.x)*f,_.x+=(_.targetX-_.x)*f,N.x+=(N.targetX-N.x)*f,X.x+=(X.targetX-X.x)*f,D.x+=(D.targetX-D.x)*f,x.x+=(x.targetX-x.x)*f,[O,_,N,X,D,x].forEach((y,P)=>{const G=P%2+1;d===G&&(S==="hue"&&P<2||S==="saturation"&&P>=2&&P<4||S==="lightness"&&P>=4)?(y.scale=1+.2*Math.sin(H*8),y.opacity=.95):(y.scale+=(1-y.scale)*.1,y.opacity+=(.9-y.opacity)*.1)}),q(),r=requestAnimationFrame(k)}function q(){z(),Y(),J()}function z(){if(!s(h))return;s(h).clearRect(0,0,w,T);const f=s(h).createLinearGradient(m,0,w-m,0);for(let b=0;b<=12;b++){const y=b/12*360;f.addColorStop(b/12,`hsl(${y}, 70%, 50%)`)}U(h,s(h).fillStyle=f),ae(s(h),m,8,w-2*m,T-16,8),s(h).fill(),U(h,s(h).strokeStyle="rgba(255, 255, 255, 0.2)"),U(h,s(h).lineWidth=1),ae(s(h),m,8,w-2*m,T-16,8),s(h).stroke(),oe(s(h),O,"#3B82F6","1"),oe(s(h),_,"#EC4899","2")}function Y(){if(!s(g))return;s(g).clearRect(0,0,w,T);const f=(s(n).h+s(i).h)/2,b=s(g).createLinearGradient(m,0,w-m,0);b.addColorStop(0,`hsl(${f}, 0%, 50%)`),b.addColorStop(1,`hsl(${f}, 100%, 50%)`),U(g,s(g).fillStyle=b),ae(s(g),m,8,w-2*m,T-16,8),s(g).fill(),U(g,s(g).strokeStyle="rgba(255, 255, 255, 0.2)"),U(g,s(g).lineWidth=1),ae(s(g),m,8,w-2*m,T-16,8),s(g).stroke(),oe(s(g),N,"#3B82F6","1"),oe(s(g),X,"#EC4899","2")}function J(){if(!s(u))return;s(u).clearRect(0,0,w,T);const f=(s(n).h+s(i).h)/2,b=(s(n).s+s(i).s)/2,y=s(u).createLinearGradient(m,0,w-m,0);y.addColorStop(0,`hsl(${f}, ${b}%, 0%)`),y.addColorStop(.25,`hsl(${f}, ${b}%, 25%)`),y.addColorStop(.5,`hsl(${f}, ${b}%, 50%)`),y.addColorStop(.75,`hsl(${f}, ${b}%, 75%)`),y.addColorStop(1,`hsl(${f}, ${b}%, 100%)`),U(u,s(u).fillStyle=y),ae(s(u),m,8,w-2*m,T-16,8),s(u).fill(),U(u,s(u).strokeStyle="rgba(255, 255, 255, 0.2)"),U(u,s(u).lineWidth=1),ae(s(u),m,8,w-2*m,T-16,8),s(u).stroke(),oe(s(u),D,"#3B82F6","1"),oe(s(u),x,"#EC4899","2")}function oe(f,b,y,P){const G=b.x,B=T/2,W=b.scale,Re=b.opacity;f.save(),f.globalAlpha=Re;const Ie=f.createRadialGradient(G,B,0,G,B,20*W);Ie.addColorStop(0,y+"40"),Ie.addColorStop(1,y+"00"),f.fillStyle=Ie,f.fillRect(G-20*W,B-20*W,40*W,40*W),f.beginPath(),f.arc(G,B,10*W,0,Math.PI*2),f.fillStyle=y,f.fill(),f.strokeStyle="rgba(255, 255, 255, 0.9)",f.lineWidth=2,f.stroke(),f.beginPath(),f.arc(G,B,6*W,0,Math.PI*2),f.fillStyle="rgba(255, 255, 255, 0.3)",f.fill(),f.fillStyle="white",f.font=`bold ${8*W}px system-ui`,f.textAlign="center",f.textBaseline="middle",f.fillText(P,G,B),f.restore()}function ae(f,b,y,P,G,B){f.beginPath(),f.moveTo(b+B,y),f.lineTo(b+P-B,y),f.quadraticCurveTo(b+P,y,b+P,y+B),f.lineTo(b+P,y+G-B),f.quadraticCurveTo(b+P,y+G,b+P-B,y+G),f.lineTo(b+B,y+G),f.quadraticCurveTo(b,y+G,b,y+G-B),f.lineTo(b,y+B),f.quadraticCurveTo(b,y,b+B,y),f.closePath()}function fe(f,b){let y,P,G;switch(b){case"hue":y=s(a),P=O,G=_;break;case"saturation":y=s(o),P=N,G=X;break;case"lightness":y=s(l),P=D,G=x;break;default:return}if(!y)return;const B=y.getBoundingClientRect(),W=f.clientX-B.left,Re=Math.abs(W-P.x),Ie=Math.abs(W-G.x);if(Re<20)c=!0,d=1,S=b,f.preventDefault();else if(Ie<20)c=!0,d=2,S=b,f.preventDefault();else{const za=j(W,b);ve(b,za,1)}}function me(f){if(!c||!S||!d)return;let b;switch(S){case"hue":b=s(a);break;case"saturation":b=s(o);break;case"lightness":b=s(l);break;default:return}if(!b)return;const y=b.getBoundingClientRect(),P=f.clientX-y.left,G=Math.max(m,Math.min(w-m,P)),B=j(G,S);ve(S,B,d)}function se(){c=!1,d=null,S=null}function ve(f,b,y){const P=y===1?s(n):s(i);if(!P)return;let G=P.h,B=P.s,W=P.l;switch(f){case"hue":G=b;break;case"saturation":B=b;break;case"lightness":W=b;break}y===1?Ht(G,B,W):zt(G,B,W)}function M(){E(p,!s(p))}function pe(){E(v,!s(v))}function Ge(){Ht(210,70,50),zt(200,68,50)}je(()=>{if(!(!s(a)||!s(o)||!s(l))&&(E(h,s(a).getContext("2d")),E(g,s(o).getContext("2d")),E(u,s(l).getContext("2d")),!(!s(h)||!s(g)||!s(u))))return U(a,s(a).width=w),U(a,s(a).height=T),U(o,s(o).width=w),U(o,s(o).height=T),U(l,s(l).width=w),U(l,s(l).height=T),F(),k(),document.addEventListener("mousemove",me),document.addEventListener("mouseup",se),A=ee.subscribe(f=>{}),()=>{r&&cancelAnimationFrame(r),document.removeEventListener("mousemove",me),document.removeEventListener("mouseup",se),A&&A()}}),qa(()=>{r&&cancelAnimationFrame(r)}),le(()=>Xt,()=>{E(n,Xt()||{h:210,s:70,l:50})}),le(()=>Ft,()=>{E(i,Ft()||{h:200,s:68,l:50})}),le(()=>(s(n),s(i),s(h),s(g),s(u)),()=>{s(n)&&s(i)&&typeof s(n).h=="number"&&typeof s(i).h=="number"&&(F(),s(h)&&s(g)&&s(u)&&q())}),Je(),we();var xe=Vi(),ke=I(xe),de=I(ke),be=I(de);let Le;var et=R(be,2);let Mt;var Xa=R(et,2);C(de),C(ke);var tt=R(ke,2),wt=R(I(tt),2),At=I(wt);Te(At,f=>E(a,f),()=>s(a)),C(wt),C(tt);var at=R(tt,2),_t=R(I(at),2),xt=I(_t);Te(xt,f=>E(o,f),()=>s(o)),C(_t),C(at);var nt=R(at,2),kt=R(I(nt),2),Rt=I(kt);Te(Rt,f=>E(l,f),()=>s(l)),C(kt),C(nt);var It=R(nt,2),it=I(It),Ct=I(it),Et=R(Ct,2),Fa=I(Et);C(Et),C(it);var Tt=R(it,2),Ot=I(Tt),Dt=R(Ot,2),Ha=I(Dt);C(Dt),C(Tt),C(It),pa(2),C(xe),ce((f,b,y,P,G,B,W,Re)=>{Le=Oe(be,1,"control-btn svelte-1bvbq9v",null,Le,f),Mt=Oe(et,1,"control-btn svelte-1bvbq9v",null,Mt,b),ht(Ct,`background-color: hsl(${s(n),L(()=>s(n).h)??""}, ${s(n),L(()=>s(n).s)??""}%, ${s(n),L(()=>s(n).l)??""}%)`),ue(Fa,`Gradient 1: ${y??""}Â°, ${P??""}%, ${G??""}%`),ht(Ot,`background-color: hsl(${s(i),L(()=>s(i).h)??""}, ${s(i),L(()=>s(i).s)??""}%, ${s(i),L(()=>s(i).l)??""}%)`),ue(Ha,`Gradient 2: ${B??""}Â°, ${W??""}%, ${Re??""}%`)},[()=>({active:s(p)}),()=>({active:s(v)}),()=>(s(n),L(()=>Math.round(s(n).h))),()=>(s(n),L(()=>Math.round(s(n).s))),()=>(s(n),L(()=>Math.round(s(n).l))),()=>(s(i),L(()=>Math.round(s(i).h))),()=>(s(i),L(()=>Math.round(s(i).s))),()=>(s(i),L(()=>Math.round(s(i).l)))]),V("click",be,M),V("click",et,pe),V("click",Xa,Ge),V("mousedown",At,f=>fe(f,"hue")),V("mousedown",xt,f=>fe(f,"saturation")),V("mousedown",Rt,f=>fe(f,"lightness")),Q(e,xe),_e()}var Ui=te("<div><!></div>"),Zi=te('<div role="toolbar" aria-label="Background Effects Dock"><div class="dock-container svelte-1osm15p"><div title="Professional HSL Color Picker"><div class="dock-icon svelte-1osm15p">ð¨</div></div> <div class="dock-item svelte-1osm15p" title="Water Effects"><div class="dock-icon svelte-1osm15p">ð</div></div> <div class="dock-item svelte-1osm15p" title="Light Effects"><div class="dock-icon svelte-1osm15p">â¨</div></div> <div class="dock-item svelte-1osm15p" title="Particle Effects"><div class="dock-icon svelte-1osm15p">ð«</div></div> <div class="dock-item svelte-1osm15p" title="Settings"><div class="dock-icon svelte-1osm15p">âï¸</div></div></div> <!></div>');function ji(e,t){Ae(t,!1);let n=$(),i=$(!1),a,o=0,l=0,r=$(!1);const h=100,g=3e3;je(()=>{const x=F=>{o=F.clientY,u()},A=()=>{l=window.innerHeight};return window.addEventListener("mousemove",x),window.addEventListener("resize",A),A(),()=>{window.removeEventListener("mousemove",x),window.removeEventListener("resize",A),a&&clearTimeout(a)}});function u(){const A=l-o<=h;A&&!s(i)?v():!A&&s(i)&&c()}function v(){E(i,!0),a&&(clearTimeout(a),a=0)}function p(){E(i,!1)}function c(){a&&clearTimeout(a),a=setTimeout(p,g)}function d(){v()}function S(){c()}function w(){E(r,!s(r)),s(r)&&v()}function T(x){switch(x){case"colors":w();break}}we();var m=Zi();let H;var O=I(m),_=I(O);let N;pa(8),C(O);var X=R(O,2);{var D=x=>{var A=Ui();let F;var j=I(A);Ki(j,{}),C(A),ce(k=>F=Oe(A,1,"color-grid-panel svelte-1osm15p",null,F,k),[()=>({visible:s(r)})]),Q(x,A)};De(X,x=>{s(r)&&x(D)})}C(m),Te(m,x=>E(n,x),()=>s(n)),ce((x,A)=>{H=Oe(m,1,"floating-dock svelte-1osm15p",null,H,x),N=Oe(_,1,"dock-item svelte-1osm15p",null,N,A)},[()=>({visible:s(i)}),()=>({active:s(r)})]),V("click",_,()=>T("colors")),V("mouseenter",m,d),V("mouseleave",m,S),Q(e,m),_e()}var Ji=te('<meta name="description" content="A beautiful Pomodoro timer with interactive background effects"/>'),Qi=te('<span class="text-sm text-white/60 block mt-1"> </span>'),eo=te('<div class="text-lg font-medium text-white/80"> <!></div>'),to=te('<!> <!> <main class="relative z-10 flex min-h-screen flex-col items-center justify-center px-4 py-8 transition-all duration-1000 ease-in-out"><div class="w-full max-w-md space-y-8 text-center"><!> <!> <!> <div class="space-y-4 rounded-2xl bg-black/20 p-6 backdrop-blur-sm"><h3 class="text-lg font-semibold text-white/90">Timer Settings</h3> <div class="grid grid-cols-2 gap-4"><div><label for="work-duration" class="block text-sm font-medium text-white/70">Work (min)</label> <input id="work-duration" type="number" min="1" max="120" class="mt-1 w-full rounded-lg bg-white/10 px-3 py-2 text-white placeholder-white/50 backdrop-blur-sm focus:bg-white/20 focus:outline-none focus:ring-2 focus:ring-blue-500/50 svelte-k0cir4"/></div> <div><label for="short-break-duration" class="block text-sm font-medium text-white/70">Short Break (min)</label> <input id="short-break-duration" type="number" min="1" max="60" class="mt-1 w-full rounded-lg bg-white/10 px-3 py-2 text-white placeholder-white/50 backdrop-blur-sm focus:bg-white/20 focus:outline-none focus:ring-2 focus:ring-blue-500/50 svelte-k0cir4"/></div> <div><label for="long-break-duration" class="block text-sm font-medium text-white/70">Long Break (min)</label> <input id="long-break-duration" type="number" min="1" max="120" class="mt-1 w-full rounded-lg bg-white/10 px-3 py-2 text-white placeholder-white/50 backdrop-blur-sm focus:bg-white/20 focus:outline-none focus:ring-2 focus:ring-blue-500/50 svelte-k0cir4"/></div> <div><label for="sessions-before-long-break" class="block text-sm font-medium text-white/70">Sessions Before Long Break</label> <input id="sessions-before-long-break" type="number" min="1" max="10" class="mt-1 w-full rounded-lg bg-white/10 px-3 py-2 text-white placeholder-white/50 backdrop-blur-sm focus:bg-white/20 focus:outline-none focus:ring-2 focus:ring-blue-500/50 svelte-k0cir4"/></div></div> <div class="flex items-center justify-between"><label for="auto-cycle" class="text-sm font-medium text-white/70">Auto-cycle sessions</label> <input id="auto-cycle" type="checkbox" class="h-4 w-4 rounded border-white/30 bg-white/10 text-blue-600 focus:ring-blue-500/50"/></div> <div class="flex items-center justify-between"><label for="floating-enabled" class="text-sm font-medium text-white/70">Enable floating effects</label> <input id="floating-enabled" type="checkbox" class="h-4 w-4 rounded border-white/30 bg-white/10 text-blue-600 focus:ring-blue-500/50"/></div> <button type="button" class="w-full rounded-lg bg-red-600/20 px-4 py-2 text-red-300 backdrop-blur-sm hover:bg-red-600/30 focus:outline-none focus:ring-2 focus:ring-red-500/50">Reset to Defaults</button></div></div></main>',1);function so(e,t){Ae(t,!1);const[n,i]=vt(),a=()=>he(ne,"$timerSettings",n),o=()=>he(ee,"$backgroundSettings",n),l=()=>he(K,"$timerState",n);let r=$(!1),h=$(a().workDuration/60),g=$(a().shortBreakDuration/60),u=$(a().longBreakDuration/60),v=$(a().sessionsBeforeLongBreak),p=$(a().autoCycle),c=$(o().isFloatingEnabled);je(()=>{E(r,!0),E(c,o().isFloatingEnabled)}),ne.subscribe(M=>{M.workDuration/60!==s(h)&&E(h,M.workDuration/60),M.shortBreakDuration/60!==s(g)&&E(g,M.shortBreakDuration/60),M.longBreakDuration/60!==s(u)&&E(u,M.longBreakDuration/60),M.sessionsBeforeLongBreak!==s(v)&&E(v,M.sessionsBeforeLongBreak),M.autoCycle!==s(p)&&E(p,M.autoCycle)}),ee.subscribe(M=>{M.isFloatingEnabled!==s(c)&&E(c,M.isFloatingEnabled)});function d(M){switch(M){case"work":return"Focus Session";case"shortBreak":return"Short Break";case"longBreak":return"Long Break";default:return"Session"}}function S(){xn()}le(()=>(s(r),s(h),s(g),s(u),s(v),s(p),a(),ne),()=>{if(s(r)){const M={workDuration:Math.max(1,s(h))*60,shortBreakDuration:Math.max(1,s(g))*60,longBreakDuration:Math.max(1,s(u))*60,sessionsBeforeLongBreak:Math.max(1,s(v)),autoCycle:s(p)};(a().workDuration!==M.workDuration||a().shortBreakDuration!==M.shortBreakDuration||a().longBreakDuration!==M.longBreakDuration||a().sessionsBeforeLongBreak!==M.sessionsBeforeLongBreak||a().autoCycle!==M.autoCycle)&&ne.set(M)}}),le(()=>(s(r),o(),s(c),ee),()=>{s(r)&&o().isFloatingEnabled!==s(c)&&ee.update(M=>({...M,isFloatingEnabled:s(c)}))}),Je(),we();var w=to();Va(M=>{var pe=Ji();an.title="Locked-In Pomodoro Timer",Q(M,pe)});var T=tn(w);qi(T,{get gradientColor1(){return o(),L(()=>o().gradientColor1)},get gradientColor2(){return o(),L(()=>o().gradientColor2)}});var m=R(T,2);ji(m,{});var H=R(m,2),O=I(H),_=I(O);bn(_,{});var N=R(_,2);{var X=M=>{var pe=eo(),Ge=I(pe),xe=R(Ge);{var ke=de=>{var be=Qi(),Le=I(be);C(be),ce(()=>ue(Le,`Session ${l(),L(()=>l().completedSessions+1)??""} of ${a(),L(()=>a().sessionsBeforeLongBreak)??""}`)),Q(de,be)};De(xe,de=>{l(),L(()=>l().currentSession.type==="work")&&de(ke)})}C(pe),ce(de=>ue(Ge,`${de??""} `),[()=>(l(),L(()=>d(l().currentSession.type)))]),Q(M,pe)};De(N,M=>{l(),L(()=>l().currentSession)&&M(X)})}var D=R(N,2);wn(D,{});var x=R(D,2),A=R(I(x),2),F=I(A),j=R(I(F),2);Se(j),C(F);var k=R(F,2),q=R(I(k),2);Se(q),C(k);var z=R(k,2),Y=R(I(z),2);Se(Y),C(z);var J=R(z,2),oe=R(I(J),2);Se(oe),C(J),C(A);var ae=R(A,2),fe=R(I(ae),2);Se(fe),C(ae);var me=R(ae,2),se=R(I(me),2);Se(se),C(me);var ve=R(me,2);C(x),C(O),C(H),Be(j,()=>s(h),M=>E(h,M)),Be(q,()=>s(g),M=>E(g,M)),Be(Y,()=>s(u),M=>E(u,M)),Be(oe,()=>s(v),M=>E(v,M)),Bt(fe,()=>s(p),M=>E(p,M)),Bt(se,()=>s(c),M=>E(c,M)),V("click",ve,S),Q(e,w),_e(),i()}export{so as component};
