import"../chunks/DsnmJJEf.js";import{i as Ee}from"../chunks/DnLI74R3.js";import{C as Oa,v as fn,A as rt,w as pe,ak as Ue,x as Tt,h as a,_ as pn,y as hn,H as gn,z as Jt,B as _t,K as Be,ah as Ga,an as mn,D as Ot,G as yn,F as He,aE as ea,Q as W,aF as ta,ar as za,af as Sn,aG as bn,I as $a,J as _n,aH as Mn,aI as wn,aJ as Mt,aK as Da,aj as La,aL as xn,aq as An,aM as kn,Y as Pa,t as he,aN as In,ao as Cn,am as Rn,at as aa,aO as En,aP as Tn,aQ as On,aR as Gn,aS as zn,aT as $n,aU as Dn,e as A,M as Fa,aV as Ln,p as Te,aW as we,aX as ze,l as oe,a as le,m as Oe,R as L,n as p,o as v,q as g,i as Gt,aY as _e,aZ as Ye,f as Pn,a_ as Fn}from"../chunks/BmSkCEzP.js";import{b as Bn,l as Ba,w as Lt,d as Nn,g as Ie,s as Q,e as F,o as Pt,c as Xn,f as qn}from"../chunks/Bl8llJFX.js";import{i as xe,s as Le,a as ke,p as Hn,b as st}from"../chunks/xy5RYZ2y.js";function Yn(e,t,n){for(var l=e.items,i=[],s=t.length,r=0;r<s;r++)xn(t[r].e,i,!0);var o=s>0&&i.length===0&&n!==null;if(o){var c=n.parentNode;An(c),c.append(n),l.clear(),Re(e,t[0].prev,t[s-1].next)}kn(i,()=>{for(var h=0;h<s;h++){var d=t[h];o||(l.delete(d.k),Re(e,d.prev,d.next)),Da(d.e,!o)}})}function Wn(e,t,n,l,i,s=null){var r=e,o={flags:t,items:new Map,first:null};{var c=e;r=pe?rt(Ue(c)):c.appendChild(Oa())}pe&&Tt();var h=null,d=!1,_=new Map,y=pn(()=>{var S=n();return Sn(S)?S:S==null?[]:za(S)}),m,f;function b(){Vn(f,m,o,_,r,i,t,l,n),s!==null&&(m.length===0?h?$a(h):h=Ot(()=>s(r)):h!==null&&_n(h,()=>{h=null}))}fn(()=>{f??=Pa,m=a(y);var S=m.length;if(d&&S===0)return;d=S===0;let C=!1;if(pe){var u=hn(r)===gn;u!==(S===0)&&(r=Jt(),rt(r),_t(!1),C=!0)}if(pe){for(var E=null,$,G=0;G<S;G++){if(Be.nodeType===Ga&&Be.data===mn){r=Be,C=!0,_t(!1);break}var M=m[G],w=l(M,G);$=zt(Be,o,E,null,M,w,G,i,t,n),o.items.set(w,$),E=$}S>0&&rt(Jt())}if(pe)S===0&&s&&(h=Ot(()=>s(r)));else if(yn()){var x=new Set,I=He;for(G=0;G<S;G+=1){M=m[G],w=l(M,G);var T=o.items.get(w)??_.get(w);T?Na(T,M,G):($=zt(null,o,null,null,M,w,G,i,t,n,!0),_.set(w,$)),x.add(w)}for(const[q,V]of o.items)x.has(q)||I.skipped_effects.add(V.e);I.add_callback(b)}else b();C&&_t(!0),a(y)}),pe&&(r=Be)}function Vn(e,t,n,l,i,s,r,o,c){var h=t.length,d=n.items,_=n.first,y=_,m,f=null,b=[],S=[],C,u,E,$;for($=0;$<h;$+=1){if(C=t[$],u=o(C,$),E=d.get(u),E===void 0){var G=l.get(u);if(G!==void 0){l.delete(u),d.set(u,G);var M=f?f.next:y;Re(n,f,G),Re(n,G,M),wt(G,M,i),f=G}else{var w=y?y.e.nodes_start:i;f=zt(w,n,f,f===null?n.first:f.next,C,u,$,s,r,c)}d.set(u,f),b=[],S=[],y=f.next;continue}if(Na(E,C,$),(E.e.f&Mt)!==0&&$a(E.e),E!==y){if(m!==void 0&&m.has(E)){if(b.length<S.length){var x=S[0],I;f=x.prev;var T=b[0],q=b[b.length-1];for(I=0;I<b.length;I+=1)wt(b[I],x,i);for(I=0;I<S.length;I+=1)m.delete(S[I]);Re(n,T.prev,q.next),Re(n,f,T),Re(n,q,x),y=x,f=q,$-=1,b=[],S=[]}else m.delete(E),wt(E,y,i),Re(n,E.prev,E.next),Re(n,E,f===null?n.first:f.next),Re(n,f,E),f=E;continue}for(b=[],S=[];y!==null&&y.k!==u;)(y.e.f&Mt)===0&&(m??=new Set).add(y),S.push(y),y=y.next;if(y===null)continue;E=y}b.push(E),f=E,y=E.next}if(y!==null||m!==void 0){for(var V=m===void 0?[]:za(m);y!==null;)(y.e.f&Mt)===0&&V.push(y),y=y.next;var R=V.length;if(R>0){var ie=h===0?i:null;Yn(n,V,ie)}}e.first=n.first&&n.first.e,e.last=f&&f.e;for(var N of l.values())Da(N.e);l.clear()}function Na(e,t,n,l){ea(e.v,t),ea(e.i,n)}function zt(e,t,n,l,i,s,r,o,c,h,d){var _=(c&Mn)!==0,y=(c&wn)===0,m=_?y?W(i,!1,!1):ta(i):i,f=(c&bn)===0?r:ta(r),b={i:f,v:m,k:s,a:null,e:null,prev:n,next:l};try{if(e===null){var S=document.createDocumentFragment();S.append(e=Oa())}return b.e=Ot(()=>o(e,m,f,h),pe),b.e.prev=n&&n.e,b.e.next=l&&l.e,n===null?d||(t.first=b):(n.next=b,n.e.next=b.e),l!==null&&(l.prev=b,l.e.prev=b.e),b}finally{}}function wt(e,t,n){for(var l=e.next?e.next.e.nodes_start:n,i=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==null&&s!==l;){var r=La(s);i.before(s),s=r}}function Re(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Un(e,t,n=!1,l=!1,i=!1){var s=e,r="";he(()=>{var o=Pa;if(r===(r=t()??"")){pe&&Tt();return}if(o.nodes_start!==null&&(In(o.nodes_start,o.nodes_end),o.nodes_start=o.nodes_end=null),r!==""){if(pe){Be.data;for(var c=Tt(),h=c;c!==null&&(c.nodeType!==Ga||c.data!=="");)h=c,c=La(c);if(c===null)throw Cn(),Rn;aa(Be,h),s=rt(c);return}var d=r+"";n?d=`<svg>${d}</svg>`:l&&(d=`<math>${d}</math>`);var _=En(d);if((n||l)&&(_=Ue(_)),aa(Ue(_),_.lastChild),n||l)for(;Ue(_);)s.before(Ue(_));else s.before(_)}})}const na=[...` 	
\r\fÂ \v\uFEFF`];function Kn(e,t,n){var l=e==null?"":""+e;if(n){for(var i in n)if(n[i])l=l?l+" "+i:i;else if(l.length)for(var s=i.length,r=0;(r=l.indexOf(i,r))>=0;){var o=r+s;(r===0||na.includes(l[r-1]))&&(o===l.length||na.includes(l[o]))?l=(r===0?"":l.substring(0,r))+l.substring(o+1):r=o}}return l===""?null:l}function Zn(e,t){return e==null?null:String(e)}function Ke(e,t,n,l,i,s){var r=e.__className;if(pe||r!==n||r===void 0){var o=Kn(n,l,s);(!pe||o!==e.getAttribute("class"))&&(o==null?e.removeAttribute("class"):e.className=o),e.__className=n}else if(s&&i!==s)for(var c in s){var h=!!s[c];(i==null||h!==!!i[c])&&e.classList.toggle(c,h)}return s}function lt(e,t,n,l){var i=e.__style;if(pe||i!==t){var s=Zn(t);(!pe||s!==e.getAttribute("style"))&&(s==null?e.removeAttribute("style"):e.style.cssText=s),e.__style=t}return l}const Qn=Symbol("is custom element"),jn=Symbol("is html");function K(e){if(pe){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var l=e.value;We(e,"value",null),e.value=l}if(e.hasAttribute("checked")){var i=e.checked;We(e,"checked",null),e.checked=i}}};e.__on_r=n,zn(n),Bn()}}function se(e,t){var n=Ft(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Ze(e,t){var n=Ft(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function We(e,t,n,l){var i=Ft(e);pe&&(i[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||i[t]!==(i[t]=n)&&(t==="loading"&&(e[$n]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Jn(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Ft(e){return e.__attributes??={[Qn]:e.nodeName.includes("-"),[jn]:e.namespaceURI===Tn}}var ia=new Map;function Jn(e){var t=ia.get(e.nodeName);if(t)return t;ia.set(e.nodeName,t=[]);for(var n,l=e,i=Element.prototype;i!==l;){n=Gn(l);for(var s in n)n[s].set&&t.push(s);l=On(l)}return t}function Je(e,t,n=t){var l=Dn(),i=new WeakSet;Ba(e,"input",s=>{var r=s?e.defaultValue:e.value;if(r=xt(e)?At(r):r,n(r),He!==null&&i.add(He),l&&r!==(r=t())){var o=e.selectionStart,c=e.selectionEnd;e.value=r??"",c!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(c,e.value.length))}}),(pe&&e.defaultValue!==e.value||A(t)==null&&e.value)&&(n(xt(e)?At(e.value):e.value),He!==null&&i.add(He)),Fa(()=>{var s=t();if(e===document.activeElement){var r=Ln??He;if(i.has(r))return}xt(e)&&s===At(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function ra(e,t,n=t){Ba(e,"change",l=>{var i=l?e.defaultChecked:e.checked;n(i)}),(pe&&e.defaultChecked!==e.checked||A(t)==null)&&n(e.checked),Fa(()=>{var l=t();e.checked=!!l})}function xt(e){var t=e.type;return t==="number"||t==="range"}function At(e){return e===""?null:+e}const Xa="zenZoneTimerSettings",Bt={workDuration:Math.max(1,25)*60,shortBreakDuration:Math.max(1,5)*60,longBreakDuration:Math.max(1,15)*60,sessionsBeforeLongBreak:Math.max(1,4),autoCycle:!1};function kt(e){const t={...Bt,...e};return t.workDuration=Math.max(1,Math.floor(t.workDuration/60))*60,t.shortBreakDuration=Math.max(1,Math.floor(t.shortBreakDuration/60))*60,t.longBreakDuration=Math.max(1,Math.floor(t.longBreakDuration/60))*60,t.sessionsBeforeLongBreak=Math.max(1,Math.floor(t.sessionsBeforeLongBreak)),t}function qa(){if(typeof window<"u"&&window.localStorage){const e=localStorage.getItem(Xa);if(e)try{const t=JSON.parse(e);if(t&&typeof t.workDuration=="number"&&typeof t.shortBreakDuration=="number"&&typeof t.longBreakDuration=="number"&&typeof t.sessionsBeforeLongBreak=="number"&&typeof t.autoCycle=="boolean")return kt(t);if(t)return console.warn("Partially invalid settings found in localStorage, attempting to sanitize."),kt(t)}catch(t){console.error("Error parsing timer settings from localStorage:",t)}}return kt(Bt)}const ei=qa(),ti={currentSession:"Work",timeRemaining:ei.workDuration,isRunning:!1,currentCycleCount:0},Ae=Lt(qa()),Se=Lt(ti);typeof window<"u"&&window.localStorage&&Ae.subscribe(e=>{try{localStorage.setItem(Xa,JSON.stringify(e))}catch(t){console.error("Error saving timer settings to localStorage:",t)}});const ai=Nn(Se,e=>{const t=Math.floor(e.timeRemaining/60),n=e.timeRemaining%60;return`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}`});let Me;function Ha(){const e=Ie(Se);if(e.isRunning&&e.timeRemaining>0)return;let t=e.timeRemaining;if(t<=0){const n=Ie(Ae);switch(e.currentSession){case"Work":t=n.workDuration;break;case"Short Break":t=n.shortBreakDuration;break;case"Long Break":t=n.longBreakDuration;break}}Se.update(n=>({...n,isRunning:!0,timeRemaining:t})),Me&&clearInterval(Me),Me=setInterval(()=>{const n=Ie(Se);n.isRunning&&n.timeRemaining>0?Se.update(l=>({...l,timeRemaining:l.timeRemaining-1})):n.isRunning&&n.timeRemaining<=0&&(Me&&clearInterval(Me),Me=void 0,ri())},1e3)}function ni(){Me&&(clearInterval(Me),Me=void 0),Se.update(e=>({...e,isRunning:!1}))}function ii(){Me&&(clearInterval(Me),Me=void 0),Se.update(e=>{let t,n,l=e.currentCycleCount,i=Bt;return Ae.subscribe(r=>{i=r})(),e.currentSession==="Work"?(l++,l>=i.sessionsBeforeLongBreak?(t="Long Break",n=i.longBreakDuration,l=0):(t="Short Break",n=i.shortBreakDuration)):(t="Work",n=i.workDuration),{...e,currentSession:t,timeRemaining:n,isRunning:!1,currentCycleCount:l}})}function Ya(e){Me&&(clearInterval(Me),Me=void 0);const t=Ie(Ae),n=e||Ie(Se).currentSession;let l=t.workDuration,i=Ie(Se).currentCycleCount;switch(n){case"Work":l=t.workDuration,e==="Work"&&(i=0);break;case"Short Break":l=t.shortBreakDuration;break;case"Long Break":l=t.longBreakDuration;break}Se.update(s=>({...s,currentSession:n,timeRemaining:l,isRunning:!1,currentCycleCount:i}))}function sa(e){Se.update(t=>{if(t.isRunning)return t;const n=Math.max(60,e);return Ae.update(l=>{const i={...l};switch(t.currentSession){case"Work":i.workDuration=n;break;case"Short Break":i.shortBreakDuration=n;break;case"Long Break":i.longBreakDuration=n;break}return i}),{...t,timeRemaining:n}})}function ri(){const e=Ie(Se),t=Ie(Ae);let n,l=e.currentCycleCount;e.currentSession==="Work"?(l++,l>=t.sessionsBeforeLongBreak?(n="Long Break",l=0):n="Short Break"):n="Work",Se.update(i=>({...i,currentSession:n,isRunning:!1,currentCycleCount:l})),Ya(n),t.autoCycle&&Ha()}var si=oe('<div class="mx-2 flex scale-75 flex-col items-center justify-center opacity-60 transition-opacity hover:opacity-100"><button title="Increase minutes" aria-label="Increase minutes" class="p-1 text-gray-300 hover:text-teal-300 disabled:opacity-30"><svg class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg></button> <button title="Decrease minutes" aria-label="Decrease minutes" class="p-1 text-gray-300 hover:text-teal-300 disabled:opacity-30"><svg class="h-8 w-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div>'),li=oe('<div class="mt-2 mb-8 text-center"><p class="mb-2 text-xl font-semibold text-teal-400" id="current-session-label"> </p> <div class="relative flex items-center justify-center font-mono text-8xl tracking-tighter text-gray-100 tabular-nums select-none svelte-1sjqirj" aria-live="polite" aria-atomic="true"><!> <span class="w-32 text-center"> </span> <span class="w-8 text-center">:</span> <span class="w-32 text-center"> </span></div> <div class="mt-6 h-2.5 w-full overflow-hidden rounded-full bg-slate-700 shadow-inner"><div class="h-2.5 rounded-full bg-teal-500 transition-all duration-1000 ease-linear" aria-valuemin="0" aria-valuemax="100" aria-labelledby="current-session-label" role="progressbar"></div></div></div>');function oi(e,t){Te(t,!1);const[n,l]=Le(),i=()=>ke(Se,"$timerState",n),s=()=>ke(Ae,"$timerSettings",n),r=()=>ke(ai,"$formattedTime",n),o=W(),c=W();let h=W(0);function d(){if(i().isRunning)return;const x=Math.floor(i().timeRemaining/60),I=i().timeRemaining%60,T=(x+1)*60+I;sa(T)}function _(){if(i().isRunning)return;const x=Math.floor(i().timeRemaining/60),I=i().timeRemaining%60,T=Math.max(0,x-1)*60+I;sa(T)}we(()=>(i(),s()),()=>{const x=i(),I=s();let T=I.workDuration;x.currentSession==="Short Break"?T=I.shortBreakDuration:x.currentSession==="Long Break"&&(T=I.longBreakDuration),T=Math.max(1,T),T>0?L(h,Math.max(0,100-x.timeRemaining/T*100)):L(h,x.timeRemaining>0?0:100)}),we(()=>r(),()=>{L(o,r().substring(0,2))}),we(()=>r(),()=>{L(c,r().substring(3,5))}),ze(),Ee();var y=li(),m=p(y),f=p(m,!0);v(m);var b=g(m,2),S=p(b);{var C=x=>{var I=si(),T=p(I),q=g(T,2);v(I),he(()=>{T.disabled=(i(),A(()=>i().isRunning)),q.disabled=(i(),A(()=>i().isRunning||i().timeRemaining<120&&i().timeRemaining%60===0&&i().timeRemaining/60<=1||i().timeRemaining<60))}),F("click",T,d),F("click",q,_),le(x,I)};xe(S,x=>{i(),A(()=>!i().isRunning)&&x(C)})}var u=g(S,2),E=p(u,!0);v(u);var $=g(u,4),G=p($,!0);v($),v(b);var M=g(b,2),w=p(M);v(M),v(y),he(()=>{Q(f,(i(),A(()=>i().currentSession))),Q(E,a(o)),Q(G,a(c)),lt(w,`width: ${a(h)??""}%;`),We(w,"aria-valuenow",a(h))}),le(e,y),Oe(),l()}var ci=oe(`<button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
             text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-teal-300
             focus:ring-2 focus:ring-teal-400
             focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50"> </button>`),di=oe(`<button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
             text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-amber-300
             focus:ring-2 focus:ring-amber-300
             focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50" aria-label="Pause timer">Pause</button>`),ui=oe(`<div class="mt-6 flex justify-center space-x-2"><!> <button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
           text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-sky-300
           focus:ring-2 focus:ring-sky-400
           focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50" aria-label="Skip to next session" title="Skip to next session">Skip <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="ml-1 inline h-5 w-5 align-text-bottom"><path fill-rule="evenodd" d="M2 10a.75.75 0 0 1 .75-.75h12.59l-2.1-1.95a.75.75 0 1 1 1.02-1.1l3.5 3.25a.75.75 0 0 1 0 1.1l-3.5 3.25a.75.75 0 1 1-1.02-1.1l2.1-1.95H2.75A.75.75 0 0 1 2 10Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M18 10a.75.75 0 0 1-.75.75h-.008a.75.75 0 0 1 0-1.5h.008A.75.75 0 0 1 18 10Z" clip-rule="evenodd"></path></svg></button> <button class="rounded-md border border-slate-400/30 bg-white/10 px-6 py-3 text-base font-semibold
           text-slate-200 transition-all duration-150 ease-in-out hover:bg-white/20 hover:text-rose-300
           focus:ring-2 focus:ring-rose-400
           focus:ring-offset-2 focus:ring-offset-slate-900/50 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50" aria-label="Reset current session timer" title="Reset current session">Reset <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="ml-1 inline h-5 w-5 align-text-bottom"><path fill-rule="evenodd" d="M15.323 3.407a.75.75 0 0 1 0 1.06l-2.096 2.096A6.5 6.5 0 0 1 10 16.5a6.501 6.501 0 0 1-6.414-5.523.75.75 0 0 1 1.482-.236A5.001 5.001 0 0 0 10 15a5 5 0 0 0 4.19-2.402l-1.618 1.617a.75.75 0 1 1-1.06 1.061l3.25-3.25a.75.75 0 0 1 0-1.06l-3.25-3.25a.75.75 0 0 1-1.06 0Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M4.677 12.593a.75.75 0 0 1 0-1.06l2.096-2.096A6.5 6.5 0 0 1 10 3.5a6.501 6.501 0 0 1 6.414 5.523.75.75 0 0 1-1.482.236A5.001 5.001 0 0 0 10 5a5 5 0 0 0-4.19 2.402l1.618-1.617a.75.75 0 1 1 1.06-1.061L5.238 8.075a.75.75 0 0 1 0 1.06l3.25 3.25a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd"></path></svg></button></div>`);function vi(e,t){Te(t,!1);const[n,l]=Le(),i=()=>ke(Se,"$timerState",n),s=()=>ke(Ae,"$timerSettings",n);let r=W();we(()=>(i(),s()),()=>{const m=i(),f=s();L(r,!m.timeRemaining||m.currentSession==="Work"&&m.timeRemaining===f.workDuration||m.currentSession==="Short Break"&&m.timeRemaining===f.shortBreakDuration||m.currentSession==="Long Break"&&m.timeRemaining===f.longBreakDuration)}),ze(),Ee();var o=ui(),c=p(o);{var h=m=>{var f=ci(),b=p(f,!0);v(f),he(()=>{We(f,"aria-label",a(r)?"Start timer":"Resume timer"),Q(b,a(r)?"Start":"Resume")}),F("click",f,function(...S){Ha?.apply(this,S)}),le(m,f)},d=m=>{var f=di();F("click",f,function(...b){ni?.apply(this,b)}),le(m,f)};xe(c,m=>{i(),A(()=>!i().isRunning)?m(h):m(d,!1)})}var _=g(c,2),y=g(_,2);v(o),he(()=>{_.disabled=(i(),A(()=>i().isRunning)),y.disabled=(i(),a(r),A(()=>i().isRunning&&a(r)))}),F("click",_,function(...m){ii?.apply(this,m)}),F("click",y,()=>Ya()),le(e,o),Oe(),l()}const Fe={sunGlow:{enabled:!0,intensity:.7,size:150,blur:60,pulseSpeed:.002,glintIntensity:.6,glintQuantity:1}},De={ripples:{enabled:!0,mouseMove:{maxRadius:50,speed:.35},ambient:{interval:2e3}},shimmer:{enabled:!0,waveSpots:3,maxOpacity:.3,maxSpeedFactor:.5}},ye={waterGrains:{enabled:!0,count:600,minSpeed:.05,maxSpeed:.25,minSize:.5,maxSize:1.25,minOpacity:.25,maxOpacity:.55,lightness:85},foamStreaks:{enabled:!0,chancePerFrame:.55,streak:{lifespanMin:500,lifespanMax:1e3,mainPathSegmentsMin:25,mainPathSegmentsMax:100,branchChance:.25}}},et={color1:"hsl(210, 70%, 50%)",color2:"hsl(200, 68%, 50%)"},la=20,Ce={gradientColor1:et.color1,gradientColor2:et.color2,isFloatingEnabled:!0,gradientColor1History:[et.color1],gradientColor1HistoryIndex:0,gradientColor2History:[et.color2],gradientColor2HistoryIndex:0,isAutoCyclingColor1:!1,isAutoCyclingColor2:!1,sunGlowEnabled:Fe.sunGlow.enabled,sunGlowIntensity:Fe.sunGlow.intensity,sunGlowSize:Fe.sunGlow.size,sunGlowBlur:Fe.sunGlow.blur,sunGlowPulseSpeed:Fe.sunGlow.pulseSpeed,sunGlintIntensity:Fe.sunGlow.glintIntensity,sunGlintQuantity:Fe.sunGlow.glintQuantity,ripplesEnabled:De.ripples.enabled,rippleSize:De.ripples.mouseMove.maxRadius,rippleSpeed:De.ripples.mouseMove.speed,rippleFrequency:De.ripples.ambient.interval,shimmerEnabled:De.shimmer.enabled,shimmerIntensity:De.shimmer.maxOpacity,shimmerSpeed:De.shimmer.maxSpeedFactor,shimmerCount:De.shimmer.waveSpots,waterGrainsEnabled:ye.waterGrains.enabled,grainDensity:ye.waterGrains.count,grainSpeed:(ye.waterGrains.minSpeed+ye.waterGrains.maxSpeed)/2,grainSize:(ye.waterGrains.minSize+ye.waterGrains.maxSize)/2,grainOpacity:(ye.waterGrains.minOpacity+ye.waterGrains.maxOpacity)/2,grainLightness:ye.waterGrains.lightness,foamEnabled:ye.foamStreaks.enabled,foamFrequency:ye.foamStreaks.chancePerFrame,foamLifetime:(ye.foamStreaks.streak.lifespanMin+ye.foamStreaks.streak.lifespanMax)/2,foamComplexity:(ye.foamStreaks.streak.mainPathSegmentsMin+ye.foamStreaks.streak.mainPathSegmentsMax)/2,foamBranchiness:ye.foamStreaks.streak.branchChance,foamOpacity:.7};function Wa(e){if(!e)return null;const t=e.match(/hsl\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)/);return t?{h:parseInt(t[1]),s:parseInt(t[2]),l:parseInt(t[3])}:null}function oa(){const e=Ie(ce);return Wa(e.gradientColor1)||{h:210,s:70,l:50}}function ca(){const e=Ie(ce);return Wa(e.gradientColor2)||{h:200,s:68,l:50}}function fi(){let e={...Ce,gradientColor1History:[...Ce.gradientColor1History],gradientColor2History:[...Ce.gradientColor2History]};if(typeof localStorage<"u"){const t=localStorage.getItem("backgroundSettings");if(t)try{const n=JSON.parse(t);e={...e,...n,isAutoCyclingColor1:n.isAutoCyclingColor1??Ce.isAutoCyclingColor1,isAutoCyclingColor2:n.isAutoCyclingColor2??Ce.isAutoCyclingColor2},!n.gradientColor1History||n.gradientColor1History.length===0?(e.gradientColor1History=[e.gradientColor1],e.gradientColor1HistoryIndex=0):(e.gradientColor1HistoryIndex=Math.max(0,Math.min(n.gradientColor1HistoryIndex??0,n.gradientColor1History.length-1)),e.gradientColor1=n.gradientColor1History[e.gradientColor1HistoryIndex]),!n.gradientColor2History||n.gradientColor2History.length===0?(e.gradientColor2History=[e.gradientColor2],e.gradientColor2HistoryIndex=0):(e.gradientColor2HistoryIndex=Math.max(0,Math.min(n.gradientColor2HistoryIndex??0,n.gradientColor2History.length-1)),e.gradientColor2=n.gradientColor2History[e.gradientColor2HistoryIndex])}catch(n){return console.error("Failed to parse background settings from localStorage",n),{...Ce,gradientColor1History:[...Ce.gradientColor1History],gradientColor2History:[...Ce.gradientColor2History]}}}return e}const pi=fi(),ce=Lt(pi);typeof localStorage<"u"&&ce.subscribe(e=>{localStorage.setItem("backgroundSettings",JSON.stringify(e))});function Va(e,t,n){let l=[...t];n<l.length-1&&(l=l.slice(0,n+1)),l.push(e),l.length>la&&(l=l.slice(l.length-la));const i=l.length-1;return{history:l,index:i}}function da(e,t,n){let l;typeof e=="string"?l=e:l=`hsl(${Math.round(e)}, ${Math.round(t)}%, ${Math.round(n)}%)`;const i=Ie(ce);if(i.gradientColor1===l)return;const{history:s,index:r}=Va(l,i.gradientColor1History,i.gradientColor1HistoryIndex);ce.update(o=>({...o,gradientColor1:l,gradientColor1History:s,gradientColor1HistoryIndex:r}))}function ua(e,t,n){let l;typeof e=="string"?l=e:l=`hsl(${Math.round(e)}, ${Math.round(t)}%, ${Math.round(n)}%)`;const i=Ie(ce);if(i.gradientColor2===l)return;const{history:s,index:r}=Va(l,i.gradientColor2History,i.gradientColor2HistoryIndex);ce.update(o=>({...o,gradientColor2:l,gradientColor2History:s,gradientColor2HistoryIndex:r}))}function hi(){ce.set({...Ce,gradientColor1History:[...Ce.gradientColor1History],gradientColor2History:[...Ce.gradientColor2History]})}const gi={mouseMove:{maxRadius:50,speed:.35,lineWidth:1,initialOpacity:.35,color:"rgb(100, 180, 255)",decayRate:.005},click:{maxRadius:85,speed:.9,lineWidth:2.2,initialOpacity:.95,color:"rgb(190, 230, 255)",decayRate:.008},ambient:{maxRadius:30,speed:.2,lineWidth:1,initialOpacity:.15,color:"rgb(150, 200, 255)",decayRate:.008},longPress:{maxRadius:150,speed:.3,lineWidth:3.5,initialOpacity:.85,color:"rgb(70, 140, 220)",decayRate:.006},glintExpire:{maxRadius:40,speed:.9,lineWidth:1,initialOpacity:.6,color:"rgba(255, 255, 230, 0.7)",decayRate:.02}},mi=2e3,Ua=128,yi=30,Si=400,bi=10,va=.0011,_i=.003,Ka=3e3,It=2,Mi=15,wi="rgba(255, 255, 234, 0.95)",Za=4,xi=1e3,fa=3,pa=.15,Ai=.3,ha=.2,ki=.5,ga=45,Ii=60,ot=.6,ct=.6,ma=1,Ci=2.25,Ri=600,Ei=.05,Ti=.25,Oi=.5,Gi=1.25,zi=.25,$i=.55,Di=6e4,Li=5e3,qe=[{x1:0,y1:0,x2:1,y2:1},{x1:.5,y1:0,x2:.5,y2:1},{x1:1,y1:0,x2:0,y2:1},{x1:1,y1:.5,x2:0,y2:.5},{x1:1,y1:1,x2:0,y2:0},{x1:.5,y1:1,x2:.5,y2:0},{x1:0,y1:1,x2:1,y2:0},{x1:0,y1:.5,x2:1,y2:.5}],Qa=25e3,Pi=.55,Fi="rgba(235, 245, 255, 0.7)",Bi="rgba(210, 230, 245, 0.5)",ya=.5,Ni=1.5,Ne=15,Sa=5,Xi=12,ba=500,qi=1e3,Hi=.2,tt=.02,Ct=.12,_a=.005,Rt=.05,Ma=.02,Yi=.3,Et=Math.PI/4,Wi=25,Vi=100,Ui=.25,wa=10,Ki=Math.PI/3,Zi=2,xa=30,Qi=70,ji=.25,$t={plane:{minSpeed:.25,maxSpeed:.5,minSize:25,maxSize:45,baseOpacity:.4,minDuration:1e4,maxDuration:2e4,chancePerInterval:.01},whaleShadow:{minSpeed:.18,maxSpeed:.32,minSize:40,maxSize:70,baseOpacity:.5,minDuration:1200,maxDuration:2500,chancePerInterval:.09}};function Ji(e){const t=Math.max(0,Math.min(1,e));return t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2}const at=15,nt=.04;function er(e,t,n){const l=(e*nt+t*nt*.3+n*.8)*Math.PI*2,i=(e*nt*.7-t*nt+n*.5)*Math.PI*2,s=Math.sin(l)*at*.6+Math.sin(i)*at*.4,r=Math.cos(l)*at*.4+Math.cos(i)*at*.6;return{dx:s,dy:r}}let Aa=0,ka=0,tr=0,Ia=0,Ca=0,ar=0,Ra=0;const dt=[],ut=[],ja=[],vt=[],ft=[],Ja=[],pt=[],en=[],tn=[],an=[],nn=[],rn=[],sn=[],nr=()=>dt,gt=()=>ut,mt=()=>ja,Nt=()=>vt,Xt=()=>ft,Qe=()=>Ja,ht=()=>pt;function ir(e){let t=en.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.maxRadius=e.maxRadius,t.opacity=e.opacity,t.speed=e.speed,t.lineWidth=e.lineWidth,t.color=e.color,t.isAmbient=e.isAmbient,t.decayRate=e.decayRate,t.id=Aa++):t={...e,id:Aa++},dt.push(t)}function rr(e){let t=rn.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.currentMaxRadius=e.currentMaxRadius,t.opacity=e.opacity,t.growthSpeed=e.growthSpeed,t.opacitySpeed=e.opacitySpeed,t.color=e.color,t.vx=e.vx,t.vy=e.vy,t.isWave=e.isWave,t.relativeXInSpawn=e.relativeXInSpawn,t.relativeYInSpawn=e.relativeYInSpawn,t.baseVx=e.baseVx,t.baseVy=e.baseVy,t.id=ka++):t={...e,id:ka++},ut.push(t)}const sr=e=>{ja.push({...e,id:tr++})};function lr(e){let t=tn.pop();t?(t.x=e.x,t.y=e.y,t.radius=e.radius,t.opacity=e.opacity,t.decay=e.decay,t.color=e.color,t.id=Ia++):t={...e,id:Ia++},vt.push(t)}function or(e){let t=an.pop();t?(t.type=e.type,t.x=e.x,t.y=e.y,t.vx=e.vx,t.vy=e.vy,t.size=e.size,t.opacity=e.opacity,t.age=0,t.maxAge=e.maxAge,e.type==="whaleShadow"?(t.bodyAngle=e.bodyAngle??0,t.bodyAngleSpeed=e.bodyAngleSpeed,t.bodyAngleAmplitude=e.bodyAngleAmplitude,t.tailAngleOffset=e.tailAngleOffset??0,t.tailOscillationSpeed=e.tailOscillationSpeed,t.tailOscillationAmplitude=e.tailOscillationAmplitude):(delete t.bodyAngle,delete t.bodyAngleSpeed,delete t.bodyAngleAmplitude,delete t.tailAngleOffset,delete t.tailOscillationSpeed,delete t.tailOscillationAmplitude),t.id=Ca++):t={...e,age:0,id:Ca++},ft.push(t)}const ln=e=>{Ja.push({...e,id:ar++})};function cr(e){let t=nn.pop();t?(t.anchorX=e.anchorX,t.anchorY=e.anchorY,t.particles=[],t.vx=e.vx,t.vy=e.vy,t.opacity=0,t.age=0,t.maxAge=e.maxAge,t.color=e.color,t.id=Ra++):t={...e,particles:[],opacity:0,age:0,id:Ra++},pt.push(t)}function dr(e,t){let n=sn.pop();n?(n.x=t.x,n.y=t.y,n.size=t.size,n.opacity=0,n.initialRelativeX=t.initialRelativeX,n.initialRelativeY=t.initialRelativeY,n.appearAtAge=t.appearAtAge,n.maxOpacity=t.maxOpacity,n.particleAge=0,n.particleMaxAge=t.particleMaxAge):n={...t,opacity:0,particleAge:0},e.particles.push(n)}function ur(e){const t=dt.findIndex(n=>n.id===e.id);if(t!==-1){const n=dt.splice(t,1)[0];n&&en.push(n)}else console.warn(`Attempted to release ripple with ID ${e.id} not found in active list.`)}function vr(){if(ut.length>0){const e=ut.shift();if(e)return rn.push(e),e}return null}function fr(e){const t=vt.findIndex(n=>n.id===e.id);if(t!==-1){const n=vt.splice(t,1)[0];n&&tn.push(n)}else console.warn(`Attempted to release sunGlint with ID ${e.id} not found in active list.`)}function pr(e){const t=ft.findIndex(n=>n.id===e.id);if(t!==-1){const n=ft.splice(t,1)[0];n&&an.push(n)}else console.warn(`Attempted to release rareSighting with ID ${e.id} not found in active list.`)}function on(e){sn.push(e)}function Dt(e){const t=pt.findIndex(n=>n.id===e.id);if(t!==-1){const n=pt.splice(t,1)[0];if(n){for(const l of n.particles)on(l);n.particles=[],nn.push(n)}}else console.warn(`Attempted to release foamStreak with ID ${e.id} not found in active list.`)}function it(e,t,n,l){const i=gi[n];if(!i)throw console.error(`Unknown ripple type: ${n}. Ensure it is defined in RIPPLE_CONFIG.`),new Error(`Unknown ripple type: ${n}`);let s=i.speed,r=i.maxRadius;n==="mouseMove"&&l&&(s=l.rippleSpeed||i.speed,r=l.rippleSize||i.maxRadius);let o=s,c=r;(n==="mouseMove"||n==="click")&&(o=s*(.9+Math.random()*.2),c=r*(.9+Math.random()*.2)),ir({x:e,y:t,radius:0,maxRadius:c,opacity:i.initialOpacity,speed:o,lineWidth:i.lineWidth,color:i.color,isAmbient:n==="ambient",decayRate:i.decayRate})}function hr(e){const t=e.globalAlpha,n=nr();for(let l=n.length-1;l>=0;l--){const i=n[l];if(i.radius+=i.speed,i.opacity-=i.decayRate,i.opacity<=0||i.radius>=i.maxRadius){ur(i);continue}e.beginPath(),e.arc(i.x,i.y,i.radius,0,Math.PI*2),e.lineWidth=i.lineWidth,e.strokeStyle=i.color,e.globalAlpha=Math.max(0,i.opacity),e.stroke()}e.globalAlpha=t}function Ea(e,t,n){gt().length>=Ua&&vr();let l,i,s,r,o,c,h,d=1;const _=e*(1-ot)/2,y=e*ot,m=t*(1-ct)/2,f=t*ct,b=_+Math.random()*y,S=m+Math.random()*f;n?(l=Math.min(e,t)/2*(.8+Math.random()*.4),d=ha+Math.random()*(ki-ha),i=(Math.random()-.5)*.2*d,s=(Math.random()-.5)*.2*d,r=pa+Math.random()*(Ai-pa),o=(Math.random()*.015+.005)*(Math.random()<.5?1:-1)*d,c=(Math.random()*15e-5+5e-5)*(Math.random()<.5?1:-1)*d,h=`hsl(210, ${68+Math.random()*10}%, ${ga+Math.random()*(Ii-ga)}%)`):(l=Math.random()*80+40,i=(Math.random()-.5)*.12,s=(Math.random()-.5)*.12,r=Math.random()*.03+.01,o=(Math.random()*.02+.01)*(Math.random()<.5?1:-1),c=(Math.random()*2e-4+1e-4)*(Math.random()<.5?1:-1),h=`hsl(${200+Math.random()*20}, ${65+Math.random()*20}%, ${35+Math.random()*30}%)`),rr({x:b,y:S,radius:Math.random()*l*.3+l*.2,currentMaxRadius:l,opacity:r,growthSpeed:o,opacitySpeed:c,color:h,vx:i,vy:s,isWave:n,relativeXInSpawn:y>0?(b-_)/y:.5,relativeYInSpawn:f>0?(S-m)/f:.5,baseVx:i,baseVy:s})}function gr(e,t,n,l){const i=gt();if(i.length===0)return;const s=e.globalCompositeOperation;e.globalCompositeOperation="screen";for(let r=i.length-1;r>=0;r--){const o=i[r];o.x+=o.vx,o.y+=o.vy,o.radius+=o.growthSpeed,o.opacity+=o.opacitySpeed,(o.opacity>.06||o.opacity<.005)&&(o.opacitySpeed*=-1,o.opacity=Math.max(.005,Math.min(.06,o.opacity))),(o.radius>o.currentMaxRadius||o.radius<o.currentMaxRadius*.2)&&(o.growthSpeed*=-1,o.radius=Math.max(10,Math.min(o.currentMaxRadius,o.radius))),(o.x-o.radius<0||o.x+o.radius>t)&&(o.vx*=-1,o.x=Math.max(o.radius,Math.min(t-o.radius,o.x))),(o.y-o.radius<0||o.y+o.radius>n)&&(o.vy*=-1,o.y=Math.max(o.radius,Math.min(n-o.radius,o.y)));const c=er(o.x,o.y,l),h=o.x+c.dx,d=o.y+c.dy,_=e.createRadialGradient(h,d,0,h,d,o.radius),y=o.color.substring(0,o.color.lastIndexOf(")"));_.addColorStop(0,`${y}, ${o.opacity})`),_.addColorStop(.7,`${y}, ${o.opacity*.5})`),_.addColorStop(1,`${y}, 0)`),e.fillStyle=_,e.beginPath(),e.arc(h,d,o.radius,0,Math.PI*2),e.fill()}e.globalCompositeOperation=s}function mr(e,t){const n=gt();if(n.length===0)return;const l=e*(1-ot)/2,i=e*ot,s=t*(1-ct)/2,r=t*ct,o=l+i/2,c=s+r/2,h=Math.sqrt(Math.pow(i/2,2)+Math.pow(r/2,2))+.001;for(const d of n){const _=d.relativeXInSpawn!==void 0?d.relativeXInSpawn:Math.random(),y=d.relativeYInSpawn!==void 0?d.relativeYInSpawn:Math.random();if(d.x=l+_*i,d.y=s+y*r,d.baseVx!==void 0&&d.baseVy!==void 0){const m=Math.sqrt(Math.pow(d.x-o,2)+Math.pow(d.y-c,2)),f=Math.min(1,m/h),b=ma+f*(Ci-ma);d.vx=d.baseVx*b,d.vy=d.baseVy*b}if(d.isWave){const m=Math.min(e,t)/2*(.8+Math.random()*.4);d.currentMaxRadius=m,d.radius=Math.random()*m*.3+m*.2}}}const Ta=[[0,0],[0,1],[0,2],[1,0],[1,1],[1,1],[1,1],[1,1],[1,1],[1,1],[1,2],[2,0],[2,1],[2,2]];function cn(e,t){const n=Ta[Math.floor(Math.random()*Ta.length)],l=n[0],i=n[1],s=e/3,r=t/3,o=i*s+Math.random()*s,c=l*r+Math.random()*r;return{x:o,y:c}}function yr(e,t,n){if(Nt().length>=Ka)return;const l=Math.random()*Math.PI*2,i=Math.random()*n*.5;lr({x:e+Math.cos(l)*i,y:t+Math.sin(l)*i,radius:Math.random()*.6+.4,opacity:Math.random()*.3+.7,decay:Math.random()*.008+.002,color:wi})}function Sr(e,t){if(mt().length>0)return;const n=Math.min(e,t),{x:l,y:i}=cn(e,t);sr({x:l,y:i,baseRadius:n*.45,radiusAmplitude:n*.12,currentRadius:n*.45,baseOpacity:.35,opacityAmplitude:.3,currentOpacity:.35,pulseAngle:Math.random()*Math.PI*2,pulseSpeed:va+Math.random()*(_i-va),vx:0,vy:0,relativeX:l/e,relativeY:i/t})}function br(e){const t=Nt();if(t.length===0)return;const n=e.globalAlpha;for(let l=t.length-1;l>=0;l--){const i=t[l];i.x+=(Math.random()-.5)*.5,i.y+=(Math.random()-.5)*.5,i.opacity-=i.decay,i.radius+=.005,i.opacity<=0?fr(i):(e.beginPath(),e.arc(i.x,i.y,i.radius,0,Math.PI*2),e.fillStyle=i.color,e.globalAlpha=Math.max(0,i.opacity),e.fill())}e.globalAlpha=n}function _r(e,t){const n=mt();if(n.length===0)return;const l=e.globalCompositeOperation;e.globalCompositeOperation="lighter";const i=e.globalAlpha;for(let s=0;s<n.length;s++){const r=n[s],o=t?.sunGlowPulseSpeed||r.pulseSpeed;r.pulseAngle+=o;const c=t?.sunGlowSize||150,h=c*.8,d=c*.2;r.currentRadius=h+Math.sin(r.pulseAngle)*d;const _=t?.sunGlowIntensity||.7,y=_*.5,m=_*.3;r.currentOpacity=y+(Math.sin(r.pulseAngle*.7+Math.PI/3)*.5+.5)*m,r.currentOpacity=Math.max(0,Math.min(1,r.currentOpacity));const f=r.baseOpacity+r.opacityAmplitude,b=f>0?Math.max(0,r.currentOpacity/f):0,S=f>0?r.baseOpacity/f:0;let C=0;if(b>0){const w=t?.sunGlintIntensity||1;if(b<=S){const x=S>0?b/S:0;C=Math.round(x*It*w)}else{const x=1-S,I=x>0?(b-S)/x:1;C=Math.round((It+I*(Mi-It))*w)}}C=Math.max(0,C);const u=t?.sunGlintQuantity||1,E=Math.round(C*u);for(let w=0;w<E&&(yr(r.x,r.y,r.currentRadius),!(Nt().length>=Ka));w++);const $=t?.sunGlowBlur||60,G=e.filter;e.filter=`blur(${$}px)`;const M=e.createRadialGradient(r.x,r.y,0,r.x,r.y,r.currentRadius);M.addColorStop(0,`rgba(255, 250, 220, ${r.currentOpacity})`),M.addColorStop(.25,`rgba(255, 235, 180, ${r.currentOpacity*.8})`),M.addColorStop(.6,`rgba(255, 220, 150, ${r.currentOpacity*.4})`),M.addColorStop(1,"rgba(255, 210, 130, 0)"),e.fillStyle=M,e.globalAlpha=1,e.beginPath(),e.arc(r.x,r.y,r.currentRadius,0,Math.PI*2),e.fill(),e.filter=G}e.globalCompositeOperation=l,e.globalAlpha=i}function Mr(e,t){const n=mt();if(n.length===0)return;const l=Math.min(e,t);for(const i of n){if(i.relativeX!==void 0&&i.relativeY!==void 0)i.x=i.relativeX*e,i.y=i.relativeY*t;else{console.warn("SunGlow missing relative coordinates during resize. Recalculating position.");const{x:s,y:r}=cn(e,t);i.x=s,i.y=r,i.relativeX=s/e,i.relativeY=r/t}i.baseRadius=l*.45,i.radiusAmplitude=l*.12}}function wr(e,t){e.fillRect(t.x-t.size/2,t.y-t.size/8,t.size,t.size/4),e.fillRect(t.x-t.size/6,t.y-t.size/3,t.size/3,t.size*.8)}function xr(e,t){t.bodyAngleSpeed&&t.bodyAngleAmplitude&&(t.bodyAngle=Math.sin(t.age*t.bodyAngleSpeed)*t.bodyAngleAmplitude),t.tailOscillationSpeed&&t.tailOscillationAmplitude&&(t.tailAngleOffset=Math.sin(t.age*t.tailOscillationSpeed)*t.tailOscillationAmplitude);const i=t.size*(1+Math.sin(t.age*.02)*.05),s=i/3.5,r=s*.9,o=i*.3;e.save(),e.translate(t.x,t.y),e.rotate(t.bodyAngle||0),e.beginPath(),e.ellipse(0,0,i/2,s/2,0,0,Math.PI*2),e.fill();const c=-i/2*.85,h=0;e.save(),e.translate(c,h),e.rotate(t.tailAngleOffset||0),e.beginPath(),e.ellipse(0,0,o/2,r/2,0,0,Math.PI*2),e.fill(),e.restore(),e.restore()}function Ar(e,t,n){if(Xt().length>=Za)return;const l=n,i=$t[l];if(!i){console.warn(`Configuration not found for rare sighting type: ${l}`);return}let s,r,o,c;const h=i.minSpeed+Math.random()*(i.maxSpeed-i.minSpeed);switch(l){case"plane":s=Math.random()<.5?-i.maxSize:e+i.maxSize,r=Math.random()*t*.3,o=(s<0?1:-1)*h,c=(Math.random()-.5)*h*.3;break;case"whaleShadow":s=Math.random()<.5?-i.maxSize*1.5:e+i.maxSize*1.5,r=t*(.5+Math.random()*.4),o=(s<0?1:-1)*h,c=(Math.random()-.5)*h*.1;break;default:console.warn(`Unhandled rare sighting type for creation: ${l}`);return}const d={type:l,x:s,y:r,vx:o,vy:c,size:i.minSize+Math.random()*(i.maxSize-i.minSize),opacity:i.baseOpacity,age:0,maxAge:i.minDuration+Math.random()*(i.maxDuration-i.minDuration),...l==="whaleShadow"?{bodyAngle:0,bodyAngleSpeed:(Math.random()*.003+.002)*(Math.random()<.5?1:-1),bodyAngleAmplitude:Math.PI/36,tailAngleOffset:0,tailOscillationSpeed:Math.random()*.04+.03,tailOscillationAmplitude:Math.PI/10}:{}};or(d)}function kr(e,t,n){const l=Xt();if(l.length===0)return;const i=e.globalAlpha;for(let s=l.length-1;s>=0;s--){const r=l[s];r.age++,r.x+=r.vx,r.y+=r.vy;const o=r.size*2,c=r.age>r.maxAge,h=r.x<-o||r.x>t+o||r.y<-o||r.y>n+o;if(c||h){pr(r);continue}let d=r.opacity;const _=.8;if(r.age/r.maxAge>_){const y=(r.age/r.maxAge-_)/(1-_);d=r.opacity*(1-y)}switch(d=Math.max(0,d),e.globalAlpha=d,e.fillStyle=`rgba(10, 10, 20, ${d*.7})`,r.type){case"plane":wr(e,r);break;case"whaleShadow":xr(e,r);break;default:console.warn(`No drawing function implemented for rare sighting type: ${r.type}`)}}e.globalAlpha=i}function Ir(e,t,n){if(Qe().length>0){console.warn("Attempted to re-initialize water grains. Skipping.");return}const l=n?.grainDensity||Ri,i=n?n.grainSpeed*.5:Ei,s=n?n.grainSpeed*1.5:Ti,r=n?n.grainSize*.7:Oi,o=n?n.grainSize*1.3:Gi,c=n?n.grainOpacity*.5:zi,h=n?n.grainOpacity*1.5:$i;for(let d=0;d<l;d++){const _=i+Math.random()*(s-i),y=Math.random()*Math.PI*2,f=(n?.grainLightness||85)+Math.random()*10-5,b=Math.random()*e,S=Math.random()*t;ln({x:b,y:S,vx:Math.cos(y)*_,vy:Math.sin(y)*_,size:r+Math.random()*(o-r),opacity:c+Math.random()*(h-c),color:`hsl(210, ${65+Math.random()*10}%, ${f}%)`,relativeX:e>0?b/e:.5,relativeY:t>0?S/t:.5})}console.log(`Initialized ${Qe().length} water grains.`)}function Cr(e,t,n,l){const i=Qe();if(l?.grainDensity){const r=l.grainDensity,o=i.length;if(o<r){const c=r-o;for(let h=0;h<c;h++){const d=l.grainSpeed*(.5+Math.random()),_=Math.random()*Math.PI*2,m=(l.grainLightness||85)+Math.random()*10-5,f=Math.random()*t,b=Math.random()*n;ln({x:f,y:b,vx:Math.cos(_)*d,vy:Math.sin(_)*d,size:l.grainSize,opacity:l.grainOpacity,color:`hsl(210, ${65+Math.random()*10}%, ${m}%)`,relativeX:t>0?f/t:.5,relativeY:n>0?b/n:.5})}}else if(o>r){const c=o-r;for(let h=0;h<c&&i.length>0;h++){const d=i[i.length-1];releaseWaterGrain(d)}}}if(i.length===0)return;const s=e.globalAlpha;for(const r of i){const o=l?l.grainSpeed/.15:1;r.x+=r.vx*o,r.y+=r.vy*o,r.x<-r.size?r.x=t+r.size:r.x>t+r.size&&(r.x=-r.size),r.y<-r.size?r.y=n+r.size:r.y>n+r.size&&(r.y=-r.size),e.beginPath();const c=l?l.grainSize:r.size;if(e.arc(r.x,r.y,c,0,Math.PI*2),l?.grainLightness){const d=l.grainLightness,_=Math.abs(Math.sin(r.x*.01+r.y*.01))*10-5,y=Math.max(20,Math.min(90,d+_));e.fillStyle=`hsl(210, ${65+Math.random()*10}%, ${y}%)`}else e.fillStyle=r.color;const h=l?l.grainOpacity:r.opacity;e.globalAlpha=Math.max(0,h*s),e.fill()}e.globalAlpha=s}function Rr(e,t){const n=Qe();if(n.length!==0)for(const l of n)l.relativeX!==void 0&&l.relativeY!==void 0?(l.x=l.relativeX*e,l.y=l.relativeY*t):(console.warn("WaterGrain missing relative coordinates during resize. Re-randomizing position."),l.x=Math.random()*e,l.y=Math.random()*t,l.relativeX=e>0?l.x/e:.5,l.relativeY=t>0?l.y/t:.5)}function Er(e,t,n){if(ht().length>=Qa)return;const l=Math.floor(Math.random()*3);let i,s,r,o,c;l===0?(i=Math.random()*e,s=-Ne,r=(Math.random()-.5)*Ct*.5,o=_a+Math.random()*(Rt-_a),c=Math.PI/2+(Math.random()-.5)*(Math.PI/6)):l===1?(i=-Ne,s=Math.random()*t,r=tt+Math.random()*(Ct-tt),o=(Math.random()-.5)*Rt*.4,c=(Math.random()-.5)*(Math.PI/4)):(i=e+Ne,s=Math.random()*t,r=-(tt+Math.random()*(Ct-tt)),o=(Math.random()-.5)*Rt*.4,c=Math.PI+(Math.random()-.5)*(Math.PI/4));let h=0;const d=(C,u,E,$,G,M)=>{let w=u,x=E,I=$;for(let T=0;T<G;T++){const q=Sa+Math.random()*(Xi-Sa);if(I+=(Math.random()-.5)*2*Et,M){const N=(I-$+Math.PI*3)%(Math.PI*2)-Math.PI;Math.abs(N)>Et*1.5&&(I=$+Math.sign(N)*Et*1.5)}else l===0?I=Math.max(Math.PI/4,Math.min(3*Math.PI/4,I)):l===1?I=Math.max(-Math.PI/3,Math.min(Math.PI/3,I)):I=Math.max(2*Math.PI/3,Math.min(4*Math.PI/3,I));const V=w+Math.cos(I)*q,R=x+Math.sin(I)*q;for(let N=0;N<Zi;N++){const ee=ya+Math.random()*(Ni-ya),P=I+Math.PI/2,H=(Math.random()-.5)*Ne*.8,Y=w+Math.cos(P)*H,B=x+Math.sin(P)*H;dr(C,{x:Y,y:B,initialRelativeX:Y,initialRelativeY:B,size:ee,opacity:0,appearAtAge:h++*Yi,maxOpacity:.5+Math.random()*.4,particleAge:0,particleMaxAge:xa+Math.random()*(Qi-xa)})}w=V,x=R;const ie=n?.foamBranchiness||Ui;if(!M&&Math.random()<ie&&T<G-wa/2&&T>2){const N=(Math.random()<.5?-1:1)*Ki*(.7+Math.random()*.6),ee=Math.floor(wa*(.5+Math.random()*.5));d(C,w,x,I+N,ee,!0)}}},_=n?.foamComplexity?n.foamComplexity/50:1,y=Math.round(Wi*_),m=Math.round(Vi*_),f=y+Math.floor(Math.random()*(m-y+1)),b={anchorX:i,anchorY:s,particles:[],vx:r,vy:o,opacity:0,age:0,maxAge:n?.foamLifetime||ba+Math.random()*(qi-ba),color:Math.random()<.6?Fi:Bi};cr(b);const S=ht().find(C=>C.anchorX===i&&C.anchorY===s&&C.age===0);if(S){if(d(S,0,0,c,f,!1),S.particles.length<5){Dt(S);return}}else console.warn("Could not find newly added streak to generate particles into.")}function Tr(e,t,n,l){const i=ht();if(i.length===0)return;const s=e.globalAlpha,r=e.globalCompositeOperation;e.globalCompositeOperation="lighter";for(let o=i.length-1;o>=0;o--){const c=i[o];c.age++,c.anchorX+=c.vx,c.anchorY+=c.vy;const h=c.maxAge*Hi;if(c.age<h?c.opacity=c.age/h:c.age>c.maxAge-h?c.opacity=1-(c.age-(c.maxAge-h))/h:c.opacity=1,c.opacity=Math.max(0,Math.min(1,c.opacity)),c.opacity<=0&&c.age>h){Dt(c);continue}let d=!0;const _=Ne*5,y=Ne*5;if(c.anchorX>-_&&c.anchorX<t+_&&c.anchorY>-y&&c.anchorY<n+y)d=!1;else{d=!0;for(const m of c.particles){const f=c.anchorX+m.x,b=c.anchorY+m.y;if(f>-m.size&&f<t+m.size&&b>-m.size&&b<n+m.size){d=!1;break}}}if(d&&c.age>h*2){Dt(c);continue}e.fillStyle=c.color;for(let m=c.particles.length-1;m>=0;m--){const f=c.particles[m];if(c.age<f.appearAtAge)continue;if(f.particleAge++,f.particleAge>f.particleMaxAge){f.opacity=0,on(f),c.particles.splice(m,1);continue}else{const w=f.particleMaxAge*ji;f.particleAge<w?f.opacity=f.particleAge/w*f.maxOpacity:f.particleAge>f.particleMaxAge-w?f.opacity=(1-(f.particleAge-(f.particleMaxAge-w))/w)*f.maxOpacity:f.opacity=f.maxOpacity,f.opacity=Math.max(0,Math.min(f.maxOpacity,f.opacity))}if(f.opacity<=.001)continue;f.x+=(Math.random()-.5)*Ma,f.y+=(Math.random()-.5)*Ma;const b=f.x-f.initialRelativeX,S=f.y-f.initialRelativeY,C=b*b+S*S,u=Ne*.5;if(C>u*u){const w=Math.sqrt(C);f.x=f.initialRelativeX+b/w*u,f.y=f.initialRelativeY+S/w*u}const E=c.anchorX+f.x,$=c.anchorY+f.y,G=l?.foamOpacity??1,M=c.opacity*f.opacity*G;M<=.001||(e.globalAlpha=M*s,e.beginPath(),e.arc(E,$,f.size,0,Math.PI*2),e.fill())}}e.globalCompositeOperation=r,e.globalAlpha=s}var Or=oe('<canvas class="pointer-events-none fixed top-0 left-0 -z-10 h-full w-full svelte-1mnusik"></canvas>');function Gr(e,t){Te(t,!1);const[n,l]=Le(),i=()=>ke(ce,"$backgroundSettings",n),s=W(),r=W();let o=Hn(t,"settings",8),c=W(),h,d=0,_=0,y=0,m=1,f=0,b={...qe[0]},S=0;Pt(()=>{const u=a(c);if(!u){console.error("Canvas not available onMount");return}const E=u.getContext("2d");if(!E){console.error("Context not available onMount");return}N(),console.log(`[onMount after initial resize] Canvas: ${u.width}x${u.height}`);let $=0,G=0,M=null,w,x=!1,I=0;function T(){const P=Date.now();if(f===0&&(f=P,S=P,y=(_+1)%qe.length,m=0),P-f>=Di&&m>=1&&(_=y,y=(_+1)%qe.length,m=0,f=P,S=P),m<1){const H=P-S;m=Math.min(1,H/Li);const Y=Ji(m),B=qe[_],j=qe[y];b.x1=B.x1+(j.x1-B.x1)*Y,b.y1=B.y1+(j.y1-B.y1)*Y,b.x2=B.x2+(j.x2-B.x2)*Y,b.y2=B.y2+(j.y2-B.y2)*Y}else b={...qe[y]},_=y}const q=P=>{if(M){if(!x){const Y=P.pageX-M.x,B=P.pageY-M.y;Math.sqrt(Y*Y+B*B)>bi&&(x=!0)}const H=Date.now();H-$>yi&&(it(P.pageX,P.pageY,"mouseMove",i()),$=H)}},V=P=>{G=Date.now(),M={x:P.pageX,y:P.pageY},x=!1},R=P=>{if(!M||G===0)return;const H=Date.now()-G;x||(H>=Si?it(P.pageX,P.pageY,"longPress",i()):it(P.pageX,P.pageY,"mouseMove",i())),M=null,G=0,x=!1},ie=()=>{u&&it(Math.random()*u.width,Math.random()*u.height,"ambient",o())};function N(){u&&(u.width=window.innerWidth,u.height=window.innerHeight,console.log(`[resizeCanvas] Canvas: ${u.width}x${u.height}`),mr(u.width,u.height),Mr(u.width,u.height),Rr(u.width,u.height))}if(window.addEventListener("resize",N),window.addEventListener("mousemove",q),window.addEventListener("mousedown",V),window.addEventListener("mouseup",R),typeof window<"u"){const P=o()?.rippleFrequency||mi;w=window.setInterval(ie,P)}if(u){if(o()?.shimmerEnabled){for(let P=0;P<Ua-fa;P++)Ea(u.width,u.height,!1);for(let P=0;P<fa;P++)Ea(u.width,u.height,!0)}o()?.sunGlowEnabled&&Sr(u.width,u.height),o()?.waterGrainsEnabled&&Ir(u.width,u.height,o())}console.log(`[onMount End] Canvas: ${u.width}x${u.height}, ShimmerSpots: ${gt().length}, Grains: ${Qe().length}, SunGlows: ${mt().length}`);function ee(){if(!E||!u){h=requestAnimationFrame(ee);return}d+=.002,T();const P=b.x1*u.width,H=b.y1*u.height,Y=b.x2*u.width,B=b.y2*u.height,j=E.createLinearGradient(P,H,Y,B),ue=typeof a(s)=="string"&&a(s).includes("hsl")?a(s):"hsl(210, 70%, 50%)",U=typeof a(r)=="string"&&a(r).includes("hsl")?a(r):"hsl(200, 68%, 50%)";if(j.addColorStop(0,ue),j.addColorStop(1,U),E.fillStyle=j,E.fillRect(0,0,u.width,u.height),o()?.ripplesEnabled&&hr(E),o()?.shimmerEnabled&&gr(E,u.width,u.height,d),o()?.waterGrainsEnabled&&Cr(E,u.width,u.height,o()),o()?.sunGlowEnabled&&(_r(E,o()),br(E)),I+=16.67,I>=xi){for(const de in $t){const Z=de,me=$t[Z];typeof me.chancePerInterval=="number"&&Math.random()<me.chancePerInterval&&Xt().length<Za&&Ar(u.width,u.height,Z)}I=0}kr(E,u.width,u.height),o()?.foamEnabled&&(Math.random()<(o()?.foamFrequency||Pi)&&ht().length<Qa&&Er(u.width,u.height,o()),Tr(E,u.width,u.height,o())),h=requestAnimationFrame(ee)}return ee(),()=>{window.removeEventListener("resize",N),window.removeEventListener("mousemove",q),window.removeEventListener("mousedown",V),window.removeEventListener("mouseup",R),w&&clearInterval(w),h&&cancelAnimationFrame(h)}}),we(()=>Gt(o()),()=>{L(s,o()?.gradientColor1||"hsl(210, 70%, 50%)")}),we(()=>Gt(o()),()=>{L(r,o()?.gradientColor2||"hsl(200, 68%, 50%)")}),ze(),Ee();var C=Or();st(C,u=>L(c,u),()=>a(c)),le(e,C),Oe(),l()}var zr=oe('<div class="professional-hsl-picker svelte-14mu5ay"><div class="picker-header svelte-14mu5ay"><div class="control-buttons svelte-14mu5ay"><button title="Sync both gradients">ð</button> <button title="Lock current selection">ð</button> <button class="control-btn reset-btn svelte-14mu5ay" title="Reset to defaults">âº</button></div></div> <div class="slider-section svelte-14mu5ay"><div class="slider-label svelte-14mu5ay">Hue (0Â° - 360Â°)</div> <div class="slider-container svelte-14mu5ay"><canvas class="color-slider svelte-14mu5ay"></canvas></div></div> <div class="slider-section svelte-14mu5ay"><div class="slider-label svelte-14mu5ay">Saturation (0% - 100%)</div> <div class="slider-container svelte-14mu5ay"><canvas class="color-slider svelte-14mu5ay"></canvas></div></div> <div class="slider-section svelte-14mu5ay"><div class="slider-label svelte-14mu5ay">Lightness (0% - 100%)</div> <div class="slider-container svelte-14mu5ay"><canvas class="color-slider svelte-14mu5ay"></canvas></div></div> <div class="color-preview svelte-14mu5ay"><div class="preview-item svelte-14mu5ay"><div class="preview-swatch svelte-14mu5ay"></div> <span class="preview-label svelte-14mu5ay"> </span></div> <div class="preview-item svelte-14mu5ay"><div class="preview-swatch svelte-14mu5ay"></div> <span class="preview-label svelte-14mu5ay"> </span></div></div> <div class="instructions svelte-14mu5ay"><p>Click: Set Gradient 1 â¢ Drag indicators to move</p></div></div>');function $r(e,t){Te(t,!1);const n=W(),l=W();let i=W(),s=W(),r=W(),o,c=W(null),h=W(null),d=W(null),_=W(!1),y=W(!1),m=!1,f=null,b=null;const S=320,C=40,u=16;let E=0,$={x:0,targetX:0,scale:1,opacity:.9},G={x:0,targetX:0,scale:1,opacity:.9},M={x:0,targetX:0,scale:1,opacity:.9},w={x:0,targetX:0,scale:1,opacity:.9},x={x:0,targetX:0,scale:1,opacity:.9},I={x:0,targetX:0,scale:1,opacity:.9},T;function q(){$.targetX=u+a(n).h/360*(S-2*u),G.targetX=u+a(l).h/360*(S-2*u),$.x=$.targetX,G.x=G.targetX,M.targetX=u+a(n).s/100*(S-2*u),w.targetX=u+a(l).s/100*(S-2*u),M.x=M.targetX,w.x=w.targetX,x.targetX=u+a(n).l/100*(S-2*u),I.targetX=u+a(l).l/100*(S-2*u),x.x=x.targetX,I.x=I.targetX}function V(k,O){const z=Math.max(0,Math.min(1,(k-u)/(S-2*u)));switch(O){case"hue":return z*360;case"saturation":return z*100;case"lightness":return z*100}}function R(){if(!a(c)||!a(h)||!a(d)){o=requestAnimationFrame(R);return}E+=.016,m||($.x+=($.targetX-$.x)*.15,G.x+=(G.targetX-G.x)*.15,M.x+=(M.targetX-M.x)*.15,w.x+=(w.targetX-w.x)*.15,x.x+=(x.targetX-x.x)*.15,I.x+=(I.targetX-I.x)*.15),[$,G,M,w,x,I].forEach((O,z)=>{const te=z%2+1;f===te&&(b==="hue"&&z<2||b==="saturation"&&z>=2&&z<4||b==="lightness"&&z>=4)?(O.scale=1+.2*Math.sin(E*8),O.opacity=.95):(O.scale+=(1-O.scale)*.1,O.opacity+=(.9-O.opacity)*.1)}),ie(),o=requestAnimationFrame(R)}function ie(){N(),ee(),P()}function N(){if(!a(c))return;a(c).clearRect(0,0,S,C);const k=a(c).createLinearGradient(u,0,S-u,0);for(let O=0;O<=12;O++){const z=O/12*360;k.addColorStop(O/12,`hsl(${z}, 70%, 50%)`)}_e(c,a(c).fillStyle=k),Y(a(c),u,8,S-2*u,C-16,8),a(c).fill(),_e(c,a(c).strokeStyle="rgba(255, 255, 255, 0.2)"),_e(c,a(c).lineWidth=1),Y(a(c),u,8,S-2*u,C-16,8),a(c).stroke(),H(a(c),$,"#3B82F6","1"),H(a(c),G,"#EC4899","2")}function ee(){if(!a(h))return;a(h).clearRect(0,0,S,C);const k=(a(n).h+a(l).h)/2,O=a(h).createLinearGradient(u,0,S-u,0);O.addColorStop(0,`hsl(${k}, 0%, 50%)`),O.addColorStop(1,`hsl(${k}, 100%, 50%)`),_e(h,a(h).fillStyle=O),Y(a(h),u,8,S-2*u,C-16,8),a(h).fill(),_e(h,a(h).strokeStyle="rgba(255, 255, 255, 0.2)"),_e(h,a(h).lineWidth=1),Y(a(h),u,8,S-2*u,C-16,8),a(h).stroke(),H(a(h),M,"#3B82F6","1"),H(a(h),w,"#EC4899","2")}function P(){if(!a(d))return;a(d).clearRect(0,0,S,C);const k=(a(n).h+a(l).h)/2,O=(a(n).s+a(l).s)/2,z=a(d).createLinearGradient(u,0,S-u,0);z.addColorStop(0,`hsl(${k}, ${O}%, 0%)`),z.addColorStop(.25,`hsl(${k}, ${O}%, 25%)`),z.addColorStop(.5,`hsl(${k}, ${O}%, 50%)`),z.addColorStop(.75,`hsl(${k}, ${O}%, 75%)`),z.addColorStop(1,`hsl(${k}, ${O}%, 100%)`),_e(d,a(d).fillStyle=z),Y(a(d),u,8,S-2*u,C-16,8),a(d).fill(),_e(d,a(d).strokeStyle="rgba(255, 255, 255, 0.2)"),_e(d,a(d).lineWidth=1),Y(a(d),u,8,S-2*u,C-16,8),a(d).stroke(),H(a(d),x,"#3B82F6","1"),H(a(d),I,"#EC4899","2")}function H(k,O,z,te){const ae=O.x,ne=C/2,re=O.scale,Pe=O.opacity;k.save(),k.globalAlpha=Pe;const Ve=k.createRadialGradient(ae,ne,0,ae,ne,20*re);Ve.addColorStop(0,z+"40"),Ve.addColorStop(1,z+"00"),k.fillStyle=Ve,k.fillRect(ae-20*re,ne-20*re,40*re,40*re),k.beginPath(),k.arc(ae,ne,10*re,0,Math.PI*2),k.fillStyle=z,k.fill(),k.strokeStyle="rgba(255, 255, 255, 0.9)",k.lineWidth=2,k.stroke(),k.beginPath(),k.arc(ae,ne,6*re,0,Math.PI*2),k.fillStyle="rgba(255, 255, 255, 0.3)",k.fill(),k.fillStyle="white",k.font=`bold ${8*re}px system-ui`,k.textAlign="center",k.textBaseline="middle",k.fillText(te,ae,ne),k.restore()}function Y(k,O,z,te,ae,ne){k.beginPath(),k.moveTo(O+ne,z),k.lineTo(O+te-ne,z),k.quadraticCurveTo(O+te,z,O+te,z+ne),k.lineTo(O+te,z+ae-ne),k.quadraticCurveTo(O+te,z+ae,O+te-ne,z+ae),k.lineTo(O+ne,z+ae),k.quadraticCurveTo(O,z+ae,O,z+ae-ne),k.lineTo(O,z+ne),k.quadraticCurveTo(O,z,O+ne,z),k.closePath()}function B(k,O){let z,te,ae;switch(O){case"hue":z=a(i),te=$,ae=G;break;case"saturation":z=a(s),te=M,ae=w;break;case"lightness":z=a(r),te=x,ae=I;break;default:return}if(!z)return;const ne=z.getBoundingClientRect(),re=k.clientX-ne.left,Pe=Math.abs(re-te.x),Ve=Math.abs(re-ae.x);if(Pe<20)m=!0,f=1,b=O,k.preventDefault();else if(Ve<20)m=!0,f=2,b=O,k.preventDefault();else{const vn=V(re,O);U(O,vn,1)}}function j(k){if(!m||!b||!f)return;let O,z,te;switch(b){case"hue":O=a(i),z=$,te=G;break;case"saturation":O=a(s),z=M,te=w;break;case"lightness":O=a(r),z=x,te=I;break;default:return}if(!O)return;const ae=O.getBoundingClientRect(),ne=k.clientX-ae.left,re=Math.max(u,Math.min(S-u,ne));f===1?(z.targetX=re,z.x=re):(te.targetX=re,te.x=re);const Pe=V(re,b);U(b,Pe,f)}function ue(){m=!1,f=null,b=null}function U(k,O,z){const te=z===1?a(n):a(l);if(!te)return;let ae=te.h,ne=te.s,re=te.l;switch(k){case"hue":ae=O;break;case"saturation":ne=O;break;case"lightness":re=O;break}z===1?(da(ae,ne,re),L(n,{h:ae,s:ne,l:re})):(ua(ae,ne,re),L(l,{h:ae,s:ne,l:re}))}function ge(){L(y,!a(y))}function de(){L(_,!a(_))}function Z(){da(210,70,50),ua(200,68,50)}Pt(()=>{if(!(!a(i)||!a(s)||!a(r))&&(L(c,a(i).getContext("2d")),L(h,a(s).getContext("2d")),L(d,a(r).getContext("2d")),!(!a(c)||!a(h)||!a(d))))return _e(i,a(i).width=S),_e(i,a(i).height=C),_e(s,a(s).width=S),_e(s,a(s).height=C),_e(r,a(r).width=S),_e(r,a(r).height=C),q(),R(),document.addEventListener("mousemove",j),document.addEventListener("mouseup",ue),T=ce.subscribe(k=>{(k.gradientColor1||k.gradientColor2)&&q()}),()=>{o&&cancelAnimationFrame(o),document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",ue),T&&T()}}),Xn(()=>{o&&cancelAnimationFrame(o)}),we(()=>oa,()=>{L(n,oa()||{h:210,s:70,l:50})}),we(()=>ca,()=>{L(l,ca()||{h:200,s:68,l:50})}),we(()=>(a(n),a(l),a(c),a(h),a(d)),()=>{a(n)&&a(l)&&typeof a(n).h=="number"&&typeof a(l).h=="number"&&(q(),a(c)&&a(h)&&a(d)&&ie())}),ze(),Ee();var me=zr(),be=p(me),D=p(be),X=p(D);let ve;var fe=g(X,2);let J;var $e=g(fe,2);v(D),v(be);var Ge=g(be,2),Xe=g(p(Ge),2),je=p(Xe);st(je,k=>L(i,k),()=>a(i)),v(Xe),v(Ge);var yt=g(Ge,2),qt=g(p(yt),2),Ht=p(qt);st(Ht,k=>L(s,k),()=>a(s)),v(qt),v(yt);var St=g(yt,2),Yt=g(p(St),2),Wt=p(Yt);st(Wt,k=>L(r,k),()=>a(r)),v(Yt),v(St);var Vt=g(St,2),bt=p(Vt),Ut=p(bt),Kt=g(Ut,2),dn=p(Kt);v(Kt),v(bt);var Zt=g(bt,2),Qt=p(Zt),jt=g(Qt,2),un=p(jt);v(jt),v(Zt),v(Vt),Ye(2),v(me),he((k,O,z,te,ae,ne,re,Pe)=>{ve=Ke(X,1,"control-btn svelte-14mu5ay",null,ve,k),J=Ke(fe,1,"control-btn svelte-14mu5ay",null,J,O),lt(Ut,`background-color: hsl(${a(n),A(()=>a(n).h)??""}, ${a(n),A(()=>a(n).s)??""}%, ${a(n),A(()=>a(n).l)??""}%)`),Q(dn,`Gradient 1: ${z??""}Â°, ${te??""}%, ${ae??""}%`),lt(Qt,`background-color: hsl(${a(l),A(()=>a(l).h)??""}, ${a(l),A(()=>a(l).s)??""}%, ${a(l),A(()=>a(l).l)??""}%)`),Q(un,`Gradient 2: ${ne??""}Â°, ${re??""}%, ${Pe??""}%`)},[()=>({active:a(y)}),()=>({active:a(_)}),()=>(a(n),A(()=>Math.round(a(n).h))),()=>(a(n),A(()=>Math.round(a(n).s))),()=>(a(n),A(()=>Math.round(a(n).l))),()=>(a(l),A(()=>Math.round(a(l).h))),()=>(a(l),A(()=>Math.round(a(l).s))),()=>(a(l),A(()=>Math.round(a(l).l)))]),F("click",X,ge),F("click",fe,de),F("click",$e,Z),F("mousedown",je,k=>B(k,"hue")),F("mousedown",Ht,k=>B(k,"saturation")),F("mousedown",Wt,k=>B(k,"lightness")),le(e,me),Oe()}var Dr=oe('<div class="timer-settings-panel svelte-i7dh9z"><h3 class="panel-title svelte-i7dh9z">Timer Settings</h3> <div class="settings-grid svelte-i7dh9z"><div class="setting-item svelte-i7dh9z"><label for="work-duration" class="setting-label svelte-i7dh9z">Work (min)</label> <input id="work-duration" type="number" min="1" max="120" class="setting-input svelte-i7dh9z"/></div> <div class="setting-item svelte-i7dh9z"><label for="short-break-duration" class="setting-label svelte-i7dh9z">Short Break (min)</label> <input id="short-break-duration" type="number" min="1" max="60" class="setting-input svelte-i7dh9z"/></div> <div class="setting-item svelte-i7dh9z"><label for="long-break-duration" class="setting-label svelte-i7dh9z">Long Break (min)</label> <input id="long-break-duration" type="number" min="1" max="120" class="setting-input svelte-i7dh9z"/></div> <div class="setting-item svelte-i7dh9z"><label for="sessions-before-long-break" class="setting-label svelte-i7dh9z">Sessions Before Long Break</label> <input id="sessions-before-long-break" type="number" min="1" max="10" class="setting-input svelte-i7dh9z"/></div></div> <div class="toggles-section svelte-i7dh9z"><div class="toggle-item svelte-i7dh9z"><label for="auto-cycle" class="toggle-label svelte-i7dh9z">Auto-cycle sessions</label> <input id="auto-cycle" type="checkbox" class="toggle-input svelte-i7dh9z"/></div> <div class="toggle-item svelte-i7dh9z"><label for="floating-enabled" class="toggle-label svelte-i7dh9z">Enable floating effects</label> <input id="floating-enabled" type="checkbox" class="toggle-input svelte-i7dh9z"/></div></div> <button type="button" class="reset-button svelte-i7dh9z">Reset to Defaults</button></div>');function Lr(e,t){Te(t,!1);const[n,l]=Le(),i=()=>ke(Ae,"$timerSettings",n),s=()=>ke(ce,"$backgroundSettings",n);let r=W(i().workDuration/60),o=W(i().shortBreakDuration/60),c=W(i().longBreakDuration/60),h=W(i().sessionsBeforeLongBreak),d=W(i().autoCycle),_=W(s().isFloatingEnabled);Ae.subscribe(R=>{R.workDuration/60!==a(r)&&L(r,R.workDuration/60),R.shortBreakDuration/60!==a(o)&&L(o,R.shortBreakDuration/60),R.longBreakDuration/60!==a(c)&&L(c,R.longBreakDuration/60),R.sessionsBeforeLongBreak!==a(h)&&L(h,R.sessionsBeforeLongBreak),R.autoCycle!==a(d)&&L(d,R.autoCycle)}),ce.subscribe(R=>{R.isFloatingEnabled!==a(_)&&L(_,R.isFloatingEnabled)});function y(){hi(),Ae.set({workDuration:1500,shortBreakDuration:300,longBreakDuration:900,sessionsBeforeLongBreak:4,autoCycle:!1})}we(()=>(a(r),a(o),a(c),a(h),a(d),i(),Ae),()=>{const R={workDuration:Math.max(1,a(r))*60,shortBreakDuration:Math.max(1,a(o))*60,longBreakDuration:Math.max(1,a(c))*60,sessionsBeforeLongBreak:Math.max(1,a(h)),autoCycle:a(d)};(i().workDuration!==R.workDuration||i().shortBreakDuration!==R.shortBreakDuration||i().longBreakDuration!==R.longBreakDuration||i().sessionsBeforeLongBreak!==R.sessionsBeforeLongBreak||i().autoCycle!==R.autoCycle)&&Ae.set(R)}),we(()=>(s(),a(_),ce),()=>{s().isFloatingEnabled!==a(_)&&ce.update(R=>({...R,isFloatingEnabled:a(_)}))}),ze(),Ee();var m=Dr(),f=g(p(m),2),b=p(f),S=g(p(b),2);K(S),v(b);var C=g(b,2),u=g(p(C),2);K(u),v(C);var E=g(C,2),$=g(p(E),2);K($),v(E);var G=g(E,2),M=g(p(G),2);K(M),v(G),v(f);var w=g(f,2),x=p(w),I=g(p(x),2);K(I),v(x);var T=g(x,2),q=g(p(T),2);K(q),v(T),v(w);var V=g(w,2);v(m),Je(S,()=>a(r),R=>L(r,R)),Je(u,()=>a(o),R=>L(o,R)),Je($,()=>a(c),R=>L(c,R)),Je(M,()=>a(h),R=>L(h,R)),ra(I,()=>a(d),R=>L(d,R)),ra(q,()=>a(_),R=>L(_,R)),F("click",V,y),le(e,m),Oe(),l()}var Pr=oe('<div class="controls-grid svelte-131rztl"><div class="control-item svelte-131rztl"><label class="control-label svelte-131rztl">Size</label> <div class="slider-container svelte-131rztl"><input type="range" min="20" max="150" class="slider svelte-131rztl"/> <span class="value-display svelte-131rztl"> </span></div></div> <div class="control-item svelte-131rztl"><label class="control-label svelte-131rztl">Speed</label> <div class="slider-container svelte-131rztl"><input type="range" min="0.1" max="1.0" step="0.05" class="slider svelte-131rztl"/> <span class="value-display svelte-131rztl"> </span></div></div> <div class="control-item svelte-131rztl"><label class="control-label svelte-131rztl">Ambient Frequency</label> <div class="slider-container svelte-131rztl"><input type="range" min="1000" max="10000" step="500" class="slider svelte-131rztl"/> <span class="value-display svelte-131rztl"> </span></div></div></div>'),Fr=oe('<div class="controls-grid svelte-131rztl"><div class="control-item svelte-131rztl"><label class="control-label svelte-131rztl">Intensity</label> <div class="slider-container svelte-131rztl"><input type="range" min="0.1" max="1.0" step="0.05" class="slider svelte-131rztl"/> <span class="value-display svelte-131rztl"> </span></div></div> <div class="control-item svelte-131rztl"><label class="control-label svelte-131rztl">Speed</label> <div class="slider-container svelte-131rztl"><input type="range" min="0.5" max="2.0" step="0.1" class="slider svelte-131rztl"/> <span class="value-display svelte-131rztl"> </span></div></div> <div class="control-item svelte-131rztl"><label class="control-label svelte-131rztl">Count</label> <div class="slider-container svelte-131rztl"><input type="range" min="1" max="10" class="slider svelte-131rztl"/> <span class="value-display svelte-131rztl"> </span></div></div></div>'),Br=oe('<div class="effects-panel svelte-131rztl"><h3 class="panel-title svelte-131rztl">Water Effects</h3> <div class="effect-section svelte-131rztl"><div class="section-header svelte-131rztl"><h4 class="section-title svelte-131rztl">Ripples</h4> <label class="toggle-wrapper svelte-131rztl"><input type="checkbox" class="toggle-input svelte-131rztl"/> <span class="toggle-label svelte-131rztl">Enable</span></label></div> <!></div> <div class="effect-section svelte-131rztl"><div class="section-header svelte-131rztl"><h4 class="section-title svelte-131rztl">Wave Shimmer</h4> <label class="toggle-wrapper svelte-131rztl"><input type="checkbox" class="toggle-input svelte-131rztl"/> <span class="toggle-label svelte-131rztl">Enable</span></label></div> <!></div> <button type="button" class="reset-button svelte-131rztl">Reset to Defaults</button></div>');function Nr(e,t){Te(t,!1);const[n,l]=Le(),i=()=>ke(ce,"$backgroundSettings",n),s=W();function r(M,w){ce.update(x=>({...x,[M]:w}))}function o(){r("ripplesEnabled",!0),r("rippleSize",50),r("rippleSpeed",.35),r("rippleFrequency",3e3),r("shimmerEnabled",!0),r("shimmerIntensity",.5),r("shimmerSpeed",1),r("shimmerCount",5)}we(()=>i(),()=>{L(s,i())}),ze(),Ee();var c=Br(),h=g(p(c),2),d=p(h),_=g(p(d),2),y=p(_);K(y),Ye(2),v(_),v(d);var m=g(d,2);{var f=M=>{var w=Pr(),x=p(w),I=g(p(x),2),T=p(I);K(T);var q=g(T,2),V=p(q,!0);v(q),v(I),v(x);var R=g(x,2),ie=g(p(R),2),N=p(ie);K(N);var ee=g(N,2),P=p(ee,!0);v(ee),v(ie),v(R);var H=g(R,2),Y=g(p(H),2),B=p(Y);K(B);var j=g(B,2),ue=p(j);v(j),v(Y),v(H),v(w),he((U,ge)=>{se(T,(a(s),A(()=>a(s).rippleSize))),Q(V,(a(s),A(()=>a(s).rippleSize))),se(N,(a(s),A(()=>a(s).rippleSpeed))),Q(P,U),se(B,(a(s),A(()=>1e4-a(s).rippleFrequency+1e3))),Q(ue,`${ge??""}/10`)},[()=>(a(s),A(()=>a(s).rippleSpeed.toFixed(2))),()=>(a(s),A(()=>Math.round((1e4-a(s).rippleFrequency+1e3)/1e3*10)/10))]),F("input",T,U=>r("rippleSize",parseInt(U.currentTarget.value))),F("input",N,U=>r("rippleSpeed",parseFloat(U.currentTarget.value))),F("input",B,U=>r("rippleFrequency",1e4-parseInt(U.currentTarget.value)+1e3)),le(M,w)};xe(m,M=>{a(s),A(()=>a(s).ripplesEnabled)&&M(f)})}v(h);var b=g(h,2),S=p(b),C=g(p(S),2),u=p(C);K(u),Ye(2),v(C),v(S);var E=g(S,2);{var $=M=>{var w=Fr(),x=p(w),I=g(p(x),2),T=p(I);K(T);var q=g(T,2),V=p(q);v(q),v(I),v(x);var R=g(x,2),ie=g(p(R),2),N=p(ie);K(N);var ee=g(N,2),P=p(ee);v(ee),v(ie),v(R);var H=g(R,2),Y=g(p(H),2),B=p(Y);K(B);var j=g(B,2),ue=p(j,!0);v(j),v(Y),v(H),v(w),he((U,ge)=>{se(T,(a(s),A(()=>a(s).shimmerIntensity))),Q(V,`${U??""}%`),se(N,(a(s),A(()=>a(s).shimmerSpeed))),Q(P,`${ge??""}x`),se(B,(a(s),A(()=>a(s).shimmerCount))),Q(ue,(a(s),A(()=>a(s).shimmerCount)))},[()=>(a(s),A(()=>Math.round(a(s).shimmerIntensity*100))),()=>(a(s),A(()=>a(s).shimmerSpeed.toFixed(1)))]),F("input",T,U=>r("shimmerIntensity",parseFloat(U.currentTarget.value))),F("input",N,U=>r("shimmerSpeed",parseFloat(U.currentTarget.value))),F("input",B,U=>r("shimmerCount",parseInt(U.currentTarget.value))),le(M,w)};xe(E,M=>{a(s),A(()=>a(s).shimmerEnabled)&&M($)})}v(b);var G=g(b,2);v(c),he(()=>{Ze(y,(a(s),A(()=>a(s).ripplesEnabled))),Ze(u,(a(s),A(()=>a(s).shimmerEnabled)))}),F("change",y,M=>r("ripplesEnabled",M.currentTarget.checked)),F("change",u,M=>r("shimmerEnabled",M.currentTarget.checked)),F("click",G,o),le(e,c),Oe(),l()}var Xr=oe('<div class="controls-grid svelte-7lft7q"><div class="control-item svelte-7lft7q"><label for="grain-density" class="control-label svelte-7lft7q">Density</label> <div class="slider-container svelte-7lft7q"><input id="grain-density" type="range" min="100" max="1200" step="50" class="slider svelte-7lft7q"/> <span class="value-display svelte-7lft7q"> </span></div></div> <div class="control-item svelte-7lft7q"><label for="grain-speed" class="control-label svelte-7lft7q">Speed</label> <div class="slider-container svelte-7lft7q"><input id="grain-speed" type="range" min="0.05" max="0.25" step="0.01" class="slider svelte-7lft7q"/> <span class="value-display svelte-7lft7q"> </span></div></div> <div class="control-item svelte-7lft7q"><label for="grain-size" class="control-label svelte-7lft7q">Size</label> <div class="slider-container svelte-7lft7q"><input id="grain-size" type="range" min="0.5" max="1.25" step="0.05" class="slider svelte-7lft7q"/> <span class="value-display svelte-7lft7q"> </span></div></div> <div class="control-item svelte-7lft7q"><label for="grain-opacity" class="control-label svelte-7lft7q">Opacity</label> <div class="slider-container svelte-7lft7q"><input id="grain-opacity" type="range" min="0.1" max="0.8" step="0.05" class="slider svelte-7lft7q"/> <span class="value-display svelte-7lft7q"> </span></div></div> <div class="control-item svelte-7lft7q"><label for="grain-lightness" class="control-label svelte-7lft7q">Lightness</label> <div class="slider-container svelte-7lft7q"><input id="grain-lightness" type="range" min="20" max="90" step="5" class="slider svelte-7lft7q"/> <span class="value-display svelte-7lft7q"> </span></div></div></div>'),qr=oe('<div class="controls-grid svelte-7lft7q"><div class="control-item svelte-7lft7q"><label for="foam-frequency" class="control-label svelte-7lft7q">Frequency</label> <div class="slider-container svelte-7lft7q"><input id="foam-frequency" type="range" min="0.005" max="0.05" step="0.005" class="slider svelte-7lft7q"/> <span class="value-display svelte-7lft7q"> </span></div></div> <div class="control-item svelte-7lft7q"><label for="foam-lifetime" class="control-label svelte-7lft7q">Lifetime</label> <div class="slider-container svelte-7lft7q"><input id="foam-lifetime" type="range" min="60" max="200" step="10" class="slider svelte-7lft7q"/> <span class="value-display svelte-7lft7q"> </span></div></div> <div class="control-item svelte-7lft7q"><label for="foam-complexity" class="control-label svelte-7lft7q">Complexity</label> <div class="slider-container svelte-7lft7q"><input id="foam-complexity" type="range" min="25" max="100" step="5" class="slider svelte-7lft7q"/> <span class="value-display svelte-7lft7q"> </span></div></div> <div class="control-item svelte-7lft7q"><label for="foam-branchiness" class="control-label svelte-7lft7q">Branchiness</label> <div class="slider-container svelte-7lft7q"><input id="foam-branchiness" type="range" min="0" max="0.5" step="0.05" class="slider svelte-7lft7q"/> <span class="value-display svelte-7lft7q"> </span></div></div> <div class="control-item svelte-7lft7q"><label for="foam-opacity" class="control-label svelte-7lft7q">Opacity</label> <div class="slider-container svelte-7lft7q"><input id="foam-opacity" type="range" min="0.3" max="1.0" step="0.05" class="slider svelte-7lft7q"/> <span class="value-display svelte-7lft7q"> </span></div></div></div>'),Hr=oe('<div class="effects-panel svelte-7lft7q"><h3 class="panel-title svelte-7lft7q">Particle Effects</h3> <div class="effect-section svelte-7lft7q"><div class="section-header svelte-7lft7q"><h4 class="section-title svelte-7lft7q">Water Grains</h4> <label class="toggle-wrapper svelte-7lft7q"><input type="checkbox" class="toggle-input svelte-7lft7q"/> <span class="toggle-label svelte-7lft7q">Enable</span></label></div> <!></div> <div class="effect-section svelte-7lft7q"><div class="section-header svelte-7lft7q"><h4 class="section-title svelte-7lft7q">Foam Streaks</h4> <label class="toggle-wrapper svelte-7lft7q"><input type="checkbox" class="toggle-input svelte-7lft7q"/> <span class="toggle-label svelte-7lft7q">Enable</span></label></div> <!></div> <button type="button" class="reset-button svelte-7lft7q">Reset to Defaults</button></div>');function Yr(e,t){Te(t,!1);const[n,l]=Le(),i=()=>ke(ce,"$backgroundSettings",n),s=W();function r(M,w){ce.update(x=>({...x,[M]:w}))}function o(){r("waterGrainsEnabled",!0),r("grainDensity",600),r("grainSpeed",.15),r("grainSize",.875),r("grainOpacity",.4),r("foamEnabled",!0),r("foamFrequency",.02),r("foamLifetime",120),r("foamComplexity",50),r("foamBranchiness",.25),r("foamOpacity",.7)}we(()=>i(),()=>{L(s,i())}),ze(),Ee();var c=Hr(),h=g(p(c),2),d=p(h),_=g(p(d),2),y=p(_);K(y),Ye(2),v(_),v(d);var m=g(d,2);{var f=M=>{var w=Xr(),x=p(w),I=g(p(x),2),T=p(I);K(T);var q=g(T,2),V=p(q,!0);v(q),v(I),v(x);var R=g(x,2),ie=g(p(R),2),N=p(ie);K(N);var ee=g(N,2),P=p(ee,!0);v(ee),v(ie),v(R);var H=g(R,2),Y=g(p(H),2),B=p(Y);K(B);var j=g(B,2),ue=p(j,!0);v(j),v(Y),v(H);var U=g(H,2),ge=g(p(U),2),de=p(ge);K(de);var Z=g(de,2),me=p(Z);v(Z),v(ge),v(U);var be=g(U,2),D=g(p(be),2),X=p(D);K(X);var ve=g(X,2),fe=p(ve);v(ve),v(D),v(be),v(w),he((J,$e,Ge)=>{se(T,(a(s),A(()=>a(s).grainDensity))),Q(V,(a(s),A(()=>a(s).grainDensity))),se(N,(a(s),A(()=>a(s).grainSpeed))),Q(P,J),se(B,(a(s),A(()=>a(s).grainSize))),Q(ue,$e),se(de,(a(s),A(()=>a(s).grainOpacity))),Q(me,`${Ge??""}%`),se(X,(a(s),A(()=>a(s).grainLightness))),Q(fe,`${a(s),A(()=>a(s).grainLightness)??""}%`)},[()=>(a(s),A(()=>a(s).grainSpeed.toFixed(2))),()=>(a(s),A(()=>a(s).grainSize.toFixed(2))),()=>(a(s),A(()=>Math.round(a(s).grainOpacity*100)))]),F("input",T,J=>r("grainDensity",parseInt(J.currentTarget.value))),F("input",N,J=>r("grainSpeed",parseFloat(J.currentTarget.value))),F("input",B,J=>r("grainSize",parseFloat(J.currentTarget.value))),F("input",de,J=>r("grainOpacity",parseFloat(J.currentTarget.value))),F("input",X,J=>r("grainLightness",parseInt(J.currentTarget.value))),le(M,w)};xe(m,M=>{a(s),A(()=>a(s).waterGrainsEnabled)&&M(f)})}v(h);var b=g(h,2),S=p(b),C=g(p(S),2),u=p(C);K(u),Ye(2),v(C),v(S);var E=g(S,2);{var $=M=>{var w=qr(),x=p(w),I=g(p(x),2),T=p(I);K(T);var q=g(T,2),V=p(q);v(q),v(I),v(x);var R=g(x,2),ie=g(p(R),2),N=p(ie);K(N);var ee=g(N,2),P=p(ee);v(ee),v(ie),v(R);var H=g(R,2),Y=g(p(H),2),B=p(Y);K(B);var j=g(B,2),ue=p(j,!0);v(j),v(Y),v(H);var U=g(H,2),ge=g(p(U),2),de=p(ge);K(de);var Z=g(de,2),me=p(Z);v(Z),v(ge),v(U);var be=g(U,2),D=g(p(be),2),X=p(D);K(X);var ve=g(X,2),fe=p(ve);v(ve),v(D),v(be),v(w),he((J,$e,Ge,Xe)=>{se(T,(a(s),A(()=>a(s).foamFrequency))),Q(V,`${J??""}%`),se(N,(a(s),A(()=>a(s).foamLifetime))),Q(P,`${$e??""}s`),se(B,(a(s),A(()=>a(s).foamComplexity))),Q(ue,(a(s),A(()=>a(s).foamComplexity))),se(de,(a(s),A(()=>a(s).foamBranchiness))),Q(me,`${Ge??""}%`),se(X,(a(s),A(()=>a(s).foamOpacity))),Q(fe,`${Xe??""}%`)},[()=>(a(s),A(()=>(a(s).foamFrequency*100).toFixed(1))),()=>(a(s),A(()=>(a(s).foamLifetime/60).toFixed(1))),()=>(a(s),A(()=>Math.round(a(s).foamBranchiness*100))),()=>(a(s),A(()=>Math.round(a(s).foamOpacity*100)))]),F("input",T,J=>r("foamFrequency",parseFloat(J.currentTarget.value))),F("input",N,J=>r("foamLifetime",parseInt(J.currentTarget.value))),F("input",B,J=>r("foamComplexity",parseInt(J.currentTarget.value))),F("input",de,J=>r("foamBranchiness",parseFloat(J.currentTarget.value))),F("input",X,J=>r("foamOpacity",parseFloat(J.currentTarget.value))),le(M,w)};xe(E,M=>{a(s),A(()=>a(s).foamEnabled)&&M($)})}v(b);var G=g(b,2);v(c),he(()=>{Ze(y,(a(s),A(()=>a(s).waterGrainsEnabled))),Ze(u,(a(s),A(()=>a(s).foamEnabled)))}),F("change",y,M=>r("waterGrainsEnabled",M.currentTarget.checked)),F("change",u,M=>r("foamEnabled",M.currentTarget.checked)),F("click",G,o),le(e,c),Oe(),l()}var Wr=oe('<div class="effects-panel svelte-xo34d7"><h3 class="panel-title svelte-xo34d7">Light Effects</h3> <div class="effect-section svelte-xo34d7"><div class="section-header svelte-xo34d7"><h4 class="section-title svelte-xo34d7">Sun Glow</h4> <label class="toggle svelte-xo34d7"><input type="checkbox" class="svelte-xo34d7"/> <span class="toggle-slider svelte-xo34d7"></span></label></div> <div class="control-group svelte-xo34d7"><label class="control-label svelte-xo34d7"><span>Intensity</span> <span class="value svelte-xo34d7"> </span></label> <input type="range" class="slider yellow-slider svelte-xo34d7" min="0" max="1" step="0.01"/></div> <div class="control-group svelte-xo34d7"><label class="control-label svelte-xo34d7"><span>Size</span> <span class="value svelte-xo34d7"> </span></label> <input type="range" class="slider yellow-slider svelte-xo34d7" min="50" max="500" step="10"/></div> <div class="control-group svelte-xo34d7"><label class="control-label svelte-xo34d7"><span>Blur Amount</span> <span class="value svelte-xo34d7"> </span></label> <input type="range" class="slider yellow-slider svelte-xo34d7" min="20" max="100" step="5"/></div> <div class="control-group svelte-xo34d7"><label class="control-label svelte-xo34d7"><span>Pulse Speed</span> <span class="value svelte-xo34d7"> </span></label> <input type="range" class="slider yellow-slider svelte-xo34d7" min="0.0005" max="0.005" step="0.0005"/></div> <div class="control-group svelte-xo34d7"><label class="control-label svelte-xo34d7"><span>Sun Glint Intensity</span> <span class="value svelte-xo34d7"> </span></label> <input type="range" class="slider yellow-slider svelte-xo34d7" min="0" max="1" step="0.1"/></div> <div class="control-group svelte-xo34d7"><label class="control-label svelte-xo34d7"><span>Sun Glint Quantity</span> <span class="value svelte-xo34d7"> </span></label> <input type="range" class="slider yellow-slider svelte-xo34d7" min="0" max="2" step="0.1"/></div></div></div>');function Vr(e,t){Te(t,!1);const[n,l]=Le(),i=()=>ke(ce,"$backgroundSettings",n),s=W();function r(Z,me){ce.update(be=>({...be,[Z]:me}))}we(()=>i(),()=>{L(s,i())}),ze(),Ee();var o=Wr(),c=g(p(o),2),h=p(c),d=g(p(h),2),_=p(d);K(_),Ye(2),v(d),v(h);var y=g(h,2),m=p(y),f=g(p(m),2),b=p(f);v(f),v(m);var S=g(m,2);K(S),v(y);var C=g(y,2),u=p(C),E=g(p(u),2),$=p(E);v(E),v(u);var G=g(u,2);K(G),v(C);var M=g(C,2),w=p(M),x=g(p(w),2),I=p(x);v(x),v(w);var T=g(w,2);K(T),v(M);var q=g(M,2),V=p(q),R=g(p(V),2),ie=p(R);v(R),v(V);var N=g(V,2);K(N),v(q);var ee=g(q,2),P=p(ee),H=g(p(P),2),Y=p(H);v(H),v(P);var B=g(P,2);K(B),v(ee);var j=g(ee,2),ue=p(j),U=g(p(ue),2),ge=p(U);v(U),v(ue);var de=g(ue,2);K(de),v(j),v(c),v(o),he((Z,me,be,D)=>{Ze(_,(a(s),A(()=>a(s).sunGlowEnabled))),Q(b,`${Z??""}%`),se(S,(a(s),A(()=>a(s).sunGlowIntensity))),Q($,`${a(s),A(()=>a(s).sunGlowSize)??""}px`),se(G,(a(s),A(()=>a(s).sunGlowSize))),Q(I,`${a(s),A(()=>a(s).sunGlowBlur)??""}px`),se(T,(a(s),A(()=>a(s).sunGlowBlur))),Q(ie,`${me??""}â°`),se(N,(a(s),A(()=>a(s).sunGlowPulseSpeed))),Q(Y,`${be??""}%`),se(B,(a(s),A(()=>a(s).sunGlintIntensity))),Q(ge,`${D??""}%`),se(de,(a(s),A(()=>a(s).sunGlintQuantity)))},[()=>(a(s),A(()=>Math.round(a(s).sunGlowIntensity*100))),()=>(a(s),A(()=>Math.round(a(s).sunGlowPulseSpeed*1e3))),()=>(a(s),A(()=>Math.round(a(s).sunGlintIntensity*100))),()=>(a(s),A(()=>Math.round(a(s).sunGlintQuantity*100)))]),F("change",_,Z=>r("sunGlowEnabled",Z.currentTarget.checked)),F("input",S,Z=>r("sunGlowIntensity",parseFloat(Z.currentTarget.value))),F("input",G,Z=>r("sunGlowSize",parseInt(Z.currentTarget.value))),F("input",T,Z=>r("sunGlowBlur",parseInt(Z.currentTarget.value))),F("input",N,Z=>r("sunGlowPulseSpeed",parseFloat(Z.currentTarget.value))),F("input",B,Z=>r("sunGlintIntensity",parseFloat(Z.currentTarget.value))),F("input",de,Z=>r("sunGlintQuantity",parseFloat(Z.currentTarget.value))),le(e,o),Oe(),l()}var Ur=oe('<button><div class="dock-icon svelte-ybm7hi"><!></div></button>'),Kr=oe('<div class="placeholder-panel svelte-ybm7hi"><h3>Master Settings</h3> <p>Coming soon...</p> <button>Close</button></div>'),Zr=oe('<div role="toolbar" aria-label="Background Effects Dock"><div class="flex items-end justify-center gap-2" role="group"></div> <div><!> <!> <!> <!> <!> <!></div></div>');function Qr(e,t){Te(t,!1);const n=W();let l=W(!1),i,s=0,r=0,o=W(!1),c=W(!1),h=W(!1),d=W(!1),_=W(!1),y=W(!1),m=-1;const f=100,b=3e3;Pt(()=>{const D=ve=>{s=ve.clientY,S()},X=()=>{r=window.innerHeight};return window.addEventListener("mousemove",D),window.addEventListener("resize",X),X(),()=>{window.removeEventListener("mousemove",D),window.removeEventListener("resize",X),i&&clearTimeout(i)}});function S(){const X=r-s<=f,ve=a(o)||a(c)||a(h)||a(d)||a(_)||a(y);X||ve?C():E()}function C(){L(l,!0),i&&(clearTimeout(i),i=0)}function u(){!a(o)&&!a(c)&&!a(h)&&!a(d)&&!a(_)&&!a(y)&&L(l,!1)}function E(){i&&clearTimeout(i),i=setTimeout(u,b)}function $(){C()}function G(){E()}function M(){L(o,!1),L(c,!1),L(h,!1),L(d,!1),L(_,!1),L(y,!1),S()}function w(D){const X={colors:a(o),timer:a(c),water:a(h),light:a(d),particles:a(_),settings:a(y)}[D];if(M(),!X)switch(D){case"colors":L(o,!0);break;case"timer":L(c,!0);break;case"water":L(h,!0);break;case"light":L(d,!0);break;case"particles":L(_,!0);break;case"settings":L(y,!0);break}C()}function x(D){m=D}function I(){m=-1}function T(D){if(m===-1)return 1;const X=Math.abs(D-m);return X===0?1.25:X===1?1.1:X===2?1.05:1}const q=[{id:"colors",title:"Color Palette",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10c1.34 0 2.61-.26 3.79-.75 1.15-.47 2.22-1.13 3.21-1.95.99-.82 1.87-1.77 2.63-2.81.54-.74.99-1.53 1.37-2.39.37-.85.64-1.76.81-2.7.17-.94.25-1.92.25-2.91 0-5.52-4.48-10-10-10zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/><path d="M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c1.66 0 3.16-.67 4.24-1.76.33-.33.62-.69.88-1.07C17.51 14.31 18 13.19 18 12c0-3.31-2.69-6-6-6zm0 10c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"/><circle cx="12" cy="12" r="2"/></svg>'},{id:"water",title:"Water Effects",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 12C2 6.48 6.48 2 12 2s10 4.48 10 10-4.48 10-10 10S2 17.52 2 12zm5.29-4.71a7.983 7.983 0 0 1 9.42 0 7.983 7.983 0 0 1 0 9.42 7.983 7.983 0 0 1-9.42 0 7.983 7.983 0 0 1 0-9.42zM9 12c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z"/></svg>'},{id:"light",title:"Light Effects",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4m-2.83-7.07l-2.83 2.83M16.24 16.24l-2.83 2.83M12 6a6 6 0 1 0 0 12 6 6 0 0 0 0-12z"/></svg>'},{id:"particles",title:"Particle Effects",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"/><circle cx="19" cy="5" r="1"/><circle cx="5" cy="19" r="1"/><circle cx="5" cy="5" r="1"/><circle cx="19" cy="19" r="1"/></svg>'},{id:"timer",title:"Timer Settings",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>'},{id:"settings",title:"Master Settings",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19.14 12.94a8.003 8.003 0 0 0-1.4-3.88l1.7-1.7a1 1 0 0 0 0-1.42l-1.83-1.83a1 1 0 0 0-1.42 0l-1.7 1.7A8.003 8.003 0 0 0 9.06 4.86L7.34 3.14a1 1 0 0 0-1.42 0L4.09 4.97a1 1 0 0 0 0 1.42l1.7 1.7A8.003 8.003 0 0 0 4.86 12H3.14a1 1 0 0 0 0 2h1.72a8.003 8.003 0 0 0 1.4 3.88l-1.7 1.7a1 1 0 0 0 0 1.42l1.83 1.83a1 1 0 0 0 1.42 0l1.7-1.7c1.18.83 2.54 1.32 3.98 1.32s2.8-.49 3.98-1.32l1.7 1.7a1 1 0 0 0 1.42 0l1.83-1.83a1 1 0 0 0 0-1.42l-1.7-1.7a8.003 8.003 0 0 0 1.4-3.88h1.72a1 1 0 0 0 0-2h-1.72zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"/></svg>'}];we(()=>(a(o),a(c),a(h),a(d),a(_),a(y)),()=>{L(n,a(o)?"colors":a(c)?"timer":a(h)?"water":a(d)?"light":a(_)?"particles":a(y)?"settings":null)}),ze(),Ee();var V=Zr();let R;var ie=p(V);Wn(ie,7,()=>q,D=>D.id,(D,X,ve)=>{var fe=Ur();let J;var $e=p(fe),Ge=p($e);Un(Ge,()=>(a(X),A(()=>a(X).icon))),v($e),v(fe),he((Xe,je)=>{J=Ke(fe,1,"dock-item svelte-ybm7hi",null,J,Xe),We(fe,"title",(a(X),A(()=>a(X).title))),We(fe,"aria-label",(a(X),A(()=>a(X).title))),lt(fe,je)},[()=>({active:a(n)===a(X).id}),()=>(Gt(a(ve)),A(()=>`transform: scale(${T(a(ve))});`))]),F("click",fe,()=>w(a(X).id)),F("mouseenter",fe,()=>x(a(ve))),le(D,fe)}),v(ie);var N=g(ie,2);let ee;var P=p(N);{var H=D=>{$r(D,{$$events:{close:M}})};xe(P,D=>{a(o)&&D(H)})}var Y=g(P,2);{var B=D=>{Lr(D,{$$events:{close:M}})};xe(Y,D=>{a(c)&&D(B)})}var j=g(Y,2);{var ue=D=>{Nr(D,{$$events:{close:M}})};xe(j,D=>{a(h)&&D(ue)})}var U=g(j,2);{var ge=D=>{Vr(D,{$$events:{close:M}})};xe(U,D=>{a(d)&&D(ge)})}var de=g(U,2);{var Z=D=>{Yr(D,{$$events:{close:M}})};xe(de,D=>{a(_)&&D(Z)})}var me=g(de,2);{var be=D=>{var X=Kr(),ve=g(p(X),4);v(X),F("click",ve,M),le(D,X)};xe(me,D=>{a(y)&&D(be)})}v(N),v(V),he((D,X)=>{R=Ke(V,1,"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 transition-all duration-300 ease-in-out",null,R,D),ee=Ke(N,1,"panel-container svelte-ybm7hi",null,ee,X)},[()=>({"translate-y-20":!a(l),"opacity-0":!a(l),"pointer-events-none":!a(l)}),()=>({visible:a(n)})]),F("mouseleave",ie,I),F("mouseenter",V,$),F("mouseleave",V,G),le(e,V),Oe()}var jr=oe('<meta name="description" content="A beautiful Pomodoro timer with interactive background effects"/>'),Jr=oe('<span class="text-sm text-white/60 block mt-1"> </span>'),es=oe('<div class="text-lg font-medium text-white/80"> <!></div>'),ts=oe('<!> <!> <main class="relative z-10 flex min-h-screen flex-col items-center justify-center px-4 py-8 transition-all duration-1000 ease-in-out"><div class="w-full max-w-md space-y-8 text-center"><!> <!> <!></div></main>',1);function ls(e,t){Te(t,!1);const[n,l]=Le(),i=()=>ke(ce,"$backgroundSettings",n),s=()=>ke(Se,"$timerState",n),r=()=>ke(Ae,"$timerSettings",n);function o(C){switch(C){case"Work":return"Focus Session";case"Short Break":return"Short Break";case"Long Break":return"Long Break";default:return"Session"}}Ee();var c=ts();qn(C=>{var u=jr();Fn.title="Locked-In Pomodoro Timer",le(C,u)});var h=Pn(c);Gr(h,{get settings(){return i()}});var d=g(h,2);Qr(d,{});var _=g(d,2),y=p(_),m=p(y);oi(m,{});var f=g(m,2);{var b=C=>{var u=es(),E=p(u),$=g(E);{var G=M=>{var w=Jr(),x=p(w);v(w),he(()=>Q(x,`Session ${s().currentCycleCount+1} of ${r().sessionsBeforeLongBreak??""}`)),le(M,w)};xe($,M=>{s().currentSession==="Work"&&M(G)})}v(u),he(M=>Q(E,`${M??""} `),[()=>o(s().currentSession)]),le(C,u)};xe(f,C=>{s().currentSession&&C(b)})}var S=g(f,2);vi(S,{}),v(y),v(_),le(e,c),Oe(),l()}export{ls as component};
